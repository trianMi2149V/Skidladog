
local b64 = "LS0gWW91dHViZTogWWF0YWtpIFJvYmxveAoKCmxvY2FsIHYxNCA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dpdGh1Yi5jb20vZGF3aWQtc2NyaXB0cy9GbHVlbnQvcmVsZWFzZXMvbGF0ZXN0L2Rvd25sb2FkL21haW4ubHVhIikpKCk7CmxvY2FsIHYxNSA9IHYxNDpDcmVhdGVXaW5kb3coewogICAgVGl0bGUgPSAiWWF0YWtpIFJvYmxveCBIdWIiLAogICAgU3ViVGl0bGUgPSAiQnkgVHJpIMOCbiIsCiAgICBUYWJXaWR0aCA9IDE2MCwKICAgIFRoZW1lID0gIkRhcmsiLAogICAgQWNyeWxpYyA9IGZhbHNlLAogICAgU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTAwLCAzMjApLAogICAgTWluaW1pemVLZXkgPSBFbnVtLktleUNvZGUuRW5kCn0pOwpsb2NhbCB2MTYgPSB7CiAgICBIb21lID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi8J+TrCBUaMO0bmcgVGluIgogICAgfSksCiAgICBNYWluID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi8J+SqiBGcmFtIgogICAgfSksCiAgICBTZWEgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLimpPvuI8gU+G7sSBraeG7h24gYmnhu4NuIgogICAgfSksCiAgICBJVE0gPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLwn5OMIFbhuq10IHBo4bqpbS9OaGnhu4dtIHbhu6UiCiAgICB9KSwKICAgIFNldHRpbmcgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLimpnvuI8gQ8OgaSDEkeG6t3QiCiAgICB9KSwKICAgIFN0YXR1cyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIvCfjJAgTcOheSBjaOG7pyIKICAgIH0pLAogICAgU3RhdHMgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLirIbvuI8gQ2jhu4kgU+G7kSIKICAgIH0pLAogICAgUGxheWVyID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi8J+Rpe+4jyBOZ8aw4budaSBjaMahaSIKICAgIH0pLAogICAgVGVsZXBvcnQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLwn5GjIEThu4tjaCBjaHV54buDbiIKICAgIH0pLAogICAgVmlzdWFsID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi8J+koSBHaeG6oyIKICAgIH0pLAogICAgRnJ1aXQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLwn42OIFRyw6FpIgogICAgfSksCiAgICBSYWlkID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi4pqU77iPIFThuq1wIGvDrWNoIgogICAgfSksCiAgICBSYWNlID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAi8J+MtCBVcCB04buZYyIKICAgIH0pLAogICAgU2hvcCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIvCfm5IgQ+G7rWEgaMOgbmciCiAgICB9KSwKICAgIE1pc2MgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICLimqHvuI8ga2jDoWMiCiAgICB9KQp9Owpsb2NhbCB2MTcgPSB2MTQuT3B0aW9uczsKbG9jYWwgdjE4ID0gZ2FtZS5QbGFjZUlkOwppZiAodjE4ID09IDI3NTM5MTU1NDkpIHRoZW4KICAgIFNlYTEgPSB0cnVlOwplbHNlaWYgKHYxOCA9PSA0NDQyMjcyMTgzKSB0aGVuCiAgICBTZWEyID0gdHJ1ZTsKZWxzZWlmICh2MTggPT0gNzQ0OTQyMzYzNSkgdGhlbgogICAgU2VhMyA9IHRydWU7CmVsc2UKICAgIGdhbWU6U2h1dGRvd24oKTsKZW5kCmdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLklkbGVkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJEb3duKFZlY3RvcjIubmV3KDAsIDApLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUpOwogICAgd2FpdCgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJVcChWZWN0b3IyLm5ldygwLCAwKSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKTsKZW5kKTsKU2VhMSA9IGZhbHNlOwpTZWEyID0gZmFsc2U7ClNlYTMgPSBmYWxzZTsKbG9jYWwgdjE5ID0gZ2FtZS5QbGFjZUlkOwppZiAodjE5ID09IDI3NTM5MTU1NDkpIHRoZW4KICAgIFNlYTEgPSB0cnVlOwplbHNlaWYgKHYxOSA9PSA0NDQyMjcyMTgzKSB0aGVuCiAgICBTZWEyID0gdHJ1ZTsKZWxzZWlmICh2MTkgPT0gNzQ0OTQyMzYzNSkgdGhlbgogICAgU2VhMyA9IHRydWU7CmVuZApmdW5jdGlvbiBDaGVja0xldmVsKCkKICAgIGxvY2FsIHYxOTcgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlOwogICAgaWYgU2VhMSB0aGVuCiAgICAgICAgaWYgKCh2MTk3ID09IDEpIG9yICh2MTk3IDw9IDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQmFuZGl0UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA2MC45MzgzNTQ0OTIyLCAxNi40NTUwNjY2ODA5MDgsIDE1NDcuNzg0MTc5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTAzOC41NTMzNDQ3MjY2LCA0MS4yOTYyNDkzODk2NDgsIDE1NzYuNTA5ODg3Njk1Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMCkgb3IgKHYxOTcgPD0gMTQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNb25rZXkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNb25rZXkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNb25rZXkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDQ4LjE0NDY1MzMyMDMsIDUwLjg1MTk5MzU2MDc5MSwgNjMuNjA3MTg1MzYzNzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUpIG9yICh2MTk3IDw9IDI5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR29yaWxsYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdvcmlsbGEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHb3JpbGxhIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTE0Mi42NDg4MDM3MTA5LCA0MC40NjIzNDg5Mzc5ODgsIC0gNTE1LjM5MjI3Mjk0OTIyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDMwKSBvciAodjE5NyA8PSAzOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEyMDEuMDg4MTM0NzY1NiwgNDAuNjI4OTQwNTgyMjc1LCAzODU3LjU5NjY3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDApIG9yICh2MTk3IDw9IDU5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQnJ1dGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM4Ny41MzI0NzA3MDMxLCAyNC41OTIwMzUyOTM1NzksIDQxMDAuOTU3NTE5NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA2MCkgb3IgKHYxOTcgPD0gNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZXNlcnQgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVzZXJ0IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlc2VydCBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg4OTYuNTE3MjExOTE0MDYsIDYuNDM4NDYxNzgwNTQ4MSwgNDM5MC4xNDk0MTQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5ODQuOTk4OTYyNDAyMzQsIDE2LjEwOTU1MjM4MzQyMywgNDQxNy45MTAxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA3NSkgb3IgKHYxOTcgPD0gODkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZXNlcnQgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlc2VydCBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlc2VydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVzZXJ0IE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg4OTYuNTE3MjExOTE0MDYsIDYuNDM4NDYxNzgwNTQ4MSwgNDM5MC4xNDk0MTQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNTQ3LjE1MTAwMDk3NjYsIDE0LjQ1MjAzODc2NDk1NCwgNDM4MS44MDAyOTI5Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDkwKSBvciAodjE5NyA8PSA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEzNTYuMzAyODU2NDQ1MywgMTA1Ljc2ODY1Mzg2OTYzLCAtIDEzMjguMjQxODIxMjg5MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDApIG9yICh2MTk3IDw9IDExOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3dtYW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93bWFuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3dtYW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMTguNzk1NjU0Mjk2OSwgMTM4LjAxMTg0MDgyMDMxLCAtIDE0ODguMDI2MjQ1MTE3Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjApIG9yICh2MTk3IDw9IDE0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNoaWVmIFBldHR5IE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNoaWVmIFBldHR5IE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDUwMzUuNDk2MDkzNzUsIDI4LjY3NzgzNTQ2NDQ3OCwgNDMyNC4xODQwODIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDQ5MzEuMTU1MjczNDM3NSwgNjUuNzkzMTEzNzA4NDk2LCA0MTIxLjgzOTM1NTQ2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUwKSBvciAodjE5NyA8PSAxNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTa3kgQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2t5IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNreSBCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtIDI2MjMuMDQ4MzM5ODQzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0OTU1LjY0MTExMzI4MTMsIDM2NS40NjM2NTM1NjQ0NSwgLSAyOTA4LjE4NjUyMzQzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTc1KSBvciAodjE5NyA8PSAxODkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEYXJrIE1hc3RlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRhcmsgTWFzdGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGFyayBNYXN0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtIDI2MjMuMDQ4MzM5ODQzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MTQ4LjE2NTAzOTA2MjUsIDQzOS4wNDU3MTUzMzIwMywgLSAyMzMyLjk2MTE4MTY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkwKSBvciAodjE5NyA8PSAyMDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQcmlzb25lciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQcmlzb25lciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUzMTAuNjA1NDcsIDAuMzUwMDE0OTI1LCA0NzQuOTQ2NTk0LCAwLjAxNzUwMTcxMTgsIDAsIDAuOTk5ODQ2OTM1LCAwLCAxLCAwLCAtIDAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ5MzcuMzE4ODUsIDAuMzMyMDMxMzk5LCA2NDkuNTc0NTI0LCAwLjY5NDY0OTgxNiwgMCwgLSAwLjcxOTM0ODA3MywgMCwgMSwgMCwgMC43MTkzNDgwNzMsIDAsIDAuNjk0NjQ5ODE2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMCkgb3IgKHYxOTcgPD0gMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGFuZ2Vyb3VzIFByaXNvbmVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYW5nZXJvdXMgUHJpc29uZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MzEwLjYwNTQ3LCAwLjM1MDAxNDkyNSwgNDc0Ljk0NjU5NCwgMC4wMTc1MDE3MTE4LCAwLCAwLjk5OTg0NjkzNSwgMCwgMSwgMCwgLSAwLjk5OTg0NjkzNSwgMCwgMC4wMTc1MDE3MTE4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MDk5LjY2MjYsIDAuMzUxNTYyNjc5LCAxMDU1Ljc1ODMsIDAuODk4OTA2ODI3LCAwLCAtIDAuNDM4MTM5ODU2LCAwLCAxLCAwLCAwLjQzODEzOTg1NiwgMCwgMC44OTg5MDY4MjcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUwKSBvciAodjE5NyA8PSAyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJUb2dhIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ29sb3NzZXVtUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtIDI5ODQuNDgzODg2NzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxODcyLjUxNjYwMTU2MjUsIDQ5LjA4MDIxNTQ1NDEwMiwgLSAyOTEzLjgxMDU0Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNzUpIG9yICh2MTk3IDw9IDI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdsYWRpYXRvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTU3Ny43ODkwNjI1LCA3LjQxNTE0MjA1OTMyNjIsIC0gMjk4NC40ODM4ODY3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE1MjEuMzc0MDIzNDM3NSwgODEuMjAzMTcwNzc2MzY3LCAtIDMwNjYuMzEzOTY0ODQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMDApIG9yICh2MTk3IDw9IDMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MzY5LjAwMDQ4ODI4MTMsIDYxLjI0MzUyNjQ1ODc0LCA4NTU2LjQ5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzI1KSBvciAodjE5NyA8PSAzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNaWxpdGFyeSBTcHkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTMxNi4xMTU3MjI2NTYzLCAxMi4yNjI4MzE2ODc5MjcsIDg1MTcuMDAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTc4Ny4wMDI5MywgNzUuODI2MjYzNCwgODY1MS42OTkyMiwgMC44Mzg1OTA1NjIsIDAsIC0gMC41NDQ3NjIxOTQsIDAsIDEsIDAsIDAuNTQ0NzYyMTk0LCAwLCAwLjgzODU5MDU2Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzNzUpIG9yICh2MTk3IDw9IDM5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYwODQ0LjEwNTQ2ODc1LCA5OC40NjI4NzUzNjYyMTEsIDEyOTguMzk4NTU5NTcwMyk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDAwKSBvciAodjE5NyA8PSA0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENvbW1hbmRvIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MTczOC4zOTg0Mzc1LCA2NC4yMDczMjExNjY5OTIsIDE0MzMuODM3NTI0NDE0MSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTApIG9yICh2MTk3IDw9IDQ3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdvZCdzIEd1YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ3MjEuODYwMzUxNTYyNSwgODQ1LjMwMjk3ODUxNTYzLCAtIDE5NTMuODQ4OTk5MDIzNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0NjI4LjA0OTgwNDY4NzUsIDg2Ni45Mjg3NzE5NzI2NiwgLSAxOTMxLjIzNTIyOTQ5MjIpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0NzUpIG9yICh2MTk3IDw9IDUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoYW5kYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoYW5kYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGFuZGEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDc4NjMuMTU5NjY3OTY4OCwgNTU0NS41MTkwNDI5Njg4LCAtIDM3OC40MjI2Njg0NTcwMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3Njg1LjE0NzQ2MDkzNzUsIDU2MDEuMDc1MTk1MzEyNSwgLSA0NDEuMzg4NzYzNDI3NzMpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTI1KSBvciAodjE5NyA8PSA1NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTcXVhZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NjU0LjI1MTQ2NDg0MzgsIDU2MzcuMTA3OTEwMTU2MywgLSAxNDA3Ljc1NTAwNDg4MjgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTUwKSBvciAodjE5NyA8PSA2MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUm95YWwgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NzYwLjQxMDY0NDUzMTMsIDU2NzkuOTA3NzE0ODQzOCwgLSAxODg0LjgxMTI3OTI5NjkpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNjI1KSBvciAodjE5NyA8PSA2NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTU1Ny4xNjg0NTcwMzEzLCAxNTIuMzI3MTc4OTU1MDgsIDM5OTguNzc1ODc4OTA2Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA+PSA2NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdhbGxleSBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHYWxsZXkgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTY3Ny42NzcyNDYwOTM4LCA5Mi43ODYxMDk5MjQzMTYsIDQ5NjYuNjMyMzI0MjE4OCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTIgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSA3MDApIG9yICh2MTk3IDw9IDcyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJhaWRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJhaWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUmFpZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0MjcuNzI1Njc3NDkwMjMsIDcyLjk5NjM0NTUyMDAyLCAxODM1Ljk0MjYyNjk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY4Ljg3NDU2NTEyNDUxMiwgOTMuNjM1NjQzMDA1MzcxLCAyNDI5LjY3NTI5Mjk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzI1KSBvciAodjE5NyA8PSA3NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNZXJjZW5hcnkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNZXJjZW5hcnkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1lcmNlbmFyeSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDg2NC44NTAwOTc2NTYyNSwgMTIyLjQ3MTA0NjQ0Nzc1LCAxNDUzLjE1MDUxMjY5NTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzc1KSBvciAodjE5NyA8PSA3OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTd2FuIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWEyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEwNjUuMzY2OTQzMzU5NCwgMTM3LjY0MDEyMTQ1OTk2LCAxMzI0LjM3OTg4MjgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODAwKSBvciAodjE5NyA8PSA4NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJGYWN0b3J5IFN0YWZmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUzMy4yMjA0NTg5ODQzOCwgMTI4LjQ2ODc2NTI1ODc5LCAzNTUuNjI2MTU5NjY3OTcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODc1KSBvciAodjE5NyA8PSA4OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgTGlldXRlbmFuIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDI0ODkuMjYyMjA3MDMxMywgODQuNjEzNTk0MDU1MTc2LCAtIDMxNTEuODgzMDU2NjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5MDApIG9yICh2MTk3IDw9IDk0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIzMzUuMjAyNjM2NzE4OCwgNzkuNzg2NjU5MjQwNzIzLCAtIDMyNDUuODY3NDMxNjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NTApIG9yICh2MTk3IDw9IDk3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlpvbWJpZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlpvbWJpZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlpvbWJpZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU1MzYuNDk3MDcwMzEyNSwgMTAxLjA4NTc3NzI4MjcxLCAtIDgzNS41OTA3NTkyNzczNCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NzUpIG9yICh2MTk3IDw9IDk5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlZhbXBpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJWYW1waXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlpvbWJpZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVmFtcGlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU4MDYuMTA5ODYzMjgxMywgMTYuNzIyNTI4NDU3NjQyLCAtIDExNjQuNDM4NDc2NTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDAwKSBvciAodjE5NyA8PSAxMDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBUcm9vcGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjA3LjA1OTYzMTM0NzY2LCA0MDEuNDQ3ODE0OTQxNDEsIC0gNTM3MC41NTQ2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MzUuMjEwNTEwMjUzOTEsIDQzMi43NDIwOTU5NDcyNywgLSA1NDg0LjkxNjUwMzkwNjMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTA1MCkgb3IgKHYxOTcgPD0gMTA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIldpbnRlciBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2ludGVyIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd01vdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJXaW50ZXIgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtIDUzNzAuNTU0Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTIzNC40NDQ5NDYyODkxLCA0NTYuOTU0MTkzMTE1MjMsIC0gNTE3NC4xMzA4NTkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTEwMCkgb3IgKHYxOTcgPD0gMTEyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxhYiBTdWJvcmRpbmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhYiBTdWJvcmRpbmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYWIgU3Vib3JkaW5hdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDYwNjEuODQxNzk2ODc1LCAxNS45MjY2NzE5ODE4MTIsIC0gNDkwMi4wMzg1NzQyMTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU3MjAuNTU3NjE3MTg3NSwgNjMuMzA5NDcxMTMwMzcxLCAtIDQ3ODQuNjEwMzUxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMTI1KSBvciAodjE5NyA8PSAxMTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSG9ybmVkIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNjA2MS44NDE3OTY4NzUsIDE1LjkyNjY3MTk4MTgxMiwgLSA0OTAyLjAzODU3NDIxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNjI5Mi43NTE5NTMxMjUsIDkxLjE4MTk4Mzk0Nzc1NCwgLSA1NTAyLjY0OTkwMjM0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTE3NSkgb3IgKHYxOTcgPD0gMTE5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hZ21hIE5pbmphIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlyZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTQ2MS44Mzg4NjcxODc1LCAxMzAuMzYzNDc5NjE0MjYsIC0gNTgzNi40NzAyMTQ4NDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyMDApIG9yICh2MTk3IDw9IDEyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJMYXZhIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhdmEgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYXZhIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUyNTEuMTg4OTY0ODQzOCwgNTUuMTY0NTM1NTIyNDYxLCAtIDQ3NzQuNDA5NjY3OTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjUwKSBvciAodjE5NyA8PSAxMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBEZWNraGFuZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTIxLjEyMzY1NzIyNjU2LCAxMjUuOTgzOTU1MzgzMywgMzMwODguMzI4MTI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjc1KSBvciAodjE5NyA8PSAxMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBFbmdpbmVlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoODg2LjI4MTc5OTMxNjQxLCA0MC40Nzc5MDE0NTg3NCwgMzI4MDAuODMyMDMxMjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMDApIG9yICh2MTk3IDw9IDEzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIFN0ZXdhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIFN0ZXdhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgU3Rld2FyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTQzLjg1NTA0MTUwMzkxLCAxMjkuNTgxODMyODg1NzQsIDMzNDQ0LjM2NzE4NzUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMjUpIG9yICh2MTk3IDw9IDEzNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTU1LjM4NDU4MjUxOTUzLCAxODEuMDgzMzU4NzY0NjUsIDMzMzMxLjg5MDYyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM1MCkgb3IgKHYxOTcgPD0gMTM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkFyY3RpYyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQXJjdGljIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkFyY3RpYyBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1OTM1LjQ1NDEwMTU2MjUsIDc3LjI2MDE2OTk4MjkxLCAtIDY0NzIuNzU2ODM1OTM3NSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0gMTMyLjgzOTUzODU3NDIyKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM3NSkgb3IgKHYxOTcgPD0gMTQyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgTHVya2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBMdXJrZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgTHVya2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NjI4LjQ4MjQyMTg3NSwgNTcuNTc0OTk2OTQ4MjQyLCAtIDY2MTguMzQ4MTQ0NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNDI1KSBvciAodjE5NyA8PSAxNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2VhIFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTZWEgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNlYSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAzMDU0LjU4Mjc2MzY3MTksIDIzNi44NzIxMzEzNDc2NiwgLSAxMDE0Ny43OTAwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMzE4NS4wMTUzODA4NTk0LCA1OC43ODkwODkyMDI4ODEsIC0gOTY2My42MDY0NDUzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID49IDE0NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJXYXRlciBGaWdodGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDMwNTQuNTgyNzYzNjcxOSwgMjM2Ljg3MjEzMTM0NzY2LCAtIDEwMTQ3Ljc5MDAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAzMjYyLjkzMDE3NTc4MTMsIDI5OC42OTAzNjg2NTIzNCwgLSAxMDU1Mi41MjkyOTY4NzUpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEzIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gMTUwMCkgb3IgKHYxOTcgPD0gMTUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpcmF0ZSBNaWxsaW9uYWlyZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUgTWlsbGlvbmFpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ1MC4xMDQ2NDQ3NzUzOTA2LCAxMDcuNjgxNDU3NTE5NTMxMjUsIDU5NTAuNzI2MDc0MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTkzLjk5MjI3OTA1MjczNDM4LCA1Ni4xMjUwMjY3MDI4ODA4NiwgNTc1NS43ODgwODU5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1MjUpIG9yICh2MTk3IDw9IDE1NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXN0b2wgQmlsbGlvbmFpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NTAuMTA0NjQ0Nzc1MzkwNiwgMTA3LjY4MTQ1NzUxOTUzMTI1LCA1OTUwLjcyNjA3NDIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE4OC4xNDQ2MjI4MDI3MzQzOCwgODQuNDk2MTMxODk2OTcyNjYsIDYzMzcuMDQxOTkyMTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTc1KSBvciAodjE5NyA8PSAxNTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRHJhZ29uIENyZXcgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRHJhZ29uQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRHJhZ29uIENyZXcgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDY3MzUuMTEwODM5ODQzNzUsIDEyNi45OTA0NjMyNTY4MzU5NCwgLSA3MTEuMDk3OTYxNDI1NzgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjYxNS4yMzMzOTg0Mzc1LCA1MC44NDc2NzkxMzgxODM1OTQsIC0gOTc4LjkzNDA4MjAzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2MDApIG9yICh2MTk3IDw9IDE2MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJEcmFnb24gQ3JldyBBcmNoZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRHJhZ29uQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjczNS4xMTA4Mzk4NDM3NSwgMTI2Ljk5MDQ2MzI1NjgzNTk0LCAtIDcxMS4wOTc5NjE0MjU3ODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2ODE4LjU4OTM1NTQ2ODc1LCA0ODMuNzE4OTk0MTQwNjI1LCA1MTIuNzI2ODA2NjQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2MjUpIG9yICh2MTk3IDw9IDE2NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJIeWRyYSBFbmZvcmNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlZlbm9tQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0NTQ3LjExNTIzNDM3NSwgMTAwMS42MDIwNTA3ODEyNSwgMzM0LjE5NTQ2NTA4Nzg5MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTY1MCkgb3IgKHYxOTcgPD0gMTY5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlZlbm9tb3VzIEFzc2FpbGFudCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU0NDYuODc5Mzk0NTMxMywgNjAxLjYyOTQ1NTU2NjQxLCA3NDkuNDU2NzI2MDc0MjIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ2MzcuODg1MjUzOTA2MjUsIDEwNzcuODU1OTU3MDMxMjUsIDg4Mi40MTgzOTU5OTYwOTM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3MDApIG9yICh2MTk3IDw9IDE3MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgQ29tbW9kb3JlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIENvbW1vZG9yZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENvbW1vZG9yZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIxNzkuOTg4MjgxMjUsIDI4LjczMTIzOTMxODg0OCwgLSA2NzQwLjA1NTE3NTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDIxOTguMDA2MzQ3NjU2MywgMTI4LjcxMDc1NDM5NDUzLCAtIDcxMDkuNTA0Mzk0NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzI1KSBvciAodjE5NyA8PSAxNzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIFJlYXIgQWRtaXJhbCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBSZWFyIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBSZWFyIEFkbWlyYWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMTc5Ljk4ODI4MTI1LCAyOC43MzEyMzkzMTg4NDgsIC0gNjc0MC4wNTUxNzU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygzMjk0LjMxNDIwODk4NDQsIDM4NS40MTEyNTQ4ODI4MSwgLSA3MDQ4LjYzNDI3NzM0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTc3NSkgb3IgKHYxOTcgPD0gMTc5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gUmFpZGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTA1ODIuNzU5NzY1NjI1LCAzMzEuNzg4NDUyMTQ4NDQsIC0gODc1Ny42NjYwMTU2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTA1NTMuMjY4NTU0Njg4LCA1MjEuMzg0Mzk5NDE0MDYsIC0gODE3Ni45NDU4MDA3ODEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4MDApIG9yICh2MTk3IDw9IDE4MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENhcHRhaW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEwNTgzLjA5OTYwOTM3NSwgMzMxLjc4ODQ1MjE0ODQ0LCAtIDg3NTkuNDYzODY3MTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDc4OS40MDEzNjcxODgsIDQyNy4xODYzNzA4NDk2MSwgLSA5MTMxLjQ0MjM4MjgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTgyNSkgb3IgKHYxOTcgPD0gMTg0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZvcmVzdCBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGb3Jlc3QgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGb3Jlc3QgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMzIzMi42NjIxMDkzNzUsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjQ4MTkzMzU5MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM0ODkuMzk3NDYwOTM4LCA0MDAuMzAzNDk3MzE0NDUsIC0gNzc3MC4yNTE5NTMxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTg1MCkgb3IgKHYxOTcgPD0gMTg5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk15dGhvbG9naWNhbCBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMzIzMi42NjIxMDkzNzUsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjQ4MTkzMzU5MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTM1MDguNjE2MjEwOTM4LCA1ODIuNDYyMjgwMjczNDQsIC0gNjk4NS4zMDM3MTA5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5MDApIG9yICh2MTk3IDw9IDE5MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJKdW5nbGUgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMjI2Ny4xMDM1MTU2MjUsIDQ1OS43NTI2MjQ1MTE3MiwgLSAxMDI3Ny4yMDAxOTUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkyNSkgb3IgKHYxOTcgPD0gMTk3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk11c2tldGVlciBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNdXNrZXRlZXIgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTXVza2V0ZWVyIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzMjkxLjUwNzgxMjUsIDUyMC40NzMzODg2NzE4OCwgLSA5OTA0LjYzODY3MTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTc1KSBvciAodjE5NyA8PSAxOTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUmVib3JuIFNrZWxldG9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUmVib3JuIFNrZWxldG9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSZWJvcm4gU2tlbGV0b24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk0ODAuODA3NjIsIDE0Mi4xMzA2NjEsIDU1NjYuMzczMDUsIC0gMC4wMDY1NTUwMzA1OSwgNC41Mjk1NDIzZS04LCAtIDAuOTk5OTc4NTQyLCAyLjA0OTIwNDdlLTgsIDEsIDQuNTE2MjA2OGUtOCwgMC45OTk5Nzg1NDIsIC0gMi4wMTk1NTY4ZS04LCAtIDAuMDA2NTU1MDMwNTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gODc2MS43NzE0OCwgMTgzLjQzMTc0NywgNjE2OC4zMzMwMSwgMC45NzgwNzM1OTcsIC0gMC4wMDAwMTM5NTA3MzIsIC0gMC4yMDgyNTkwMTYsIC0gMC4wMDAwMDEwODA3MzkzLCAxLCAtIDAuMDAwMDcyMDYzMDMsIDAuMjA4MjU5MDE2LCAwLjAwMDA3MDcwODA0LCAwLjk3ODA3MzU5Nyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDAwKSBvciAodjE5NyA8PSAyMDI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTGl2aW5nIFpvbWJpZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxpdmluZyBab21iaWUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkxpdmluZyBab21iaWUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk0ODAuODA3NjIsIDE0Mi4xMzA2NjEsIDU1NjYuMzczMDUsIC0gMC4wMDY1NTUwMzA1OSwgNC41Mjk1NDIzZS04LCAtIDAuOTk5OTc4NTQyLCAyLjA0OTIwNDdlLTgsIDEsIDQuNTE2MjA2OGUtOCwgMC45OTk5Nzg1NDIsIC0gMi4wMTk1NTY4ZS04LCAtIDAuMDA2NTU1MDMwNTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTAxMDMuNzUyOSwgMjM4LjU2NTk3OSwgNjE3OS43NTk3NywgMC45OTk0NzQyMjcsIDIuNzc1NDcxNGUtOCwgMC4wMzI0MjQwMzY0LCAtIDIuNTgwMDYzM2UtOCwgMSwgLSA2LjA2ODQ4NWUtOCwgLSAwLjAzMjQyNDAzNjQsIDUuOTgxNjM5ZS04LCAwLjk5OTQ3NDIyNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDI1KSBvciAodjE5NyA8PSAyMDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVtb25pYyBTb3VsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk1MTYuOTkzMTY0MDYyNSwgMTc4LjAwNjUxNTUwMjkzLCA2MDc4LjQ2NTMzMjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTcxMi4wMzEyNSwgMjA0LjY5NTg5MjMzMzk4LCA2MTkzLjMyMjI2NTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDUwKSBvciAodjE5NyA8PSAyMDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQb3Nlc3NlZCBNdW1teSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUG9zZXNzZWQgTXVtbXkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDk1MTYuOTkzMTY0MDYyNSwgMTc4LjAwNjUxNTUwMjkzLCA2MDc4LjQ2NTMzMjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTU0NS43NzYzNjcxODc1LCA2OS42MTk4OTU5MzUwNTksIDYzMzkuNTYxNTIzNDM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMDc1KSBvciAodjE5NyA8PSAyMDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGVhbnV0IFNjb3V0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGVhbnV0IFNjb3V0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBTY291dCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjEwNS41MzE5OCwgMzcuMjQ5NTk5NSwgLSAxMDE5NS41MDg4LCAtIDAuNzY2MDYxNjY0LCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMTUwLjU4Nzg5MDYyNSwgMTIyLjQ5NzY3MzAzNDY3LCAtIDEwMzU4Ljk5NDE0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTAwKSBvciAodjE5NyA8PSAyMTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGVhbnV0IFByZXNpZGVudCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBlYW51dCBQcmVzaWRlbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGVhbnV0IFByZXNpZGVudCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjEwNS41MzE5OCwgMzcuMjQ5NTk5NSwgLSAxMDE5NS41MDg4LCAtIDAuNzY2MDYxNjY0LCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMTUwLjU4Nzg5MDYyNSwgMTIyLjQ5NzY3MzAzNDY3LCAtIDEwMzU4Ljk5NDE0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTI1KSBvciAodjE5NyA8PSAyMTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSWNlIENyZWFtIENoZWYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJY2UgQ3JlYW0gQ2hlZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSWNlIENyZWFtIENoZWYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLSAxMTAwOS45ODA1LCAtIDAuMDcwMzEwMTUzMSwgIi0wIiwgLSAwLjk5NzUyNTE1NiwgIi0wIiwgMS4wMDAwMDAxMiwgIi0wIiwgMC45OTc1MjUyNzUsIDAsIC0gMC4wNzAzMTAxNDU2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxNTApIG9yICh2MTk3IDw9IDIxOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSWNlIENyZWFtIENvbW1hbmRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSWNlIENyZWFtIENvbW1hbmRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3ODkuOTQxNTI4LCAyMDkuMzgyODg5LCAtIDExMDA5Ljk4MDUsIC0gMC4wNzAzMTAxNTMxLCAiLTAiLCAtIDAuOTk3NTI1MTU2LCAiLTAiLCAxLjAwMDAwMDEyLCAiLTAiLCAwLjk5NzUyNTI3NSwgMCwgLSAwLjA3MDMxMDE0NTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjIwMCkgb3IgKHYxOTcgPD0gMjIyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNvb2tpZSBDcmFmdGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ29va2llIENyYWZ0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNvb2tpZSBDcmFmdGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMDIyLjI5ODU4LCAzNi45Mjc1ODk0LCAtIDEyMDMwLjk3NjYsIC0gMC45NjEyNzM5MDksIDAsIC0gMC4yNzU1OTQ1OTIsIDAsIDEsIDAsIDAuMjc1NTk0NTkyLCAwLCAtIDAuOTYxMjczOTA5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIzMjEuNzEyMTYsIDM2LjY5OTQ4MiwgLSAxMjIxNi43ODcxLCAtIDAuNzgwMDc0OTU0LCAwLCAwLjYyNTY4NjEwOSwgMCwgMSwgMCwgLSAwLjYyNTY4NjEwOSwgMCwgLSAwLjc4MDA3NDk1NCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjI1KSBvciAodjE5NyA8PSAyMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FrZSBHdWFyZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNha2UgR3VhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNha2UgR3VhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0gMTIwMzAuOTc2NiwgLSAwLjk2MTI3MzkwOSwgMCwgLSAwLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0gMC45NjEyNzM5MDkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQxOC4xMTAxMSwgMzYuNjcxODk0MSwgLSAxMjI1NS43MzI0LCAwLjA2Nzc4NDQ4ODIsIDAsIDAuOTk3NzAwMDM2LCAwLCAxLCAwLCAtIDAuOTk3NzAwMDM2LCAwLCAwLjA2Nzc4NDQ4ODIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjI1MCkgb3IgKHYxOTcgPD0gMjI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJha2luZyBTdGFmZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJha2luZyBTdGFmZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQmFraW5nIFN0YWZmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtIDEyODQwLjYyNiwgMC45NTEwNjg0MDEsICItMCIsIC0gMC4zMDg5ODA0NjUsIDAsIDEsICItMCIsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxOTgwLjQzODQ4LCAzNi42NzE2NzY2LCAtIDEyOTgzLjg0MTgsIC0gMC4yNTQ0NDM3NjUsIDAsIC0gMC45NjcwODc1NjcsIDAsIDEsIDAsIDAuOTY3MDg3NTY3LCAwLCAtIDAuMjU0NDQzNzY1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyNzUpIG9yICh2MTk3IDw9IDIyOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSGVhZCBCYWtlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSGVhZCBCYWtlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTkyOC4zMTc2MywgMzcuNzI5NjYzOCwgLSAxMjg0MC42MjYsIDAuOTUxMDY4NDAxLCAiLTAiLCAtIDAuMzA4OTgwNDY1LCAwLCAxLCAiLTAiLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjI1MS41NzkxLCA1Mi4yNzE0NjE1LCAtIDEzMDMzLjM5NjUsIC0gMC45OTE5NzEwMTYsIDAsIC0gMC4xMjY0NjYwOTUsIDAsIDEsIDAsIDAuMTI2NDY2MDk1LCAwLCAtIDAuOTkxOTcxMDE2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzMDApIG9yICh2MTk3IDw9IDIzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDb2NvYSBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ29jb2EgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ29jb2EgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIzMS43NSwgMjMuOTAwMzAyOSwgLSAxMjIwMC4yOTIsIC0gMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgLSAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxNjcuOTc4NTE2LCAyNi4yMjU0NjU4LCAtIDEyMjM4Ljg3NCwgLSAwLjkzOTcwMDk2MSwgMCwgMC4zNDE5OTgzNjksIDAsIDEsIDAsIC0gMC4zNDE5OTgzNjksIDAsIC0gMC45Mzk3MDA5NjEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjMyNSkgb3IgKHYxOTcgPD0gMjM0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjMxLjc1LCAyMy45MDAzMDI5LCAtIDEyMjAwLjI5MiwgLSAxLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtIDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDcwMS4zMTIwNzMsIDI1LjU4MjQ5ODYsIC0gMTI3MDguMjE0OCwgLSAwLjM0MjA0MjY4NSwgMCwgLSAwLjkzOTY4NDM5MSwgMCwgMSwgMCwgMC45Mzk2ODQzOTEsIDAsIC0gMC4zNDIwNDI2ODUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjM1MCkgb3IgKHYxOTcgPD0gMjM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlN3ZWV0IFRoaWVmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU3dlZXQgVGhpZWYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlN3ZWV0IFRoaWVmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTUxLjE5ODI0MiwgMjMuODkwNzE0NiwgLSAxMjc3NC42MTcyLCAwLjQyMjU5Mjk5OCwgMCwgMC45MDYzMTk2MTgsIDAsIDEsIDAsIC0gMC45MDYzMTk2MTgsIDAsIDAuNDIyNTkyOTk4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MC4yNTgzMDEsIDI1LjU4MjQ5ODYsIC0gMTI2NTIuMzExNSwgMC4xNzM2MjQzMzcsICItMCIsIC0gMC45ODQ4MTE5MDIsIDAsIDEsICItMCIsIDAuOTg0ODExOTAyLCAwLCAwLjE3MzYyNDMzNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzc1KSBvciAodjE5NyA8PSAyNDAwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUmViZWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYW5keSBSZWJlbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUmViZWwiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxNTEuMTk4MjQyLCAyMy44OTA3MTQ2LCAtIDEyNzc0LjYxNzIsIDAuNDIyNTkyOTk4LCAwLCAwLjkwNjMxOTYxOCwgMCwgMSwgMCwgLSAwLjkwNjMxOTYxOCwgMCwgMC40MjI1OTI5OTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ3LjkyMzE0NTMsIDI1LjU4MjQ5ODYsIC0gMTMwMjkuMjQwMiwgLSAwLjgxOTE1NjA1MSwgMCwgLSAwLjU3MzU3MTI2NSwgMCwgMSwgMCwgMC41NzM1NzEyNjUsIDAsIC0gMC44MTkxNTYwNTEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQwMCkgb3IgKHYxOTcgPD0gMjQyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNhbmR5IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNhbmR5IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNhbmR5IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0gMTQ0NDUuNjE0MywgLSAwLjE1NjQ0NjA5OSwgMCwgLSAwLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0gMC4xNTY0NDYwOTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQzNy41NjM0OCwgMTcuMTQ4MTI4NSwgLSAxNDM4NS42OTM0LCAwLjE3MzYyNDMzNywgIi0wIiwgLSAwLjk4NDgxMTkwMiwgMCwgMSwgIi0wIiwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0MjUpIG9yICh2MTk3IDw9IDI0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IERlbW9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBEZW1vbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgRGVtb24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDkuMzI4LCAxMy41NzU5MDM5LCAtIDE0NDQ1LjYxNDMsIC0gMC4xNTY0NDYwOTksIDAsIC0gMC45ODc2ODY1NzQsIDAsIDEsIDAsIDAuOTg3Njg2NTc0LCAwLCAtIDAuMTU2NDQ2MDk5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDkxNi4yMjI2NTYsIDE3LjE0ODEyODUsIC0gMTQ2MzguODEyNSwgMC44NjYwMDcyNjgsIDAsIDAuNTAwMDMxNDEyLCAwLCAxLCAwLCAtIDAuNTAwMDMxNDEyLCAwLCAwLjg2NjAwNzI2OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDUwKSBvciAodjE5NyA8PSAyNDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsZSBPdXRsYXciKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xlIE91dGxhdyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsZSBPdXRsYXciOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQ5Ljg5MDYyNSwgNTUuNjg2MzU1NTkwODIwMzEsIC0gMTc5LjkxMzYwNDczNjMyODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MTYyLjgxOTMzNTkzNzUsIDExLjY4NjMzNzQ3MTAwODMsIC0gOTYuNDU0ODE4NzI1NTg1OTQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQ3NSkgb3IgKHYxOTcgPD0gMjQ5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGFuZCBCb3kiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xhbmQgQm95IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xhbmQgQm95IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0OS44OTA2MjUsIDU1LjY4NjM1NTU5MDgyMDMxLCAtIDE3OS45MTM2MDQ3MzYzMjgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjM1Ny4zMTI1LCAyMC42MzI4MjIwMzY3NDMxNjQsIDEwMDUuNjQ4OTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUwMCkgb3IgKHYxOTcgPD0gMjUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlN1bi1raXNzZWQgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN1bi1raXNzZWQgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3VuLWtpc3NlZCBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0MS4wMjE0ODQzNzUsIDU0Ljc3MDgxMjk4ODI4MTI1LCAxMDUxLjQ2MTE4MTY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjM1Ny4zMTI1LCAyMC42MzI4MjIwMzY3NDMxNjQsIDEwMDUuNjQ4OTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUyNSkgb3IgKHYxOTcgPD0gMjU0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGUgQ2hhbXBpb24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJc2xlIENoYW1waW9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xlIENoYW1waW9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0MS4wMjE0ODQzNzUsIDU0Ljc3MDgxMjk4ODI4MTI1LCAxMDUxLjQ2MTE4MTY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjg0OC45NDE0MDYyNSwgMjEuNjg2MzM0NjA5OTg1MzUsIDEwNDEuNDQ5MDk2Njc5Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTUwKSBvciAodjE5NyA8PSAyNTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2VycGVudCBIdW50ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTZXJwZW50IEh1bnRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2VycGVudCBIdW50ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NjY1LjE5MTQwNjI1LCAxMDQuNTk2NDA1MDI5Mjk2ODgsIDE1NzkuNjk0MzM1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjYyMS40MTQwNjI1LCAxMjEuNDA2MzExMDM1MTU2MjUsIDEyOTAuNjg4MTEwMzUxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTc1KSBvciAodjE5NyA8PSAyNTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2t1bGwgU2xheWVyIikgb3IgKHYxOTcgPT0gMjYwMCkpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2t1bGwgU2xheWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTa3VsbCBTbGF5ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NjY1LjE5MTQwNjI1LCAxMDQuNTk2NDA1MDI5Mjk2ODgsIDE1NzkuNjk0MzM1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjgxMS41NzAzMTI1LCA4NC42MjUyNDQxNDA2MjUsIDE1NDIuMjM1MTA3NDIxODc1KTsKICAgICAgICBlbmQKICAgIGVuZAplbmQKaWYgU2VhMSB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiQmFuZGl0IiwKICAgICAgICAiTW9ua2V5IiwKICAgICAgICAiR29yaWxsYSIsCiAgICAgICAgIlBpcmF0ZSIsCiAgICAgICAgIkJydXRlIiwKICAgICAgICAiRGVzZXJ0IEJhbmRpdCIsCiAgICAgICAgIkRlc2VydCBPZmZpY2VyIiwKICAgICAgICAiU25vdyBCYW5kaXQiLAogICAgICAgICJTbm93bWFuIiwKICAgICAgICAiQ2hpZWYgUGV0dHkgT2ZmaWNlciIsCiAgICAgICAgIlNreSBCYW5kaXQiLAogICAgICAgICJEYXJrIE1hc3RlciIsCiAgICAgICAgIlByaXNvbmVyIiwKICAgICAgICAiRGFuZ2Vyb3VzIFByaXNvbmVyIiwKICAgICAgICAiVG9nYSBXYXJyaW9yIiwKICAgICAgICAiR2xhZGlhdG9yIiwKICAgICAgICAiTWlsaXRhcnkgU29sZGllciIsCiAgICAgICAgIk1pbGl0YXJ5IFNweSIsCiAgICAgICAgIkZpc2htYW4gV2FycmlvciIsCiAgICAgICAgIkZpc2htYW4gQ29tbWFuZG8iLAogICAgICAgICJHb2QncyBHdWFyZCIsCiAgICAgICAgIlNoYW5kYSIsCiAgICAgICAgIlJveWFsIFNxdWFkIiwKICAgICAgICAiUm95YWwgU29sZGllciIsCiAgICAgICAgIkdhbGxleSBQaXJhdGUiLAogICAgICAgICJHYWxsZXkgQ2FwdGFpbiIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJSYWlkZXIiLAogICAgICAgICJNZXJjZW5hcnkiLAogICAgICAgICJTd2FuIFBpcmF0ZSIsCiAgICAgICAgIkZhY3RvcnkgU3RhZmYiLAogICAgICAgICJNYXJpbmUgTGlldXRlbmFudCIsCiAgICAgICAgIk1hcmluZSBDYXB0YWluIiwKICAgICAgICAiWm9tYmllIiwKICAgICAgICAiVmFtcGlyZSIsCiAgICAgICAgIlNub3cgVHJvb3BlciIsCiAgICAgICAgIldpbnRlciBXYXJyaW9yIiwKICAgICAgICAiTGFiIFN1Ym9yZGluYXRlIiwKICAgICAgICAiSG9ybmVkIFdhcnJpb3IiLAogICAgICAgICJNYWdtYSBOaW5qYSIsCiAgICAgICAgIkxhdmEgUGlyYXRlIiwKICAgICAgICAiU2hpcCBEZWNraGFuZCIsCiAgICAgICAgIlNoaXAgRW5naW5lZXIiLAogICAgICAgICJTaGlwIFN0ZXdhcmQiLAogICAgICAgICJTaGlwIE9mZmljZXIiLAogICAgICAgICJBcmN0aWMgV2FycmlvciIsCiAgICAgICAgIlNub3cgTHVya2VyIiwKICAgICAgICAiU2VhIFNvbGRpZXIiLAogICAgICAgICJXYXRlciBGaWdodGVyIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIlBpcmF0ZSBNaWxsaW9uYWlyZSIsCiAgICAgICAgIkRyYWdvbiBDcmV3IFdhcnJpb3IiLAogICAgICAgICJEcmFnb24gQ3JldyBBcmNoZXIiLAogICAgICAgICJIeWRyYSBFbmZvcmNlciIsCiAgICAgICAgIlZlbm9tb3VzIEFzc2FpbGFudCIsCiAgICAgICAgIk1hcmluZSBDb21tb2RvcmUiLAogICAgICAgICJNYXJpbmUgUmVhciBBZG1pcmFsIiwKICAgICAgICAiRmlzaG1hbiBSYWlkZXIiLAogICAgICAgICJGaXNobWFuIENhcHRhaW4iLAogICAgICAgICJGb3Jlc3QgUGlyYXRlIiwKICAgICAgICAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIsCiAgICAgICAgIkp1bmdsZSBQaXJhdGUiLAogICAgICAgICJNdXNrZXRlZXIgUGlyYXRlIiwKICAgICAgICAiUmVib3JuIFNrZWxldG9uIiwKICAgICAgICAiTGl2aW5nIFpvbWJpZSIsCiAgICAgICAgIkRlbW9uaWMgU291bCIsCiAgICAgICAgIlBvc2Vzc2VkIE11bW15IiwKICAgICAgICAiUGVhbnV0IFNjb3V0IiwKICAgICAgICAiUGVhbnV0IFByZXNpZGVudCIsCiAgICAgICAgIkljZSBDcmVhbSBDaGVmIiwKICAgICAgICAiSWNlIENyZWFtIENvbW1hbmRlciIsCiAgICAgICAgIkNvb2tpZSBDcmFmdGVyIiwKICAgICAgICAiQ2FrZSBHdWFyZCIsCiAgICAgICAgIkJha2luZyBTdGFmZiIsCiAgICAgICAgIkhlYWQgQmFrZXIiLAogICAgICAgICJDb2NvYSBXYXJyaW9yIiwKICAgICAgICAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIiwKICAgICAgICAiU3dlZXQgVGhpZWYiLAogICAgICAgICJDYW5keSBSZWJlbCIsCiAgICAgICAgIkNhbmR5IFBpcmF0ZSIsCiAgICAgICAgIlNub3cgRGVtb24iLAogICAgICAgICJJc2xlIE91dGxhdyIsCiAgICAgICAgIklzbGFuZCBCb3kiLAogICAgICAgICJTdW4ta2lzc2VkIFdhcnJpb3IiLAogICAgICAgICJJc2xlIENoYW1waW9uIiwKICAgICAgICAiU2VycGVudCBIdW50ZXIiLAogICAgICAgICJTa3VsbCBTbGF5ZXIiCiAgICB9OwplbmQKaWYgU2VhMSB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiSnVuZ2xlIiwKICAgICAgICAiQnVnZ3kiLAogICAgICAgICJEZXNlcnQiLAogICAgICAgICJTbm93IiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiU2t5IiwKICAgICAgICAiUHJpc29uIiwKICAgICAgICAiQ29sb3NzZXVtIiwKICAgICAgICAiTWFnbWEiLAogICAgICAgICJGaXNobWFuIiwKICAgICAgICAiU2t5IElzbGFuZCIsCiAgICAgICAgIkZvdW50YWluIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIkFyZWEgMSIsCiAgICAgICAgIkFyZWEgMiIsCiAgICAgICAgIlpvbWJpZSIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIlNub3cgTW91bnRhaW4iLAogICAgICAgICJJY2UgZmlyZSIsCiAgICAgICAgIlNoaXAiLAogICAgICAgICJGcm9zdCIsCiAgICAgICAgIkZvcmdvdHRlbiIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJQaXJhdGUgUG9ydCIsCiAgICAgICAgIkFtYXpvbiIsCiAgICAgICAgIk1hcmluZSBUcmVlIiwKICAgICAgICAiRGVlcCBGb3Jlc3QiLAogICAgICAgICJIYXVudGVkIENhc3RsZSIsCiAgICAgICAgIk51dCBJc2xhbmQiLAogICAgICAgICJJY2UgQ3JlYW0gSXNsYW5kIiwKICAgICAgICAiQ2FrZSBJc2xhbmQiLAogICAgICAgICJDaG9jbyBJc2xhbmQiLAogICAgICAgICJDYW5keSBJc2xhbmQiLAogICAgICAgICJUaWtpIE91dHBvc3QiCiAgICB9OwplbmQKZnVuY3Rpb24gQ2hlY2tCb3NzUXVlc3QoKQogICAgaWYgU2VhMSB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIlRoZSBHb3JpbGxhIEtpbmciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGhlIEdvcmlsbGEgS2luZyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRoZSBHb3JyaWxhIEtpbmciOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyLDAwMFxuNywwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTA4OC43NTk3NywgOC4xMzQ2Mzc4MywgLSA0ODguNTU5OTA2LCAtIDAuNzA3MTM0MjQ3LCAwLCAwLjcwNzA3OTI5MSwgMCwgMSwgMCwgLSAwLjcwNzA3OTI5MSwgMCwgLSAwLjcwNzEzNDI0Nyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJCb2JieSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJCb2JieSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kOCwwMDBcbjM1LDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg3LjM3NjA5ODYzMjgsIDQ2Ljk0OTQwOTQ4NDg2MywgNDA0MC4xNDYyNDAyMzQ0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGhlIFNhdyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRoZSBTYXciOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NC44OTcxNTU3NjE3MiwgNzIuNDI3MzgzNDIyODUyLCAxNjAzLjU4MjI3NTM5MDYpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiWWV0aSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJZZXRpIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiWWV0aSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjE4MCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjE4Ljc5NTY1NDI5NjksIDEzOC4wMTE4NDA4MjAzMSwgLSAxNDg4LjAyNjI0NTExNzIpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJNb2IgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTW9iIExlYWRlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMjg0NC43MzA3MTI4OTA2LCA3LjQxODA1MDI4OTE1NDEsIDUzNTYuNjcyMzYzMjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJWaWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDI7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTAzNi4yNDY1ODIwMzEzLCAyOC42Nzc4MzU0NjQ0NzgsIDQzMjQuNTY2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUwMDYuNTQ1NDEwMTU2MywgODguMDMyMDgxNjA0MDA0LCA0MzUzLjE2MjEwOTM3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTYWJlciBFeHBlcnQiKSB0aGVuCiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNhYmVyIEV4cGVydCI7CiAgICAgICAgICAgIEJvc3NNb24gPSAiU2FiZXIgRXhwZXJ0IjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxNDU4Ljg5NTAyLCAyOS44ODcwMzM1LCAtIDUwLjYzMzU2NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAxOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ2LDAwMFxuODUwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI3OC4wNDkzMiwgMi4xNTE2NzQ3NSwgOTQ0LjEwMTkyOSwgMC4yMjA1NDY5NjEsIC0gMC4wMDAwMDQ0OTk0NjQsIDAuOTc1Mzc2NDI3LCAtIDAuMDAwMDE5NTQxMjU4LCAxLCAwLjAwMDAwOTAzMTYyMSwgLSAwLjk3NTM3NjQyNywgLSAwLjAwMDAyMTA1MTk3NiwgMC4yMjA1NDY5NjEpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMjsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyMDYuOTI1NzgsIDAuOTk3NzUzMzgyLCA4MTQuOTc2NzQ2LCAwLjM0MjA0MTM0MywgLSAwLjAwMDYyOTE1Njc3LCAwLjkzOTY4NDc0OSwgMC4wMDE5MTY0NTM5NCwgMC45OTk5OTgxNTIsIC0gMC4wMDAwMjgwNDIyMzQsIC0gMC45Mzk2ODI5NjEsIDAuMDAxODEwNDU0MDYsIDAuMzQyMDQxOTM5KTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlN3YW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN3YW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMSw2MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MzI1LjA5NjE5LCA3LjAzOTA2NTg0LCA3MTkuNTcwNjc5LCAtIDAuMzA5MDYwODEyLCAwLCAwLjk1MTA0MjIzNSwgMCwgMSwgMCwgLSAwLjk1MTA0MjIzNSwgMCwgLSAwLjMwOTA2MDgxMik7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJNYWdtYSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk1hZ21hIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJNYWdtYSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjIsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTMxNC42MjIwNzAzMTI1LCAxMi4yNjI0MjA2NTQyOTcsIDg1MTcuMjc5Mjk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1NzY1Ljg5Njk3MjY1NjMsIDgyLjkyMDY0NjY2NzQ4LCA4NzE4LjMwNDY4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmlzaG1hbiBMb3JkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjQsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYxMjYwLjE1MjM0Mzc1LCAzMC45NTA4ODE5NTgwMDgsIDExOTMuNDMyOTgzMzk4NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXeXNwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA3ODYxLjk0NzI2NTYyNSwgNTU0NS41MTc1NzgxMjUsIC0gMzc5Ljg1OTc0MTIxMDk0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA3ODY2LjEzMzMwMDc4MTMsIDU1NzYuNDMxMTUyMzQzOCwgLSA1NDYuNzQ4MTY4OTQ1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGh1bmRlciBHb2QiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaHVuZGVyIEdvZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjUsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc5OTQuOTg0Mzc1LCA1NzYxLjAyNTM5MDYyNSwgLSAyMDg4LjY0Nzk0OTIxODgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG43LDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2MDk0LjAyNDkwMjM0MzgsIDczLjc3MDA1MDA0ODgyOCwgMzgyNS43MzQ4NjMyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjY2LjA4OTQ4LCAyNi4xNzU3OTQ2LCAtIDEzOTkuNTc2NzgsIC0gMC41NzM1OTkyMTksIDAsIC0gMC44MTkxMzY1NiwgMCwgMSwgMCwgMC44MTkxMzY1NiwgMCwgLSAwLjU3MzU5OTIxOSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJHcmV5YmVhcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1MDgxLjM0NTIxNDg0MzgsIDg1LjIyMTY0MTU0MDUyNywgNDI1Ny4zNTg4ODY3MTg4KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMiB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIkRpYW1vbmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRGlhbW9uZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRpYW1vbmQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuOSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA0MjcuNTY2NjgwOTA4MiwgNzMuMzEzNzgxNzM4MjgxLCAxODM1LjQyMDg5ODQzNzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDE1NzYuNzE2Njc0ODA0NywgMTk4LjU5MjY1MTM2NzE5LCAxMy43MjQyODYwNzk0MDcpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSmVyZW15IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG4xMSw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNjM2Ljc5OTQzODQ3NjU2LCA3My40MTM3ODc4NDE3OTcsIDkxOC4wMDQxNTAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDIwMDYuOTI2MTQ3NDYwOSwgNDQ4Ljk1NjY2NTAzOTA2LCA4NTMuOTgyODQ5MTIxMDkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmFqaXRhIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjE1LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDI0NDEuOTg2MzI4MTI1LCA3My4zNTkzNDQ0ODI0MjIsIC0gMzIxNy41MzI0NzA3MDMxKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAyMTcyLjczOTk5MDIzNDQsIDEwMy4zMjIxNjY0NDI4NywgLSA0MDE1LjAyNTM5MDYyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJEb24gU3dhbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEb24gU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRvbiBTd2FuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjI4Ni4yMDA0Mzk0NTMxLCAxNS4xNzc4MzkyNzkxNzUsIDg2My44Mzg4NjcxODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNtb2tlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU21va2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNtb2tlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG4yNSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUyNzUuMTk4NzMwNDY4OCwgMjAuNzU3MjU3NDYxNTQ4LCAtIDUyNjAuNjY2OTkyMTg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGcm9zdFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjM2LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1NjY4Ljk3ODAyNzM0MzgsIDI4LjUxOTk4OTAxMzY3MiwgLSA2NDgzLjM1MjA1MDc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2NDAzLjU0Mzk0NTMxMjUsIDM0MC4yOTc2Njg0NTcwMywgLSA2ODk0LjU1OTU3MDMxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGlkZSBLZWVwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGlkZSBLZWVwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaWRlIEtlZXBlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEyLDUwMFxuMzgsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMzA1My45ODE0NDUzMTI1LCAyMzcuMTg5NTQ0Njc3NzMsIC0gMTAxNDUuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMzc5NS42NDIzMzM5ODQ0LCAxMDUuODg4NzcxMDU3MTMsIC0gMTE0MjEuMzA3NjE3MTg4KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkRhcmtiZWFyZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDM2NzcuMDgyMDMxMjUsIDYyLjc1MTkzNzg2NjIxMSwgLSAzMTQ0LjgzMzI1MTk1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3Vyc2VkIENhcHRhaW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ3Vyc2VkIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDdXJzZWQgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDkxNi45Mjg1ODksIDE4MS4wOTI3NzMsIDMzNDIyKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk9yZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk9yZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiT3JkZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDYyMTcuMjAyMTQ4NDM3NSwgMjguMDQ3NjQ1NTY4ODQ4LCAtIDUwNTMuMTM1NzQyMTg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTMgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTdG9uZSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN0b25lIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuNDAsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMjg5Ljc2NzA1OTMyNjE3LCA0My44MTkwMTE2ODgyMzIsIDU1NzkuOTM4NDc2NTYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTAyNy42NTEyNDUxMTcyLCA5Mi40MDQxNzQ4MDQ2ODgsIDY1NzguODUzMDI3MzQzOCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSHlkcmEgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSHlkcmEgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzAsMDAwXG41MiwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTQ0NS45NTQxMDE1NjI1LCA2MDEuNjI5NDU1NTY2NDEsIDc1MS40Mzc5MjcyNDYwOSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDU1NDMuODYzMjgxMjUsIDY2OC45NzM5OTkwMjM0NCwgMTk5LjAzNDE3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIktpbG8gQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIktpbG8gQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzUsMDAwXG41NiwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoMjE3OS4zMDEwMjUzOTA2LCAyOC43MzEyMzkzMTg4NDgsIC0gNjczOS45NzQxMjEwOTM4KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjc2NC4yMjMzODg2NzE5LCA0MzIuNDYxNTQ3ODUxNTYsIC0gNzE0NC40NTgwMDc4MTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2FwdGFpbiBFbGVwaGFudCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNhcHRhaW4gRWxlcGhhbnQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkRlZXBGb3Jlc3RJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDQwLDAwMFxuNjcsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjgyNjE3MTg4LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi4wMTE3MTg3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTMzNzYuNzU3ODEyNSwgNDMzLjI4Njg5NTc1MTk1LCAtIDgwNzEuMzkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQmVhdXRpZnVsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkJlYXV0aWZ1bCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ1MCwwMDBcbjcwLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyODMuNjA5Mzc1LCAyMi41NjIyMzQ4Nzg1NCwgLSAxMTAuNzgyODUyMTcyODUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDYWtlIFF1ZWVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2FrZSBRdWVlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMzAsMDAwXG4xMTIsNTAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNjc4LjY0ODgwNCwgMzgxLjM1Mzk0MywgLSAxMTExNC4yMDEyLCAtIDAuOTA4NjQxODE1LCAwLjAwMTQ5Mjk0MzM4LCAwLjQxNzU3Mzc4LCAwLjAwODM3MTE0OTE5LCAwLjk5OTg1Nzg0MywgMC4wMTQ2NDA4OTI5LCAtIDAuNDE3NDkyNTY4LCAwLjAxNjc5ODg5ODYsIC0gMC45MDg1MjQ5OSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJMb25nbWEiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiTG9uZ21hIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTG9uZ21hIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDIzOC44NzU5NzY1NjMsIDM4OS43OTEyOTAyODMyLCAtIDk1NDkuNzkzOTQ1MzEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTb3VsIFJlYXBlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNvdWwgUmVhcGVyIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA5NTI0Ljc4OTA2MjUsIDMxNS44MDQyOTA3NzE0OCwgNjY1NS43MTkyMzgyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gInJpcF9pbmRyYSBUcnVlIEZvcm0iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAicmlwX2luZHJhIFRydWUgRm9ybSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gInJpcF9pbmRyYSBUcnVlIEZvcm0iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDU0MTUuMzkyMDg5ODQzOCwgNTA1Ljc0MTMzMzAwNzgxLCAtIDI4MTQuMDE2NjAxNTYyNSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmZ1bmN0aW9uIE1hdGVyaWFsTW9uKCkKICAgIGlmIChTZWxlY3RNYXRlcmlhbCA9PSAiUmFkaW9hY3RpdmUgTWF0ZXJpYWwiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJGYWN0b3J5IFN0YWZmIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygyOTUsIDczLCAtIDU2KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk15c3RpYyBEcm9wbGV0IikgdGhlbgogICAgICAgIE1Nb24gPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAzMzg1LCAyMzksIC0gMTA1NDIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTWFnbWEgT3JlIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNTgxNSwgODQsIDg4MjApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDU0MjgsIDc4LCAtIDU5NTkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkFuZ2VsIFdpbmdzIikgdGhlbgogICAgICAgIE1Nb24gPSAiR29kJ3MgR3VhcmQiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNDY5OCwgODQ1LCAtIDE5MTIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSA3ODU5LjA5ODE0LCA1NTQ0LjE5MDQzLCAtIDM4MS40NzYxOTYpKS5NYWduaXR1ZGUgPj0gNTAwMCkgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0gMzgxLjQ3NjE5NikpOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTGVhdGhlciIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE0NSwgMTUsIDQzNTApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDIwMTAuNTA1OTgxNDQ1MzEyNSwgNzMuMDAxMTU5NjY3OTY4NzUsIC0gMzMyNi42MjA4NDk2MDkzNzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE5NzUuNzg1MTU2MjUsIDMzMS43NzM0MDY5ODI0MjE5LCAtIDEwNjIwLjAzMDI3MzQzNzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlNjcmFwIE1ldGFsIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTQ1LCAxNSwgNDM1MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDg3OCwgMTIyLCAxMjM1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDEyMTA3LCAzMzIsIC0gMTA1NDkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkZpc2ggVGFpbCIpIHRoZW4KICAgICAgICBpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTA5OTMsIDMzMiwgLSA4OTQwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDYxMTIzLCAxOSwgMTU2OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDUuMzQyMzQyMzc2NzA4OTg0LCAxODE5Ljc4NDE3OTY4NzUpKS5NYWduaXR1ZGUgPj0gMTcwMDApIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDUuMzQyMzQyMzc2NzA4OTg0LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJEZW1vbmljIFdpc3AiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gOTUwNywgMTcyLCA2MTU4KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlZhbXBpcmUgRmFuZyIpIHRoZW4KICAgICAgICBNTW9uID0gIlZhbXBpcmUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNjAzMywgNywgLSAxMzE3KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkNvbmp1cmVkIENvY29hIikgdGhlbgogICAgICAgIE1Nb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MjAuNjM0NDYwNDQ5MjE4OCwgNzguOTM2NDQ3MTQzNTU0NjksIC0gMTI1ODEuMzY5MTQwNjI1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkRyYWdvbiBTY2FsZSIpIHRoZW4KICAgICAgICBNTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjgyNy45MTQ1NTA3ODEyNSwgNjA5LjQxMjcxOTcyNjU2MjUsIDI1Mi4zNTM4MDU1NDE5OTIyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkd1bnBvd2RlciIpIHRoZW4KICAgICAgICBNTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA0NjksIDc0LCA1OTA0KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkh5ZHJhIEVuZm9yY2VyIikgdGhlbgogICAgICAgIE1Nb24gPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDQ1ODEuNTE3NTc4MTI1LCAxMDAxLjU1OTA4MjAzMTI1LCA3MDQuOTM3ODY2MjEwOTM3NSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJWZW5vbW91cyBBc3NhaWxhbnQiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDQ4NzkuOTIwNDEwMTU2MjUsIDEwODkuNDYxNDI1NzgxMjUsIDExMDQuMDA4MzAwNzgxMjUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTWluaSBUdXNrIikgdGhlbgogICAgICAgIE1Nb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlSXNsYW5kRVNQKCkKICAgIGZvciB2NDI1LCB2NDI2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDI2Lk5hbWUgfj0gIlNlYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMzAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MjYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkFkb3JuZWUgPSB2NDI2OwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTM2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTEzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkZvbnQgPSAiR290aGFtQm9sZCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MjZbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0MjYuTmFtZSAuLiAiICAgXG4iIC4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIGlzbmlsKHYxOTgpCiAgICByZXR1cm4gdjE5OCA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYxOTkpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MTk5KSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlUGxheWVyQ2hhbXMoKQogICAgZm9yIHY0MjcsIHY0MjggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBpc25pbCh2NDI4LkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGlzbmlsKHY0MjguQ2hhcmFjdGVyLkhlYWQpIGFuZCBub3QgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE0NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQyOC5DaGFyYWN0ZXIuSGVhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5BZG9ybmVlID0gdjQyOC5DaGFyYWN0ZXIuSGVhZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE1MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExNDYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5Gb250U2l6ZSA9ICJTaXplMTAiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHQgPSB2NDI4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjguQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDI4LlRlYW0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlRlYW0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDI1NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQyOC5DaGFyYWN0ZXIuSGVhZFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDI4Lk5hbWUgLi4gIiB8ICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjguQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2VcbkhlYWx0aCA6ICIgLi4gdjIwKCh2NDI4LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMDApIC8gdjQyOC5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAiJSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKQogICAgZm9yIHY0MjksIHY0MzAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuQWRvcm5lZSA9IHY0MzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ4MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE0NzUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAxIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAzIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0MzBbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzMC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpCiAgICBmb3IgdjQzMSwgdjQzMiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDMyLk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE2NCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuQWRvcm5lZSA9IHY0MzIuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTcxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE2NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dCA9IHY0MzIuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkKICAgIGZvciB2NDMzLCB2NDM0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIG9yICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjEiKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzNDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTgzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkFkb3JuZWUgPSB2NDM0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTg5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE4Myk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzNC5OYW1lID09ICJGbG93ZXIxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dCA9ICJCbHVlIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHQgPSAiUmVkIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpCiAgICBmb3IgdjQzNSwgdjQzNiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDM2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwNyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzNi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5MDcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5MDcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MDcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFkb3JuZWUgPSB2NDM2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTE0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTA3KTsKICAgICAgICAgICAgICAgICAgICB2OTE0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5MTQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHQgPSB2NDM2Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQzNi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNi5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0MzcsIHY0MzggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0Mzg6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTI2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM4LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWRvcm5lZSA9IHY0MzguSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5MjYpOwogICAgICAgICAgICAgICAgICAgIHY5MzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTMzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTMzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0ID0gdjQzOC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzguTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDM5LCB2NDQwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDQwOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk0NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0MC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5NDUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5NDUuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NDUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFkb3JuZWUgPSB2NDQwLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTUyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTQ1KTsKICAgICAgICAgICAgICAgICAgICB2OTUyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5NTIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dCA9IHY0NDAuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0MC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQwLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQwLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKQogICAgZm9yIHY0NDEsIHY0NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NDIuTmFtZSB+PSAiU2VhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIwMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuQWRvcm5lZSA9IHY0NDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMDYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udCA9ICJHb3RoYW1Cb2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDJbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQyLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBpc25pbCh2MjAwKQogICAgcmV0dXJuIHYyMDAgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MjAxKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjIwMSkgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKICAgIGZvciB2NDQzLCB2NDQ0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgaXNuaWwodjQ0NC5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBpc25pbCh2NDQ0LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMTYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDQuQ2hhcmFjdGVyLkhlYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuQWRvcm5lZSA9IHY0NDQuQ2hhcmFjdGVyLkhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMjMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0NC5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDQuQ2hhcmFjdGVyLkhlYWRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgfCAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlXG5IZWFsdGggOiAiIC4uIHYyMCgodjQ0NC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTAwKSAvIHY0NDQuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCkgLi4gIiUiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVDaGVzdENoYW1zKCkKICAgIGZvciB2NDQ1LCB2NDQ2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0OTcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LkFkb3JuZWUgPSB2NDQ2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1MDMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxNDk3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMSIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzMsIDE1OCwgMjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMiIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMyIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDQ2WyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDYuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZURldmlsQ2hhbXMoKQogICAgZm9yIHY0NDcsIHY0NDggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQ0OC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMzQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDguSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkFkb3JuZWUgPSB2NDQ4LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI0MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMzQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDQ4LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0OC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVGbG93ZXJDaGFtcygpCiAgICBmb3IgdjQ0OSwgdjQ1MCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKCh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSBvciAodjQ1MC5OYW1lID09ICJGbG93ZXIxIikpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NTA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5BZG9ybmVlID0gdjQ1MDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1OSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyNTMpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHQgPSAiQmx1ZSBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0ID0gIlJlZCBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDUwWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlUmVhbEZydWl0Q2hhbXMoKQogICAgZm9yIHY0NTEsIHY0NTIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1MjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NjQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTIuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTY0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTY0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BZG9ybmVlID0gdjQ1Mi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk3MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjk2NCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5NzEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5NzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0ID0gdjQ1Mi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTIuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDUzLCB2NDU0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDU0OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk4MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1NC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5ODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5ODMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5ODMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFkb3JuZWUgPSB2NDU0LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTkwID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTgzKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5OTAuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dCA9IHY0NTQuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1NC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU0Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU0LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ1NSwgdjQ1NiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1NjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Ni5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDAyID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU2LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkFkb3JuZWUgPSB2NDU2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMDkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDAyKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dCA9IHY0NTYuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Ni5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU2Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1vYkVTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgyMiwgdjgyMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODIzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyMzpGaW5kRmlyc3RDaGlsZCgiTW9iRWFwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuUGFyZW50ID0gdjgyMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLk5hbWUgPSAiTW9iRWFwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5QYXJlbnQgPSB2MTM3MjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDIxID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgyMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODIzLk1vYkVhcC5UZXh0TGFiZWwuVGV4dCA9IHY4MjMuTmFtZSAuLiAiLSIgLi4gdjEwMjEgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI0LCB2ODI1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MjU6RmluZEZpcnN0Q2hpbGQoIk1vYkVhcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyNS5Nb2JFYXA6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBTZWFFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MjYsIHY4MjcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyNzpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkxID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlBhcmVudCA9IHY4Mjc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5OYW1lID0gIlNlYWVzcHMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlBhcmVudCA9IHYxMzkxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODI3Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjcuU2VhZXNwcy5UZXh0TGFiZWwuVGV4dCA9IHY4MjcuTmFtZSAuLiAiLSIgLi4gdjEwMjMgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI4LCB2ODI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyOTpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyOS5TZWFlc3BzOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTnBjRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODMwLCB2ODMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODMxOkZpbmRGaXJzdENoaWxkKCJOcGNFc3BlcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDEwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlBhcmVudCA9IHY4MzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5OYW1lID0gIk5wY0VzcGVzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5QYXJlbnQgPSB2MTQxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDI1ID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODMxLk5wY0VzcGVzLlRleHRMYWJlbC5UZXh0ID0gdjgzMS5OYW1lIC4uICItIiAuLiB2MTAyNSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MzIsIHY4MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzMzpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzMuTnBjRXNwZXM6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gaXNuaWwodjIwMikKICAgIHJldHVybiB2MjAyID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjIwMykKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYyMDMpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVJc2xhbmRNaXJhZ2VFU1AoKQogICAgZm9yIHY0NTcsIHY0NTggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNaXJhZ2VJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NTguTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNzAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTgpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkFkb3JuZWUgPSB2NDU4OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjc2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI3MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ1OFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ1OC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTguUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQXVyYUVTUCgpCiAgICBmb3IgdjQ1OSwgdjQ2MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEF1cmFFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjAuTmFtZSA9PSAiTWFzdGVyIG9mIEVuaGFuY2VtZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI4NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuQWRvcm5lZSA9IHY0NjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjg2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDYwWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDYwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVMU0RFU1AoKQogICAgZm9yIHY0NjEsIHY0NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBMQURFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjIuTmFtZSA9PSAiTGVnZW5kYXJ5IFN3b3JkIERlYWxlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMDIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkFkb3JuZWUgPSB2NDYyOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzA4ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMwMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2MlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2Mi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjIuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlR2VhRVNQKCkKICAgIGZvciB2NDYzLCB2NDY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgR2VhckVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2NC5OYW1lID09ICJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMTggPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkFkb3JuZWUgPSB2NDY0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzI0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2NC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVHdlZW4yKHYyMDQpCiAgICBsb2NhbCB2MjA1ID0gKHYyMDQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgIGxvY2FsIHYyMDYgPSAzNTA7CiAgICBpZiAodjIwNSA+PSAzNTApIHRoZW4KICAgICAgICB2MjA2ID0gMzUwOwogICAgZW5kCiAgICBsb2NhbCB2MjA3ID0gVHdlZW5JbmZvLm5ldyh2MjA1IC8gdjIwNiwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpOwogICAgbG9jYWwgdjIwOCA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjIwNywgewogICAgICAgIENGcmFtZSA9IHYyMDQKICAgIH0pOwogICAgdjIwODpQbGF5KCk7CiAgICBpZiBfRy5DYW5jZWxUd2VlbjIgdGhlbgogICAgICAgIHYyMDg6Q2FuY2VsKCk7CiAgICBlbmQKICAgIF9HLkNsaXAyID0gdHJ1ZTsKICAgIHdhaXQodjIwNSAvIHYyMDYpOwogICAgX0cuQ2xpcDIgPSBmYWxzZTsKZW5kCmZ1bmN0aW9uIEJUUFoodjIwOSkKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjA5OwogICAgdGFzay53YWl0KCk7CiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIwOTsKZW5kClR3ZWVuU3BlZWQgPSAzNTA7CmZ1bmN0aW9uIFR3ZWVuKHYyMTEpCiAgICBsb2NhbCB2MjEyID0gKHYyMTEuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgIGxvY2FsIHYyMTMgPSBUd2VlblNwZWVkOwogICAgaWYgKHYyMTIgPj0gMzUwKSB0aGVuCiAgICAgICAgdjIxMyA9IFR3ZWVuU3BlZWQ7CiAgICBlbmQKICAgIGxvY2FsIHYyMTQgPSBUd2VlbkluZm8ubmV3KHYyMTIgLyB2MjEzLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcik7CiAgICBsb2NhbCB2MjE1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MjE0LCB7CiAgICAgICAgQ0ZyYW1lID0gdjIxMQogICAgfSk7CiAgICB2MjE1OlBsYXkoKTsKICAgIGlmIF9HLlN0b3BUd2VlbiB0aGVuCiAgICAgICAgdjIxNTpDYW5jZWwoKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gQ2FuY2VsVHdlZW4odjIxNikKICAgIGlmIG5vdCB2MjE2IHRoZW4KICAgICAgICBfRy5TdG9wVHdlZW4gPSB0cnVlOwogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgICAgICBfRy5TdG9wVHdlZW4gPSBmYWxzZTsKICAgIGVuZAplbmQKZnVuY3Rpb24gRXF1aXBUb29sKHYyMTcpCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodjIxNykgdGhlbgogICAgICAgIGxvY2FsIHY1NzAgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodjIxNyk7CiAgICAgICAgd2FpdCgpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHY1NzApOwogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2MjE4ID0gZ2V0cmF3bWV0YXRhYmxlKGdhbWUpOwogICAgbG9jYWwgdjIxOSA9IHYyMTguX19uYW1lY2FsbDsKICAgIHNldHJlYWRvbmx5KHYyMTgsIGZhbHNlKTsKICAgIHYyMTguX19uYW1lY2FsbCA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikKICAgICAgICBsb2NhbCB2NDY1ID0gZ2V0bmFtZWNhbGxtZXRob2QoKTsKICAgICAgICBsb2NhbCB2NDY2ID0gewogICAgICAgICAgICAuLi4KICAgICAgICB9OwogICAgICAgIGlmICh0b3N0cmluZyh2NDY1KSA9PSAiRmlyZVNlcnZlciIpIHRoZW4KICAgICAgICAgICAgaWYgKHRvc3RyaW5nKHY0NjZbMV0pID09ICJSZW1vdGVFdmVudCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICgodG9zdHJpbmcodjQ2NlsyXSkgfj0gInRydWUiKSBhbmQgKHRvc3RyaW5nKHY0NjZbMl0pIH49ICJmYWxzZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlU2tpbGwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSh2NDY2WzJdKSA9PSAidmVjdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NlsyXSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdDsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NlsyXSA9IENGcmFtZS5uZXcoUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2MjE5KHVucGFjayh2NDY2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIHYyMTkoLi4uKTsKICAgIGVuZCk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoX0cuQXV0b0V2b1JhY2Ugb3IgX0cuQ2FzdGxlUmFpZCBvciBfRy5Db2xsZWN0QXp1cmUgb3IgX0cuVHdlZW5Ub0tpdHN1bmUgb3IgX0cuR2hvc3RTaGlwIG9yIF9HLlNoaXAgb3IgX0cuQXV0b19Ib2x5X1RvcmNoIG9yIF9HLlRlbGVwb3J0UGx5IG9yIF9HLkF1dG9fU2VhMyBvciBfRy5BdXRvX1NlYTIgb3IgX0cuVHdlZW5mcnVpdCBvciBfRy5BdXRvRmlzaENyZXcgb3IgX0cuQXV0b19TYWJlciBvciBfRy5BdXRvU2hhcmsgb3IgX0cuQXV0b19XYXJkZW4gb3IgX0cuQXV0b19SYWluYm93SGFraSBvciBBdXRvRmFybVJhY2Ugb3IgX0cuQXV0b1F1ZXN0UmFjZSBvciBBdXRvX0xhdyBvciBBdXRvVHVzaGl0YSBvciBfRy5BdXRvSG9seVRvcmNoIG9yIF9HLkF1dG9UZXJyb3JzaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBfRy5BdXRvX011c2tldGVlckhhdCBvciBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgX0cuQXV0b05lYXIgb3IgX0cuQXV0b19Qb2xlVjEgb3IgX0cuQXV0b19CdWRkeSBvciBfRy5FY3RvcGxhc20gb3IgQXV0b0V2b1JhY2Ugb3IgQXV0b0JhcnRpbG8gb3IgX0cuQXV0b19DYW52YW5kZXIgb3IgX0cuQXV0b0xldmVsIG9yIF9HLkF1dG9fRHVhbEthdGFuYSBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBfRy5DbGlwMiBvciBfRy5BdXRvX1JlZ29rdSBvciBfRy5BdXRvQm9uZSBvciBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgX0cuQXV0b0Jvc3Mgb3IgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIEF1dG9IYWxsb3dTeWN0aGUgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQ2FrZVByaW5jZSBvciBfRy5BdXRvX1NrdWxsR3VpdGFyIG9yIF9HLkF1dG9GYXJtU3dhbiBvciBfRy5Eb3VnaEtpbmcgb3IgX0cuQXV0b0VsaXRlb3Igb3IgQXV0b05leHRJc2xhbmQgb3IgTXVza2V0ZWVyIG9yIF9HLkF1dG9NYXRlcmlhbCBvciBBdXRvRmFybVJhY2VRdWVzdCBvciBfRy5GYWN0b3J5IG9yIF9HLkF1dG9fU2F3IG9yIF9HLkF1dG9Gcm96ZW5EaW1lbnNpb24gb3IgX0cuQXV0b0tpbGxUcmlhbCBvciBfRy5BdXRvVXBncmFkZSBvciBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4ODcgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpOwogICAgICAgICAgICAgICAgICAgIHY4ODcuTmFtZSA9ICJCb2R5Q2xpcCI7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5QYXJlbnQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDsKICAgICAgICAgICAgICAgICAgICB2ODg3Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMTAwMDAwLCAxMDAwMDAsIDEwMDAwMCk7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5Q2xpcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKF9HLkF1dG9Fdm9SYWNlIG9yIF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgX0cuQXV0b19Ta3VsbEd1aXRhciBvciBfRy5DYXN0bGVSYWlkIG9yIF9HLkNvbGxlY3RBenVyZSBvciBfRy5Ud2VlblRvS2l0c3VuZSBvciBfRy5BdXRvX1NlYTMgb3IgX0cuQXV0b19TZWEyIG9yIF9HLkdob3N0U2hpcCBvciBfRy5TaGlwIG9yIF9HLkF1dG9fSG9seV9Ub3JjaCBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5Ud2VlbmZydWl0IG9yIF9HLkF1dG9fU2FiZXIgb3IgX0cuQXV0b19Qb2xlVjEgb3IgX0cuQXV0b19NdXNrZXRlZXJIYXQgb3IgX0cuQXV0b0Zpc2hDcmV3IG9yIF9HLkF1dG9TaGFyayBvciBBdXRvRmFybVJhY2Ugb3IgX0cuQXV0b1F1ZXN0UmFjZSBvciBfRy5BdXRvX1dhcmRlbiBvciBBdXRvX0xhdyBvciBfRy5BdXRvX0R1YWxLYXRhbmEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzIgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvX0J1ZGR5IG9yIF9HLkF1dG9UZXJyb3JzaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBBdXRvX1F1ZXN0X1lhbWFfMyBvciBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgQXV0b19RdWVzdF9ZYW1hXzIgb3IgQXV0b19RdWVzdF9ZYW1hXzEgb3IgX0cuQXV0b05lYXIgb3IgX0cuRWN0b3BsYXNtIG9yIEF1dG9Fdm9SYWNlIG9yIF9HLkF1dG9LaWxsVHJpYWwgb3IgQXV0b0JhcnRpbG8gb3IgX0cuQXV0b19SZWdva3Ugb3IgX0cuQXV0b0xldmVsIG9yIF9HLkNsaXAyIG9yIF9HLkF1dG9Cb25lIG9yIF9HLkF1dG9fQ2FudmFuZGVyIG9yIF9HLkF1dG9Cb25lTm9RdWVzdCBvciBfRy5BdXRvQm9zcyBvciBfRy5BdXRvX1NhdyBvciBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgQXV0b0hhbGxvd1N5Y3RoZSBvciBBdXRvVHVzaGl0YSBvciBfRy5DYWtlUHJpbmNlIG9yIF9HLkRvdWdoS2luZyBvciBfRy5BdXRvRmFybVN3YW4gb3IgX0cuQXV0b0VsaXRlb3Igb3IgQXV0b05leHRJc2xhbmQgb3IgTXVza2V0ZWVyIG9yIF9HLkF1dG9NYXRlcmlhbCBvciBfRy5GYWN0b3J5IG9yIF9HLkF1dG9Gcm96ZW5EaW1lbnNpb24gb3IgQXV0b0Zhcm1SYWNlUXVlc3Qgb3IgX0cuQXV0b1VwZ3JhZGUgb3IgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzQsIHY4MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzNTpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODM1LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kKTsKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTdHVuIikgdGhlbgogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuU3R1bi5DaGFuZ2VkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTdHVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuU3R1bi5WYWx1ZSA9IDA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmZ1bmN0aW9uIENoZWNrTWF0ZXJpYWwodjIyMSkKICAgIGZvciB2NDY3LCB2NDY4IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdldEludmVudG9yeSIpKSBkbwogICAgICAgIGlmICh0eXBlKHY0NjgpID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgaWYgKHY0NjguVHlwZSA9PSAiTWF0ZXJpYWwiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2OC5OYW1lID09IHYyMjEpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjQ2OC5Db3VudDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIDA7CmVuZApmdW5jdGlvbiBHZXRXZWFwb25JbnZlbnRvcnkodjIyMikKICAgIGZvciB2NDY5LCB2NDcwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdldEludmVudG9yeSIpKSBkbwogICAgICAgIGlmICh0eXBlKHY0NzApID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgaWYgKHY0NzAuVHlwZSA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ3MC5OYW1lID09IHYyMjIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlOwplbmQKbG9jYWwgdjIxID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwpmdW5jdGlvbiBGaW5kRW5lbWllc0luUmFuZ2UodjIyMywgdjIyNCkKICAgIGxvY2FsIHYyMjUgPSAodjIxLkNoYXJhY3RlciBvciB2MjEuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpKTpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgbG9jYWwgdjIyNiA9IG5pbDsKICAgIGZvciB2NDcxLCB2NDcyIGluIGlwYWlycyh2MjI0KSBkbwogICAgICAgIGlmIChub3QgdjQ3MjpHZXRBdHRyaWJ1dGUoIklzQm9hdCIpIGFuZCB2NDcyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBhbmQgKHY0NzIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MSA9IHY0NzI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKTsKICAgICAgICAgICAgaWYgKHY2NzEgYW5kICgodjIyNSAtIHY2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA2MCkpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDcyIH49IHYyMS5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjIyMywgewogICAgICAgICAgICAgICAgICAgICAgICB2NDcyLAogICAgICAgICAgICAgICAgICAgICAgICB2NjcxCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdjIyNiA9IHY2NzE7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDczLCB2NDc0IGluIGlwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmICh2NDc0LkNoYXJhY3RlciBhbmQgKHY0NzQgfj0gdjIxKSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjcyID0gdjQ3NC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKTsKICAgICAgICAgICAgaWYgKHY2NzIgYW5kICgodjIyNSAtIHY2NzIuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA2MCkpIHRoZW4KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MjIzLCB7CiAgICAgICAgICAgICAgICAgICAgdjQ3NC5DaGFyYWN0ZXIsCiAgICAgICAgICAgICAgICAgICAgdjY3MgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2MjI2ID0gdjY3MjsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiB2MjI2OwplbmQKZnVuY3Rpb24gR2V0RXF1aXBwZWRUb29sKCkKICAgIGxvY2FsIHYyMjcgPSB2MjEuQ2hhcmFjdGVyOwogICAgaWYgbm90IHYyMjcgdGhlbgogICAgICAgIHJldHVybiBuaWw7CiAgICBlbmQKICAgIGZvciB2NDc1LCB2NDc2IGluIGlwYWlycyh2MjI3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ3NjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB2NDc2OwogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmlsOwplbmQKZnVuY3Rpb24gQXR0YWNrTm9Db29sRG93bigpCiAgICBsb2NhbCB2MjI4ID0ge307CiAgICBsb2NhbCB2MjI5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCk7CiAgICBsb2NhbCB2MjMwID0gRmluZEVuZW1pZXNJblJhbmdlKHYyMjgsIHYyMjkpOwogICAgaWYgbm90IHYyMzAgdGhlbgogICAgICAgIHJldHVybjsKICAgIGVuZAogICAgbG9jYWwgdjIzMSA9IEdldEVxdWlwcGVkVG9vbCgpOwogICAgaWYgbm90IHYyMzEgdGhlbgogICAgICAgIHJldHVybjsKICAgIGVuZAogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY0NzcgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik7CiAgICAgICAgbG9jYWwgdjQ3OCA9IHY0Nzc6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVyQXR0YWNrIik7CiAgICAgICAgbG9jYWwgdjQ3OSA9IHY0Nzc6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVySGl0Iik7CiAgICAgICAgaWYgKCMgdjIyOCA+IDApIHRoZW4KICAgICAgICAgICAgdjQ3ODpGaXJlU2VydmVyKDFlLTkpOwogICAgICAgICAgICB2NDc5OkZpcmVTZXJ2ZXIodjIzMCwgdjIyOCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB0YXNrLndhaXQoMWUtOSk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKVHlwZSA9IDE7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIChUeXBlID09IDEpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDIpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygtIDQwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDMpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldyg0MCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSA0KSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIDQwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gNSkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCAtIDQwKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBUeXBlID0gMTsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDI7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSAzOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gNDsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDU7CiAgICAgICAgd2FpdCgwLjIpOwogICAgZW5kCmVuZCk7CmZ1bmN0aW9uIEF1dG9IYWtpKCkKICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhhc0J1c28iKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnVzbyIpOwogICAgZW5kCmVuZApmdW5jdGlvbiB0byh2MjMyKQogICAgcmVwZWF0CiAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkNoYW5nZVN0YXRlKDE1KTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMjsKICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMjsKICAgIHVudGlsICh2MjMyLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMjAwMAplbmQKZnVuY3Rpb24gdG8odjIzMykKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiAoKCh2MjMzLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMjAwMCkgYW5kIG5vdCBBdXRvX1JhaWQgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgIGlmIChOYW1lTW9uID09ICJGaXNobWFuUXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbHNlaWYgKE1vbiA9PSAiR29kJ3MgR3VhcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTa3lFeHAxUXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2hpcFF1ZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTaGlwUXVlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIkZyb3N0UXVlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0gMTMyLjgzOTUzODU3NDIyKSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzM7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjA1KTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQ6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMzOwogICAgICAgICAgICAgICAgdW50aWwgKCh2MjMzLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyNTAwKSBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjIyID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKTsKbG9jYWwgdjIzID0gSW5zdGFuY2UubmV3KCJJbWFnZUJ1dHRvbiIpOwpsb2NhbCB2MjQgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIik7CmxvY2FsIHYyNSA9IEluc3RhbmNlLm5ldygiUGFydGljbGVFbWl0dGVyIik7CmxvY2FsIHYyNiA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik7CnYyMi5QYXJlbnQgPSBnYW1lLkNvcmVHdWk7CnYyMi5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKdjIzLlBhcmVudCA9IHYyMjsKdjIzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKTsKdjIzLkJvcmRlclNpemVQaXhlbCA9IDA7CnYyMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEyMDgzMzMzNyAtIDAuMSwgMCwgMC4wOTUyODkwODEzICsgMC4wMSwgMCk7CnYyMy5TaXplID0gVURpbTIubmV3KDAsIDUwLCAwLCA1MCk7CnYyMy5EcmFnZ2FibGUgPSB0cnVlOwp2MjMuSW1hZ2UgPSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD0xMjA2MjU2NjMyNDU1NzQiOwp2MjQuUGFyZW50ID0gdjIzOwp2MjQuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpOwp2MjUuUGFyZW50ID0gdjIzOwp2MjUuTGlnaHRFbWlzc2lvbiA9IDE7CnYyNS5TaXplID0gTnVtYmVyU2VxdWVuY2UubmV3KHsKICAgIE51bWJlclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIDAuMSksCiAgICBOdW1iZXJTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCAwKQp9KTsKdjI1LkxpZmV0aW1lID0gTnVtYmVyUmFuZ2UubmV3KDAuNSwgMSk7CnYyNS5SYXRlID0gMDsKdjI1LlNwZWVkID0gTnVtYmVyUmFuZ2UubmV3KDUsIDEwKTsKdjI1LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoQ29sb3IzLmZyb21SR0IoMjU1LCA4NSwgMjU1KSwgQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KSk7CmxvY2FsIHY0NyA9IHYyNjpDcmVhdGUodjIzLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5RdWFkLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICBSb3RhdGlvbiA9IDM2MAp9KTsKdjIzLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICB2MjUuUmF0ZSA9IDEwMDsKICAgIHRhc2suZGVsYXkoMSwgZnVuY3Rpb24oKQogICAgICAgIHYyNS5SYXRlID0gMDsKICAgIGVuZCk7CiAgICB2NDc6UGxheSgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5FbmQsIGZhbHNlLCBnYW1lKTsKICAgIHY0Ny5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgdjIzLlJvdGF0aW9uID0gMDsKICAgIGVuZCk7CiAgICBsb2NhbCB2MjM1ID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkJvdW5jZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNjAsIDAsIDYwKQogICAgfSk7CiAgICB2MjM1OlBsYXkoKTsKICAgIHYyMzUuQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY0ODMgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjIsIEVudW0uRWFzaW5nU3R5bGUuQm91bmNlLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQogICAgICAgIH0pOwogICAgICAgIHY0ODM6UGxheSgpOwogICAgZW5kKTsKZW5kKTsKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIkRlYXRoIikgdGhlbgogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuRGVhdGg6RGVzdHJveSgpOwplbmQKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIlJlc3Bhd24iKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKTsKZW5kCnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEaXNjb3JkIiwKICAgIERlc2NyaXB0aW9uID0gIkdpYW8gTMawdSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImh0dHBzOi8vZGlzY29yZC5nZy9HWlNtRjJiaDh5Iik7CiAgICBlbmQKfSk7Cl9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlID0gIlN1cGVyIEZhc3QgQXR0YWNrIjsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuRmFzdEF0dGFja1N0cml4X01vZGUgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoX0cuRmFzdEF0dGFja1N0cml4X01vZGUgPT0gIlN1cGVyIEZhc3QgQXR0YWNrIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkZhc3RfRGVsYXkgPSAxZS05OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjQ4ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duU2VsZWN0V2VhcG9uIiwgewogICAgVGl0bGUgPSAiVsWpIEtow60iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IHsKICAgICAgICAiTWVsZWUiLAogICAgICAgICJTd29yZCIsCiAgICAgICAgIkJsb3ggRnJ1aXRzIgogICAgfSwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjQ4OlNldFZhbHVlKCJNZWxlZSIpOwp2NDg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzYpCiAgICBDaG9vc2VXZWFwb24gPSB2MjM2OwplbmQpOwp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKENob29zZVdlYXBvbiA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgzNiwgdjgzNyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjgzNy5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHY4MzcuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHY4MzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIChDaG9vc2VXZWFwb24gPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHYxMDI4LCB2MTAyOSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjEwMjkuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2MTAyOS5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjEwMjkuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIChDaG9vc2VXZWFwb24gPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjE0MzAsIHYxNDMxIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjE0MzEuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYxNDMxLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjQ5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVMZXZlbCIsIHsKICAgIFRpdGxlID0gIkPDoHkgQ+G6pXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjQ5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjM3KQogICAgX0cuQXV0b0xldmVsID0gdjIzNzsKICAgIGlmICh2MjM3ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVMZXZlbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0xldmVsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQ2hlY2tMZXZlbCgpOwogICAgICAgICAgICAgICAgaWYgKG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZVEuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsIE5hbWVRdWVzdCwgUXVlc3RMdik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDMyLCB2MTQzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0MzMuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMy5OYW1lID09IE1zKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0MzMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0xldmVsIG9yIG5vdCB2MTQzMy5QYXJlbnQgb3IgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYxNDMzLk5hbWUpIG9yIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNCwgdjE0MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uRW5lbXlTcGF3bnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjE0MzUuTmFtZSwgTmFtZU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MTQzNS5Qb3NpdGlvbikuTWFnbml0dWRlID49IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNb2JBdXJhIiwgewogICAgVGl0bGUgPSAixJDDoW5oIFF1w6FpIEfhuqduIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MDpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOCkKICAgIF9HLkF1dG9OZWFyID0gdjIzODsKICAgIGlmICh2MjM4ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVNb2JBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b05lYXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3IgdjgzOCwgdjgzOSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4MzkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjgzOS5OYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjgzOS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTmVhciBvciBub3QgdjgzOS5QYXJlbnQgb3IgKHY4MzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHY4MzkuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUxID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYXN0bGVSYWlkIiwgewogICAgVGl0bGUgPSAixJDDoW5oIEjhuqNpIFThurdjIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOSkKICAgIF9HLkNhc3RsZVJhaWQgPSB2MjM5OwplbmQpOwp2MTcuVG9nZ2xlQ2FzdGxlUmFpZDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkNhc3RsZVJhaWQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2NzY0ID0gQ0ZyYW1lLm5ldygtIDU0OTYuMTc0MzIsIDMxMy43Njg5MjEsIC0gMjg0MS41MzAyNywgMC45MjQ4OTQ1MTIsIDcuMzcwNThlLTksIDAuMzgwMjIzNzUxLCAzLjU4ODEwMmUtOCwgMSwgLSAxLjA2NjY1NDQ2ZS03LCAtIDAuMzgwMjIzNzUxLCAxLjEyMjk3MTFlLTcsIDAuOTI0ODk0NTEyKTsKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzAsIHYxMDMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX0cuQ2FzdGxlUmFpZCBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDMxLlBhcmVudCBvciBub3QgX0cuQ2FzdGxlUmFpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3NjQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVIYWtpRm9ydHJlc3MiLCB7CiAgICBUaXRsZSA9ICJC4bqtdCBIYWtpIE3DoHUgUGjDoW8gxJDDoGkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjQwKQogICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gdjI0MDsKZW5kKTsKdjE3LlRvZ2dsZUhha2lGb3J0cmVzczpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIGZ1bmN0aW9uIHY1Myh2MjQxLCB2MjQyKQogICAgbG9jYWwgdjI0MyA9IHsKICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgIFN0b3JhZ2VOYW1lID0gdjI0MSwKICAgICAgICAgICAgVHlwZSA9ICJBdXJhU2tpbiIsCiAgICAgICAgICAgIENvbnRleHQgPSAiRXF1aXAiCiAgICAgICAgfQogICAgfTsKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRnJ1aXRDdXN0b21pemVyUkYiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYyNDMpKTsKICAgIFR3ZWVuMih2MjQyKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHY1NCh2MjQ0LCB2MjQ1KQogICAgbG9jYWwgdjI0NiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICBpZiAobm90IHYyNDYgb3Igbm90IHYyNDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIGVuZAogICAgbG9jYWwgdjI0NyA9IHYyNDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgIHJldHVybiAodjI0NyAtIHYyNDQpLk1hZ25pdHVkZSA8IHYyNDUgOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGlmIF9HLkVuYWJsZUhha2lGb3J0cmVzcyB0aGVuCiAgICAgICAgICAgIHY1MygiU25vdyBXaGl0ZSIsIFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA0OTcxLjcxODI2MTcxODc1LCAzMzUuOTU4MjIxNDM1NTQ2OSwgLSAzNzIwLjA1OTU3MDMxMjUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICB2NTMoIlB1cmUgUmVkIiwgVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJXaW50ZXIgU2t5IiwgVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgwLjUpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY1NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdENoZXN0IiwgewogICAgVGl0bGUgPSAiTmjhurd0IFLGsMahbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjQ4KQogICAgX0cuQXV0b0NvbGxlY3RDaGVzdCA9IHYyNDg7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0Q2hlc3QgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjczID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICAgICAgICAgIGxvY2FsIHY2NzQgPSB2NjczLkxvY2FsUGxheWVyOwogICAgICAgICAgICBsb2NhbCB2Njc1ID0gdjY3NC5DaGFyYWN0ZXIgb3IgdjY3NC5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgOwogICAgICAgICAgICBsb2NhbCB2Njc2ID0gdjY3NTpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Njc3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb2xsZWN0aW9uU2VydmljZSIpOwogICAgICAgICAgICBsb2NhbCB2Njc4ID0gdjY3NzpHZXRUYWdnZWQoIl9DaGVzdFRhZ2dlZCIpOwogICAgICAgICAgICBsb2NhbCB2Njc5LCB2NjgwID0gbWF0aC5odWdlOwogICAgICAgICAgICBmb3Igdjc2NSA9IDEsICMgdjY3OCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjc2NiA9IHY2Nzhbdjc2NV07CiAgICAgICAgICAgICAgICBsb2NhbCB2NzY3ID0gKHY3NjY6R2V0UGl2b3QoKS5Qb3NpdGlvbiAtIHY2NzYpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgIGlmIChub3Qgdjc2NjpHZXRBdHRyaWJ1dGUoIklzRGlzYWJsZWQiKSBhbmQgKHY3NjcgPCB2Njc5KSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY2NzksIHY2ODAgPSB2NzY3LCB2NzY2OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiB2NjgwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDAgPSB2NjgwOkdldFBpdm90KCkuUG9zaXRpb247CiAgICAgICAgICAgICAgICBsb2NhbCB2ODQxID0gQ0ZyYW1lLm5ldyh2ODQwKTsKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODQxKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiVGjDtG5nIFRo4bqhbyIpOwpsb2NhbCB2NTcgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25NYXN0ZXJ5IiwgewogICAgVGl0bGUgPSAiQ8OgeSBUaMO0bmcgVGjhuqFvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk5lYXIgTW9icyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY1NzpTZXRWYWx1ZShUeXBlTWFzdGVyeSk7CnY1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OSkKICAgIFR5cGVNYXN0ZXJ5ID0gdjI0OTsKZW5kKTsKbG9jYWwgdjU4ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNYXN0ZXJ5RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJDw6B5IFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MCkKICAgIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCA9IHYyNTA7CmVuZCk7CnYxNy5Ub2dnbGVNYXN0ZXJ5RnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NTkgPSB2MTYuTWFpbjpBZGRTbGlkZXIoIlNsaWRlckhlYWx0IiwgewogICAgVGl0bGUgPSAiTcOhdSBRdcOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IDIwLAogICAgTWluID0gMCwKICAgIE1heCA9IDEwMCwKICAgIFJvdW5kaW5nID0gMSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjI1MSkKICAgICAgICBLaWxsUGVyY2VudCA9IHYyNTE7CiAgICBlbmQKfSk7CnY1OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MikKICAgIEtpbGxQZXJjZW50ID0gdjI1MjsKZW5kKTsKdjU5OlNldFZhbHVlKDIwKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzIsIHYxMDMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDMzLk5hbWUgPT0gTW9uRmFybSkgYW5kIHYxMDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTAzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwMzMuSHVtYW5vaWQuSGVhbHRoIDw9ICgodjEwMzMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDp3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQgPSB2MTAzMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKS5Nb3VzZVBvcy5WYWx1ZSA9IFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE2MDYgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkuTGV2ZWwuVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFogYW5kICh2MTYwNiA+PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJaIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFggYW5kICh2MTYwNiA+PSAyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJYIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWCIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEMgYW5kICh2MTYwNiA+PSAzKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJDIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbFYgYW5kICh2MTYwNiA+PSA0KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJWIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpzZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTa2lsbEYgYW5kICh2MTYwNiA+PSA1KSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJGIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIG5vdCBfRy5Vc2VTa2lsbCBvciAodjEwMzMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDAuMSkgZG8KICAgICAgICBpZiAoQXV0b0Zhcm1NYXNEZXZpbEZydWl0IGFuZCAoVHlwZU1hc3RlcnkgPT0gIk5lYXIgTW9icyIpKSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODQyLCB2ODQzIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg0My5OYW1lIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ODQzLkh1bWFub2lkLkhlYWx0aCA8PSAoKHY4NDMuSHVtYW5vaWQuTWF4SGVhbHRoICogS2lsbFBlcmNlbnQpIC8gMTAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciAobm90IE1hc3RlcnlUeXBlID09ICJOZWFyIE1vYnMiKSBvciBub3Qgdjg0My5QYXJlbnQgb3IgKHY4NDMuSHVtYW5vaWQuSGVhbHRoID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0ODQgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJYxrDGoW5nIik7CiAgICBsb2NhbCB2NDg1ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJYxrDGoW5nIFRy4bqhbmcgVGjDoWkiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjggPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJDaGVjayIpOwogICAgICAgICAgICAgICAgdjQ4NTpTZXREZXNjKCJNw6B5IEPDszogIiAuLiB0b3N0cmluZyh2NzY4KSAuLiAiIFjGsMahbmciKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg2ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVCb25lIiwgewogICAgICAgIFRpdGxlID0gIkPDoHkgWMawxqFuZyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3MSkKICAgICAgICBfRy5BdXRvQm9uZSA9IHY1NzE7CiAgICAgICAgaWYgKHY1NzEgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgbG9jYWwgdjQ4NyA9IENGcmFtZS5uZXcoLSA5NTE1Ljc1LCAxNzQuODUyMTcyODUxNTYyNSwgNjA3OS40MDYyNSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9Cb25lIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dDsKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQodjg5NCwgIkRlbW9uaWMgU291bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjQ4Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjQ4Ny5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsICJIYXVudGVkUXVlc3QyIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjEsIHYxNjYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjIuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNjYyLk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE2NjIuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNjYyLk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZW1vbmljIFNvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0JvbmUgb3IgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjIuUGFyZW50IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0ODggPSBDRnJhbWUubmV3KC0gOTUxNS43NSwgMTc0Ljg1MjE3Mjg1MTU2MjUsIDYwNzkuNDA2MjUpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQm9uZU5vUXVlc3QgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY0ODgpOwogICAgICAgICAgICAgICAgICAgIGlmICgodjQ4OC5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNiwgdjE0MzcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTQzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0MzcuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNDM3Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE0MzcuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNDM3Lk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgKHYxNDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE0MzcuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuTWFpbjpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkPhuqd1IE5ndXnhu4duIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2NTcyID0gewogICAgICAgICAgICAgICAgWzFdID0gImdyYXZlc3RvbmVFdmVudCIsCiAgICAgICAgICAgICAgICBbMl0gPSAxCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY1NzIpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgdjE2Lk1haW46QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJUaOG7rSBW4bqtbiBNYXkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHY1NzMgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiZ3JhdmVzdG9uZUV2ZW50IiwKICAgICAgICAgICAgICAgIFsyXSA9IDIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjU3MykpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NDg5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21Cb25lIiwgewogICAgICAgIFRpdGxlID0gIlJhbmRvbSBYxrDGoW5nIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDg5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc0KQogICAgICAgIF9HLkF1dG9SYW5kb21Cb25lID0gdjU3NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlUmFuZG9tQm9uZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9SYW5kb21Cb25lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDQgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODQ0KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5MCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIlTGsCBM4buHbmggQsOhbmgiKTsKICAgIGxvY2FsIHY0OTEgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIlRy4bqhbmcgVGjDoWkgTsOzIFJhIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4OCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiQ8OybjogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCA0MSkgLi4gIiIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg3KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJDw7JuOiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDQwKSAuLiAiIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODYpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkPDsm46ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgMzkpIC4uICIgIik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJUxrAgTOG7h25oIELDoW5oIDog4pyF77iPIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDkyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYWtlIiwgewogICAgICAgIFRpdGxlID0gIkPDoHkgVMawIEzhu4duaCBCw6FuaCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgbG9jYWwgdjQ5MyA9IHRydWU7CiAgICB2NDkyOk9uQ2hhbmdlZChmdW5jdGlvbih2NTc1KQogICAgICAgIF9HLkNha2VQcmluY2UgPSB2NTc1OwogICAgICAgIGlmIHY1NzUgdGhlbgogICAgICAgICAgICBpZiB2NDkzIHRoZW4KICAgICAgICAgICAgICAgIHY0OTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4OTUgPSBDRnJhbWUubmV3KC0gMjAwMy45MzI4NjEzMjgxMjUsIDM4MC40ODI0NTIzOTI1NzgxLCAtIDEyNTYxLjAxODU1NDY4NzUpOwogICAgICAgICAgICAgICAgVHdlZW4odjg5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgdjQ5MyA9IHRydWU7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVDYWtlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQ2FrZVByaW5jZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM4LCB2MTQzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzOS5OYW1lID09ICJDYWtlIFByaW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQ2FrZVByaW5jZSBvciBub3QgdjE0MzkuUGFyZW50IG9yICh2MTQzOS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb29raWUgQ3JhZnRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBHdWFyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmFraW5nIFN0YWZmIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1NCwgdjE3NTUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTc1NS5OYW1lID09ICJDb29raWUgQ3JhZnRlciIpIG9yICh2MTc1NS5OYW1lID09ICJDYWtlIEd1YXJkIikgb3IgKHYxNzU1Lk5hbWUgPT0gIkJha2luZyBTdGFmZiIpIG9yICh2MTc1NS5OYW1lID09ICJIZWFkIEJha2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzU1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc1NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NTUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE3NTUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkNha2VQcmluY2Ugb3Igbm90IHYxNzU1LlBhcmVudCBvciAodjE3NTUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDApIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTQgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZURvdWdoS2luZyIsIHsKICAgICAgICBUaXRsZSA9ICLEkMOhbmggVnVhIELhu5l0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc2KQogICAgICAgIF9HLkRvdWdoS2luZyA9IHY1NzY7CiAgICAgICAgaWYgKHY1NzYgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZURvdWdoS2luZzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkRvdWdoS2luZyB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDAsIHYxNDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxLk5hbWUgPT0gIkRvdWdoIEtpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkRvdWdoS2luZyBvciBub3QgdjE0NDEuUGFyZW50IG9yICh2MTQ0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVNwYXduQ2FrZSIsIHsKICAgICAgICBUaXRsZSA9ICJUcmnhu4d1IEjhu5NpIFTGsCBM4buHbmggQsOhbmgiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHRydWUKICAgIH0pOwogICAgdjQ5NTpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NykKICAgICAgICBfRy5TcGF3bkNha2VQcmluY2UgPSB2NTc3OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTcGF3bkNha2U6U2V0VmFsdWUodHJ1ZSk7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5TcGF3bkNha2VQcmluY2UgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIiwKICAgICAgICAgICAgICAgIFsyXSA9IHRydWUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY4MSkpOwogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIgogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjgxKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NDk2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiRWN0b3BsYXNtIEZhcm0iKTsKICAgIGxvY2FsIHY0OTcgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVZhdENoYXRLaURpIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFybSBFY3RvcGxhc20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0OTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzgpCiAgICAgICAgX0cuRWN0b3BsYXNtID0gdjU3ODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVmF0Q2hhdEtpRGk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5FY3RvcGxhc20gdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRGVja2hhbmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRW5naW5lZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgU3Rld2FyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQyLCB2MTQ0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0NDMuTmFtZSA9PSAiU2hpcCBTdGV3YXJkIikgb3IgKHYxNDQzLk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiKSBvciAodjE0NDMuTmFtZSA9PSAiU2hpcCBEZWNraGFuZCIpIG9yICgodjE0NDMuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIikgYW5kIHYxNDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuRWN0b3BsYXNtID09IGZhbHNlKSBvciBub3QgdjE0NDMuUGFyZW50IG9yICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPT0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQ0My5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzQgPSAoVmVjdG9yMy5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTMzNCA+IDIwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjYwID0gdjE2Lk1haW46QWRkU2VjdGlvbigiVHLDuW0iKTsKaWYgU2VhMSB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIlRoZSBHb3JpbGxhIEtpbmciLAogICAgICAgICJCb2JieSIsCiAgICAgICAgIllldGkiLAogICAgICAgICJNb2IgTGVhZGVyIiwKICAgICAgICAiVmljZSBBZG1pcmFsIiwKICAgICAgICAiV2FyZGVuIiwKICAgICAgICAiQ2hpZWYgV2FyZGVuIiwKICAgICAgICAiU3dhbiIsCiAgICAgICAgIk1hZ21hIEFkbWlyYWwiLAogICAgICAgICJGaXNobWFuIExvcmQiLAogICAgICAgICJXeXNwZXIiLAogICAgICAgICJUaHVuZGVyIEdvZCIsCiAgICAgICAgIkN5Ym9yZyIsCiAgICAgICAgIlNhYmVyIEV4cGVydCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiRGlhbW9uZCIsCiAgICAgICAgIkplcmVteSIsCiAgICAgICAgIkZhaml0YSIsCiAgICAgICAgIkRvbiBTd2FuIiwKICAgICAgICAiU21va2UgQWRtaXJhbCIsCiAgICAgICAgIkN1cnNlZCBDYXB0YWluIiwKICAgICAgICAiRGFya2JlYXJkIiwKICAgICAgICAiT3JkZXIiLAogICAgICAgICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIsCiAgICAgICAgIlRpZGUgS2VlcGVyIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJTdG9uZSIsCiAgICAgICAgIkh5ZHJhIExlYWRlciIsCiAgICAgICAgIktpbG8gQWRtaXJhbCIsCiAgICAgICAgIkNhcHRhaW4gRWxlcGhhbnQiLAogICAgICAgICJCZWF1dGlmdWwgUGlyYXRlIiwKICAgICAgICAicmlwX2luZHJhIFRydWUgRm9ybSIsCiAgICAgICAgIkxvbmdtYSIsCiAgICAgICAgIlNvdWwgUmVhcGVyIiwKICAgICAgICAiQ2FrZSBRdWVlbiIKICAgIH07CmVuZApsb2NhbCB2NjEgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25Cb3NzIiwgewogICAgVGl0bGUgPSAiQ2jhu41uIFRyw7ltIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB0YWJsZUJvc3MsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY2MTpTZXRWYWx1ZShfRy5TZWxlY3RCb3NzKTsKdjYxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjUzKQogICAgX0cuU2VsZWN0Qm9zcyA9IHYyNTM7CmVuZCk7CmxvY2FsIHY2MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0Zhcm1Cb3NzIiwgewogICAgVGl0bGUgPSAixJDDoW5oIFRyw7ltIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NCkKICAgIF9HLkF1dG9Cb3NzID0gdjI1NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtQm9zczpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Cb3NzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzQsIHYxMDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzUuTmFtZSA9PSBfRy5TZWxlY3RCb3NzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDM1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzNS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0Jvc3Mgb3Igbm90IHYxMDM1LlBhcmVudCBvciAodjEwMzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDUsIDEwLCA3KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NjMgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJOZ3V5w6puIExp4buHdSIpOwppZiBTZWExIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiQW5nZWwgV2luZ3MiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJGaXNoIFRhaWwiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIlJhZGlvYWN0aXZlIE1hdGVyaWFsIiwKICAgICAgICAiTXlzdGljIERyb3BsZXQiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJWYW1waXJlIEZhbmciCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIkRlbW9uaWMgV2lzcCIsCiAgICAgICAgIkNvbmp1cmVkIENvY29hIiwKICAgICAgICAiRHJhZ29uIFNjYWxlIiwKICAgICAgICAiR3VucG93ZGVyIiwKICAgICAgICAiRmlzaCBUYWlsIiwKICAgICAgICAiTWluaSBUdXNrIiwKICAgICAgICAiSHlkcmEgRW5mb3JjZXIiLAogICAgICAgICJWZW5vbW91cyBBc3NhaWxhbnQiCiAgICB9OwplbmQKbG9jYWwgdjY0ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duTWF0ZXJpYWwiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gTmd1ecOqbiBMaeG7h3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IE1hdGVyaWFsTGlzdCwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjY0OlNldFZhbHVlKFNlbGVjdE1hdGVyaWFsKTsKdjY0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU1KQogICAgU2VsZWN0TWF0ZXJpYWwgPSB2MjU1OwplbmQpOwpsb2NhbCB2NjUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1hdGVyaWFsIiwgewogICAgVGl0bGUgPSAiQ8OgeSBOZ3V5w6puIExp4buHdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTYpCiAgICBfRy5BdXRvTWF0ZXJpYWwgPSB2MjU2OwogICAgaWYgKHYyNTYgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU1hdGVyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTWF0ZXJpYWwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBNYXRlcmlhbE1vbihTZWxlY3RNYXRlcmlhbCk7CiAgICAgICAgICAgICAgICBUd2VlbihNUG9zKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZChNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM2LCB2MTAzNyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzcuTmFtZSA9PSBNTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEwMzcuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b01hdGVyaWFsIG9yIG5vdCB2MTAzNy5QYXJlbnQgb3IgKHYxMDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDM4LCB2MTAzOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5FbmVteVNwYXduczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTAzOS5OYW1lLCBNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjEwMzkuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ5OCA9IHYxNi5TZWE6QWRkU2VjdGlvbigixJDhuqNvIEPDoW8iKTsKICAgIGxvY2FsIHY0OTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiVHLhuqFuZyBUaMOhaSDEkOG6o28gQ8OhbyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUtpdHN1bmUoKQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lSXNsYW5kIikgdGhlbgogICAgICAgICAgICB2NDk5OlNldERlc2MoIsSQ4bqjbyBDw6FvIDog4pyF77iPIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2NDk5OlNldERlc2MoIsSQ4bqjbyBDw6FvIDog4p2M77iPIik7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgVXBkYXRlS2l0c3VuZSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIGxvY2FsIHY1MDAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRXNwS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICLEkOG7i25oIFbhu4sgxJDhuqNvIEPDoW8iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzkpCiAgICAgICAgS2l0c3VuZUlzbGFuZEVzcCA9IHY1Nzk7CiAgICAgICAgd2hpbGUgS2l0c3VuZUlzbGFuZEVzcCBkbwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVFc3BLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIGZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEtpc3VuZUVTUCgpCiAgICAgICAgZm9yIHY2ODIsIHY2ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEtpdHN1bmVJc2xhbmRFc3AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICh2NjgzLk5hbWUgPT0gIktpdHN1bmUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTE4ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NjgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguQWRvcm5lZSA9IHY2ODM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUyNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE1MTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NjgzWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NjgzLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjY4My5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NTAxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICJCYXkgVsO0IMSQ4bqjbyBDw6FvIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAxOk9uQ2hhbmdlZChmdW5jdGlvbih2NTgwKQogICAgICAgIF9HLlR3ZWVuVG9LaXRzdW5lID0gdjU4MDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVFBLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2NTgxOwogICAgICAgIHdoaWxlIG5vdCB2NTgxIGRvCiAgICAgICAgICAgIHY1ODEgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlR3ZWVuVG9LaXRzdW5lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDUgPSB2NTgxOkZpbmRGaXJzdENoaWxkKCJTaHJpbmVBY3RpdmUiKTsKICAgICAgICAgICAgICAgIGlmIHY4NDUgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTMzNSwgdjEzMzYgaW4gcGFpcnModjg0NTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEzMzY6SXNBKCJCYXNlUGFydCIpIGFuZCB2MTMzNi5OYW1lOmZpbmQoIk5lb25TaHJpbmVQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzM2LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MDIgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEF6dXJlIiwgewogICAgICAgIFRpdGxlID0gIk5o4bq3dCBMaW5oIEjhu5NuIFhhbmgiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODIpCiAgICAgICAgX0cuQ29sbGVjdEF6dXJlID0gdjU4MjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlQ29sbGVjdEF6dXJlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQ29sbGVjdEF6dXJlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJBdHRhY2hlZEF6dXJlRW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6V2FpdEZvckNoaWxkKCJFbWJlclRlbXBsYXRlIik6RmluZEZpcnN0Q2hpbGQoIlBhcnQiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKdjE2LlNlYTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAixJDhu5VpIExpbmggSOG7k24gWGFuaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRi9LaXRzdW5lU3RhdHVlUHJheSIpOkludm9rZVNlcnZlcigpOwogICAgZW5kCn0pOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1MDMgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIkJp4buDbiIpOwogICAgbG9jYWwgdjUwNCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgbG9jYWwgdjUwNSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOwogICAgbG9jYWwgdjUwNiA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOwogICAgbG9jYWwgdjUwNyA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik7CiAgICBsb2NhbCB2NTA4ID0gMzUwOwogICAgbG9jYWwgdjUwOSA9IHYxNi5TZWE6QWRkU2xpZGVyKCJTbGlkZXJTcGVlZEJvYXQiLCB7CiAgICAgICAgVGl0bGUgPSAiVOG7kWMgxJDhu5kgVGh1eeG7gW4iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHY1MDgsCiAgICAgICAgTWluID0gMCwKICAgICAgICBNYXggPSAzNTAsCiAgICAgICAgUm91bmRpbmcgPSAxLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjU4MykKICAgICAgICAgICAgdjUwOCA9IHY1ODM7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHY1MDk6U2V0VmFsdWUodjUwOCk7CiAgICBsb2NhbCB2NTEwID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9GaW5kUHJlaGlzdG9yaWMiLCB7CiAgICAgICAgVGl0bGUgPSAiVMOsbSDEkOG6o28gTsO6aSBs4butYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kUHJlaGlzdG9yaWM6U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxMDpPbkNoYW5nZWQoZnVuY3Rpb24odjU4NCkKICAgICAgICBfRy5BdXRvRmluZFByZWhpc3RvcmljID0gdjU4NDsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTg1ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NTg2ID0gdjU4NS5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NTg2IG9yIG5vdCB2NTg2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NTg3KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NjksIHY3NzAgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzcwIGFuZCB2NzcwLlBhcmVudCBhbmQgKHY3NzAuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzAuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3MC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU4OCA9IHY1ODYuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjU4OSA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY1OTAgPSBuaWw7CiAgICAgICAgZm9yIHY2ODQsIHY2ODUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2Njg2ID0gdjY4NTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY2ODYgYW5kICh2Njg2Lk9jY3VwYW50ID09IHY1ODgpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY1OTAgPSB2Njg2OwogICAgICAgICAgICAgICAgdjUxMVt2Njg1Lk5hbWVdID0gdjY4NjsKICAgICAgICAgICAgZWxzZWlmICh2Njg2IGFuZCAodjY4Ni5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg3KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NTg5IHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY1OTAuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY1OTAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NTkwLlBvc2l0aW9uLlgsIHY1OTAuUG9zaXRpb24uWSwgdjU5MC5Qb3NpdGlvbi5aKSkgKiB2NTkwLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY2ODcsIHY2ODggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2Njg4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2Njg4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY2ODksIHY2OTAgaW4gcGFpcnModjU4NjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NjkwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NjkwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5MyA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJNeXN0aWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjY5MSwgdjY5MiBpbiBpcGFpcnModjU5MykgZG8KICAgICAgICAgICAgbG9jYWwgdjY5MyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY2OTIpOwogICAgICAgICAgICBpZiAodjY5MyBhbmQgdjY5MzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY2OTM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk0ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgaWYgdjU5NCB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJZYXRha2kgUm9ibG94IiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBOw7ppIGzhu61hIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRNaXJhZ2UiLCB7CiAgICAgICAgVGl0bGUgPSAiVMOsbSDEkOG6o28gQsOtIOG6qG4iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZE1pcmFnZTpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTE0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTk1KQogICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gdjU5NTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kTWlyYWdlIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5NiA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjU5NyA9IHY1OTYuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjU5NyBvciBub3QgdjU5NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjU5OCgpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzcxLCB2NzcyIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3MiBhbmQgdjc3Mi5QYXJlbnQgYW5kICh2NzcyLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzcyLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTkgPSB2NTk3Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MDAgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NjAxID0gbmlsOwogICAgICAgIGZvciB2Njk0LCB2Njk1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY5NiA9IHY2OTU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2Njk2IGFuZCAodjY5Ni5PY2N1cGFudCA9PSB2NTk5KSkgdGhlbgogICAgICAgICAgICAgICAgdjYwMCA9IHRydWU7CiAgICAgICAgICAgICAgICB2NjAxID0gdjY5NjsKICAgICAgICAgICAgICAgIHY1MTFbdjY5NS5OYW1lXSA9IHY2OTY7CiAgICAgICAgICAgIGVsc2VpZiAodjY5NiBhbmQgKHY2OTYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjU5OCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjYwMCB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NjAxLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NjAxLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjYwMS5Qb3NpdGlvbi5YLCB2NjAxLlBvc2l0aW9uLlksIHY2MDEuUG9zaXRpb24uWikpICogdjYwMS5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2Njk3LCB2Njk4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY5ODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY5OC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2Njk5LCB2NzAwIGluIHBhaXJzKHY1OTc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcwMDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcwMC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDQgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiUHJlaGlzdG9yaWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcwMSwgdjcwMiBpbiBpcGFpcnModjYwNCkgZG8KICAgICAgICAgICAgbG9jYWwgdjcwMyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY3MDIpOwogICAgICAgICAgICBpZiAodjcwMyBhbmQgdjcwMzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjA1ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpOwogICAgICAgIGlmIHY2MDUgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIllhdGFraSBSb2Jsb3giLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIELDrSDhuqhuIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRGcm96ZW4iLCB7CiAgICAgICAgVGl0bGUgPSAiVMOsbSDEkOG6o28gTGV2aWF0aGFuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICJD4bqnbiA1IE5nxrDhu51pIEtow7RuZyBJZGsiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2MTcuQXV0b0ZpbmRGcm96ZW46U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxNTpPbkNoYW5nZWQoZnVuY3Rpb24odjYwNikKICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IHY2MDY7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZEZyb3plbiB0aGVuCiAgICAgICAgICAgIHY1MTMgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDcgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY2MDggPSB2NjA3LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY2MDggb3Igbm90IHY2MDg6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY2MDkoKQogICAgICAgICAgICBpZiB2NTEyIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSB0cnVlOwogICAgICAgICAgICBmb3Igdjc3Mywgdjc3NCBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3NzQgYW5kIHY3NzQuUGFyZW50IGFuZCAodjc3NC5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3Qgdjc3NC5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2Nzc0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjEwID0gdjYwOC5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjExID0gZmFsc2U7CiAgICAgICAgbG9jYWwgdjYxMiA9IG5pbDsKICAgICAgICBmb3IgdjcwNCwgdjcwNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MDYgPSB2NzA1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcwNiBhbmQgKHY3MDYuT2NjdXBhbnQgPT0gdjYxMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MTEgPSB0cnVlOwogICAgICAgICAgICAgICAgdjYxMiA9IHY3MDY7CiAgICAgICAgICAgICAgICB2NTExW3Y3MDUuTmFtZV0gPSB2NzA2OwogICAgICAgICAgICBlbHNlaWYgKHY3MDYgYW5kICh2NzA2Lk9jY3VwYW50ID09IG5pbCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MDkoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHY2MTEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgdjYxMi5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgdjYxMi5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHY2MTIuUG9zaXRpb24uWCwgdjYxMi5Qb3NpdGlvbi5ZLCB2NjEyLlBvc2l0aW9uLlopKSAqIHY2MTIuQ0ZyYW1lLlJvdGF0aW9uIDsKICAgICAgICB2NTA2OlNlbmRLZXlFdmVudCh0cnVlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICBmb3IgdjcwNywgdjcwOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MDg6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDguQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgdjcwOSwgdjcxMCBpbiBwYWlycyh2NjA4OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MTA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MTAuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE1ID0gewogICAgICAgICAgICAiU2hpcHdyZWNrSXNsYW5kIiwKICAgICAgICAgICAgIlNhbmRJc2xhbmQiLAogICAgICAgICAgICAiVHJlZUlzbGFuZCIsCiAgICAgICAgICAgICJUaW55SXNsYW5kIiwKICAgICAgICAgICAgIk15c3RpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIlByZWhpc3RvcmljSXNsYW5kIgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MTEsIHY3MTIgaW4gaXBhaXJzKHY2MTUpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NzEyKTsKICAgICAgICAgICAgaWYgKHY3MTMgYW5kIHY3MTM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NzEzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxNiA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKTsKICAgICAgICBpZiB2NjE2IHRoZW4KICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJZYXRha2kgUm9ibG94IiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBMZXZpYXRoYW4gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvQ29tZVRpa2kiLCB7CiAgICAgICAgVGl0bGUgPSAiTMOhaSBUaHV54buBbiBW4buBIMSQ4bqjbyBUaWtpIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTE2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjE3KQogICAgICAgIF9HLkF1dG9Db21lVGlraSA9IHY2MTc7CiAgICBlbmQpOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvQ29tZVRpa2kgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxOCA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYxOSA9IHY2MTguQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYxOSBvciBub3QgdjYxOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMCA9IHY2MTkuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyMSA9IG5pbDsKICAgICAgICBmb3IgdjcxNCwgdjcxNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTYgPSB2NzE1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxNiBhbmQgKHY3MTYuT2NjdXBhbnQgPT0gdjYyMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjEgPSB2NzE2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjEgdGhlbgogICAgICAgICAgICB2NjIxLk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc3NiA9IENGcmFtZS5uZXcoLSAxNjIxNy43NTY4MzU5Mzc1LCA5LjEyNjc2MTQzNjQ2MjQwMiwgNDQ2LjA2NTM2ODY1MjM0Mzc1KTsKICAgICAgICAgICAgbG9jYWwgdjc3NyA9IHY2MjEuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3NzggPSB2Nzc2LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzc5ID0gKHY3NzggLSB2Nzc3KS51bml0OwogICAgICAgICAgICBsb2NhbCB2NzgwID0gdjc3OSAqIHY2MjEuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSB2NjIxLkNGcmFtZSArIHY3ODAgOwogICAgICAgICAgICBsb2NhbCB2NzgyID0gQ0ZyYW1lLm5ldyh2Nzc3LCB2Nzc4KTsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjEuUG9zaXRpb24sIHY3NzgpOwogICAgICAgICAgICBpZiAoKHY2MjEuUG9zaXRpb24gLSB2Nzc4KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lVGlraSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9Db21lSHlkcmEiLCB7CiAgICAgICAgVGl0bGUgPSAiTMOhaSBUaHV54buBbiBW4buBIMSQ4bqjbyBIeWRyYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUxNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYyMikKICAgICAgICBfRy5BdXRvQ29tZUh5ZHJhID0gdjYyMjsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lSHlkcmEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYyNCA9IHY2MjMuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYyNCBvciBub3QgdjYyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyNSA9IHY2MjQuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyNiA9IG5pbDsKICAgICAgICBmb3IgdjcxNywgdjcxOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTkgPSB2NzE4OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxOSBhbmQgKHY3MTkuT2NjdXBhbnQgPT0gdjYyNSkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjYgPSB2NzE5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjYgdGhlbgogICAgICAgICAgICB2NjI2Lk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc4NCA9IENGcmFtZS5uZXcoNTE5My45Mzc1LCAtIDAuMDQ2OTAyODk0OTczNzU0ODgsIDE2MzEuNTc4MzY5MTQwNjI1KTsKICAgICAgICAgICAgbG9jYWwgdjc4NSA9IHY2MjYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3ODYgPSB2Nzg0LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzg3ID0gKHY3ODYgLSB2Nzg1KS51bml0OwogICAgICAgICAgICBsb2NhbCB2Nzg4ID0gdjc4NyAqIHY2MjYuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSB2NjI2LkNGcmFtZSArIHY3ODggOwogICAgICAgICAgICBsb2NhbCB2NzkwID0gQ0ZyYW1lLm5ldyh2Nzg1LCB2Nzg2KTsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjYuUG9zaXRpb24sIHY3ODYpOwogICAgICAgICAgICBpZiAoKHY2MjYuUG9zaXRpb24gLSB2Nzg2KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lSHlkcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkJheSDEkOG6v24gS2h1IFbhu7FjIFPEg24iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTY5MTcuMTU0Mjk2ODc1LCA3Ljc1NzU5NjAxNTkzMDE3NiwgNTExLjgyMDMxMjUpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxOCA9IHsKICAgICAgICAiQmVhc3QgSHVudGVyIiwKICAgICAgICAiU2xlaWdoIiwKICAgICAgICAiTWlyYWNsZSIsCiAgICAgICAgIlRoZSBTZW50aW5lbCIsCiAgICAgICAgIkd1YXJkaWFuIiwKICAgICAgICAiTGFudGVybiIsCiAgICAgICAgIkRpbmdoeSIsCiAgICAgICAgIlBpcmF0ZVNsb29wIiwKICAgICAgICAiUGlyYXRlQnJpZ2FkZSIsCiAgICAgICAgIlBpcmF0ZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUJyaWdhZGUiLAogICAgICAgICJNYXJpbmVTbG9vcCIKICAgIH07CiAgICBsb2NhbCB2NTE5ID0gdjE2LlNlYTpBZGREcm9wZG93bigiRHJvcGRvd25Cb2F0IiwgewogICAgICAgIFRpdGxlID0gIkNo4buNbiBUaHV54buBbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBWYWx1ZXMgPSB2NTE4LAogICAgICAgIE11bHRpID0gZmFsc2UsCiAgICAgICAgRGVmYXVsdCA9IDEKICAgIH0pOwogICAgdjUxOTpTZXRWYWx1ZShzZWxlY3RlZEJvYXQpOwogICAgdjUxOTpPbkNoYW5nZWQoZnVuY3Rpb24odjYyNykKICAgICAgICBzZWxlY3RlZEJvYXQgPSB2NjI3OwogICAgZW5kKTsKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjAodjYyOCkKICAgICAgICBsb2NhbCB2NjI5ID0gewogICAgICAgICAgICBbMV0gPSAiQnV5Qm9hdCIsCiAgICAgICAgICAgIFsyXSA9IHY2MjgKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2MjkpKTsKICAgICAgICB0YXNrLmRlbGF5KDIsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3OTEsIHY3OTIgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3OTI6SXNBKCJNb2RlbCIpIGFuZCAodjc5Mi5OYW1lID09IHY2MjgpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NiA9IHY3OTI6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHY4OTYgYW5kIG5vdCB2ODk2Lk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY1MTFbdjYyOF0gPSB2ODk2OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjEoKQogICAgICAgIGZvciB2NzIwLCB2NzIxIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIxIGFuZCB2NzIxLlBhcmVudCBhbmQgKHY3MjEuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjEuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuMih2NzIxLkNGcmFtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGZvciB2NzIyLCB2NzIzIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIzIGFuZCB2NzIzLlBhcmVudCBhbmQgKHY3MjMuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjMuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIHY1MTFbdjcyMl0gPSB2NzIzOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiTXVhIFRodXnhu4FuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICB2NTIwKHNlbGVjdGVkQm9hdCk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIFRodXnhu4FuIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICJEdXkgTmjhuqV0IFRodXnhu4FuIELhuqFuIE11YSDhu54gQ2jhu5cgQ2jhu41uIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjUyMSgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBsb2NhbCB2NTIyID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRlcnJvcnNoYXJrIiwgewogICAgICAgIFRpdGxlID0gIsSQw6FuaCBDw6EgTeG6rXAiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzApCiAgICAgICAgX0cuQXV0b1RlcnJvcnNoYXJrID0gdjYzMDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVGVycm9yc2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvVGVycm9yc2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0NCwgdjE0NDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDUuTmFtZSA9PSAiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvVGVycm9yc2hhcmsgb3Igbm90IHYxNDQ1LlBhcmVudCBvciAodjE0NDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTIzID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVBpcmFuaGEiLCB7CiAgICAgICAgVGl0bGUgPSAixJDDoW5oIFBpcmFuaGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzEpCiAgICAgICAgX0cuZmFybXBpcmFueWEgPSB2NjMxOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVQaXJhbmhhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuZmFybXBpcmFueWEgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ2LCB2MTQ0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0Ny5OYW1lID09ICJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuZmFybXBpcmFueWEgb3Igbm90IHYxNDQ3LlBhcmVudCBvciAodjE0NDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICLEkMOhbmggQ8OhIENvbiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjYzMikKICAgICAgICBfRy5BdXRvU2hhcmsgPSB2NjMyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTaGFyazpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9TaGFyayB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ4LCB2MTQ0OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0OS5OYW1lID09ICJTaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0OS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvU2hhcmsgb3Igbm90IHYxNDQ5LlBhcmVudCBvciAodjE0NDkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRmlzaENyZXciLCB7CiAgICAgICAgVGl0bGUgPSAixJDDoW5oIFTDoHUgQ8OhIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjMzKQogICAgICAgIF9HLkF1dG9GaXNoQ3JldyA9IHY2MzM7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUZpc2hDcmV3OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zpc2hDcmV3IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1MCwgdjE0NTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTEuTmFtZSA9PSAiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRmlzaENyZXcgb3Igbm90IHYxNDUxLlBhcmVudCBvciAodjE0NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVNoaXAiLCB7CiAgICAgICAgVGl0bGUgPSAixJDDoW5oIFTDoHUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzQpCiAgICAgICAgX0cuU2hpcCA9IHY2MzQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM1ID0gewogICAgICAgICAgICAiUGlyYXRlR3JhbmRCcmlnYWRlIiwKICAgICAgICAgICAgIlBpcmF0ZUJyaWdhZGUiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNCwgdjcyNSBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM1LCB2NzI1Lk5hbWUpIGFuZCB2NzI1OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjUuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI1OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5TaGlwIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzggPSBDaGVja1BpcmF0ZUJvYXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGF3bihUd2Vlbih2MTMzOC5FbmdpbmUuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDIwLCAwKSksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTMzOCBvciBub3QgdjEzMzguUGFyZW50IG9yICh2MTMzOC5IZWFsdGguVmFsdWUgPD0gMCkgb3Igbm90IENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUdob3N0U2hpcCIsIHsKICAgICAgICBUaXRsZSA9ICLEkMOhbmggVMOgdSBNYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYzNikKICAgICAgICBfRy5HaG9zdFNoaXAgPSB2NjM2OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVHaG9zdFNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM3ID0gewogICAgICAgICAgICAiRmlzaEJvYXQiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNiwgdjcyNyBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM3LCB2NzI3Lk5hbWUpIGFuZCB2NzI3OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjcuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI3OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5iamlyRmlzaEJvYXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzOSA9IENoZWNrUGlyYXRlQm9hdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKFR3ZWVuKHYxMzM5LkVuZ2luZS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gMjAsIDApLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCB2MTMzOS5QYXJlbnQgb3IgKHYxMzM5LkhlYWx0aC5WYWx1ZSA8PSAwKSBvciBub3QgQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLmJqaXJGaXNoQm9hdCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6Q2FwdHVyZUNvbnRyb2xsZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTIsIHYxNDUzIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1My5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTQsIHYxNDU1IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTU6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1NS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlYiLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1NiwgdjE0NTcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1NzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU3LlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTgsIHYxNDU5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1OS5Ub29sVGlwID09ICJHdW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyOCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkVsaXRlIik7CiAgICBsb2NhbCB2NTI5ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJUcuG6oW5nIFRow6FpIEVsaXRlIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTI5OlNldERlc2MoIkVsaXRlIEJvc3M6IOKche+4jyB8IEtpbGxlZDogICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjUyOTpTZXREZXNjKCJFbGl0ZSBCb3NzOiDinYzvuI8gfCBLaWxsZWQ6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTMwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVFbGl0ZSIsIHsKICAgICAgICBUaXRsZSA9ICLEkMOhbmggRWxpdGUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzgpCiAgICAgICAgX0cuQXV0b0VsaXRlID0gdjYzODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRWxpdGU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9FbGl0ZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGlhYmxvIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRlYW5kcmUiKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjYzLCB2MTY2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2NjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjQuTmFtZSA9PSAiRGlhYmxvIikgb3IgKHYxNjY0Lk5hbWUgPT0gIkRlYW5kcmUiKSBvciAodjE2NjQuTmFtZSA9PSAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjE2NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9FbGl0ZSA9PSBmYWxzZSkgb3IgKHYxNjY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjQuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMxID0gdjE2LlNlYTpBZGRTZWN0aW9uKCLEkOG6o28gQsOtIOG6qG4iKTsKICAgIGxvY2FsIHY1MzIgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiVHLhuqFuZyBUaMOhaSIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTMgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQ7CiAgICAgICAgICAgICAgICBpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NDMxIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjEwMCUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDkwNTIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiNzUlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQzNzMzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjUwJSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE1MDQwMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIyNSUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk2ODAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMTUlIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIwJSI7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4pyF77iPIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4p2M77iPIjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgdjUzMjpTZXREZXNjKCLEkOG6o28gQsOtIOG6qG46ICIgLi4gTWlyYWdlU3RhdHVzIC4uICIgfCBUcsSDbmcgVHLDsm46ICIgLi4gRnVsbE1vb25TdGF0dXMpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIENo4buXIENhbyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgVHdlZW5Ub0hpZ2hlc3RQb2ludCgpOwogICAgICAgIGVuZAogICAgfSk7CiAgICBmdW5jdGlvbiBUd2VlblRvSGlnaGVzdFBvaW50KCkKICAgICAgICBsb2NhbCB2NjM5ID0gZ2V0SGlnaGVzdFBvaW50KCk7CiAgICAgICAgaWYgdjYzOSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMih2NjM5LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjExLjg4LCAwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZ1bmN0aW9uIGdldEhpZ2hlc3RQb2ludCgpCiAgICAgICAgaWYgbm90IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICByZXR1cm4gbmlsOwogICAgICAgIGVuZAogICAgICAgIGZvciB2NzI4LCB2NzI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzI5OklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjcyOS5NZXNoSWQgPT0gInJieGFzc2V0aWQ6Ly84MzE5MDI3Njk1MTkxNCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjcyOTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjY2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRwQWR2YW5jZWQiLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIEFkdmFuY2VkIEZydWl0IERlYWxlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTcpCiAgICBfRy5BdXRvVHBBZHZhbmNlZCA9IHYyNTc7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9UcEFkdmFuY2VkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczMCA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuTlBDczpGaW5kRmlyc3RDaGlsZCgiQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIik7CiAgICAgICAgICAgIGlmICh2NzMwIGFuZCB2NzMwOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg1NiA9IHY3MzAuUHJpbWFyeVBhcnQgYW5kIHY3MzAuUHJpbWFyeVBhcnQuUG9zaXRpb24gOwogICAgICAgICAgICAgICAgaWYgdjg1NiB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg1NikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUd2VlbkdlYXIiLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIELDoW5oIFLEg25nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI1OCkKICAgIF9HLlR3ZWVuVG9HZWFyID0gdjI1ODsKZW5kKTsKdjE3LlRvZ2dsZVR3ZWVuR2VhcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuVHdlZW5Ub0dlYXIgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDAsIHYxMDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTA0MTpJc0EoIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQxLk1hdGVyaWFsID09IEVudW0uTWF0ZXJpYWwuTmVvbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2MTA0MS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjY4ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZWxvY2ttb29uIiwgewogICAgVGl0bGUgPSAiTmjDrG4gVHLEg25nIFbDoCBEw7luZyBU4buZYyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTkpCiAgICBfRy5BdXRvTG9ja01vb24gPSB2MjU5OwplbmQpOwp2MTcuVG9nZ2xlbG9ja21vb246U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9Mb2NrTW9vbiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk0ID0gZ2FtZS5MaWdodGluZzpHZXRNb29uRGlyZWN0aW9uKCk7CiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk1ID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCArICh2Nzk0ICogMTAwKSA7CiAgICAgICAgICAgICAgICBnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSA9IENGcmFtZS5sb29rQXQoZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCwgdjc5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvTG9ja01vb24gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiQWN0aXZhdGVBYmlsaXR5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjY5ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TYWJlciIsIHsKICAgIFRpdGxlID0gIlNhYmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MCkKICAgIF9HLkF1dG9fU2FiZXIgPSB2MjYwOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NhYmVyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiAoX0cuQXV0b19TYWJlciBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDIwMCkpIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5GaW5hbC5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5Eb29yLlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDE2MTIuNTU4ODQsIDM2Ljk3NzQxMzIsIDE0OC43MTk1NDMsIDAuMzcwOTEyNzksIDMuMDcxNzE1ZS05LCAtIDAuOTI4NjY3NzI0LCAzLjk3MDk5NWUtOCwgMSwgMS45MTY3OTM1ZS04LCAwLjkyODY2NzcyNCwgLSA0LjM5ODY5OGUtOCwgMC4zNzA5MTI3OSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTEuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMi5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUzLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTQuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNS5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE2MTIuNTU4ODQsIDM2Ljk3NzQxMzIsIDE0OC43MTk1NDMsIDAuMzcwOTEyNzksIDMuMDcxNzE1ZS05LCAtIDAuOTI4NjY3NzI0LCAzLjk3MDk5NWUtOCwgMSwgMS45MTY3OTM1ZS04LCAwLjkyODY2NzcyNCwgLSA0LjM5ODY5OGUtOCwgMC4zNzA5MTI3OSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRlc2VydC5CdXJuLlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUb3JjaCIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiVG9yY2giKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTExNC42MTQ3NSwgNS4wNDY3OTcyOCwgNDM1MC4yMjgwMywgLSAwLjY0ODQ2NjU4NywgLSAxLjI4Nzk5MDllLTksIDAuNzYxMjQzMTA1LCAtIDUuNzA2NTI5ZS0xMCwgMSwgMS4yMDU4NDU0ZS05LCAtIDAuNzYxMjQzMTA1LCAzLjQ3NTQ0ODhlLTEwLCAtIDAuNjQ4NDY2NTg3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNjEwLjAwNzU3LCAxMS41MDQ5ODU4LCAxNjQuMDAxNTg3LCAwLjk4NDgwNzU1MSwgLSAwLjE2NzcyMjI4NSwgLSAwLjA0NDk4MTgxNDksIDAuMTczNjQ5NDMsIDAuOTUxMjQ0MjM1LCAwLjI1NDkxMjE5OCwgMC4wMDAwMzQyMzcyOCwgLSAwLjI1ODg1MDUxNSwgMC45NjU5MTc0MDgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlNpY2tNYW4iKSB+PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiR2V0Q3VwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJDdXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIkZpbGxDdXAiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuQ3VwKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJTaWNrTWFuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSBuaWwpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI5NjcuNTk1MjEsIC0gNC45MTA4OTgyMSwgNTMyOC43MDcwMywgMC4zNDIyMDg1NjQsIC0gMC4wMjI3ODQ5MDU1LCAwLjkzOTM0NzgwNCwgMC4wMjUxNjAzODE2LCAwLjk5OTU2OTcxNCwgMC4wMTUwNzk2MTY2LCAtIDAuOTM5Mjg3MTI2LCAwLjAxODQ3Mzk3MzUsIDAuMzQyNjM0NTU5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3OTksIHYxODAwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMC5OYW1lID09ICJNb2IgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIgW0x2LiAxMjBdIFtCb3NzXSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE4MDA6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxODAwLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MDAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxODAwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgX0cuQXV0b19TYWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiUmVsaWMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTQwNC45MTUwNCwgMjkuOTc3MzI3MywgMy44MDU5ODExNiwgMC44NzY1MTQ0OTQsIDUuNjY5MDY4OGUtOSwgMC40ODEzNzU0NTYsIDIuNTM4NTJlLTgsIDEsIC0gNS43OTk5NTZlLTgsIC0gMC40ODEzNzU0NTYsIDYuMzA1NzI2NGUtOCwgMC44NzY1MTQ0OTQpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTYWJlciBFeHBlcnQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDYwLCB2MTQ2MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ2MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NjEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2MS5OYW1lID09ICJTYWJlciBFeHBlcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NjEuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IF9HLkF1dG9fU2FiZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUGxhY2VSZWxpYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjcwID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9Qb2xlVjEiLCB7CiAgICBUaXRsZSA9ICJQb2xlIFYxIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MSkKICAgIF9HLkF1dG9fUG9sZVYxID0gdjI2MTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9Qb2xlVjE6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KC0gNzc0OC4wMTg1NTQ2ODc1LCA1NjA2LjgwNjE1MjM0Mzc1LCAtIDIzMDUuODk4NjgxNjQwNjI1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19Qb2xlVjEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0MiwgdjEwNDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0My5OYW1lID09ICJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQzLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUG9sZVYxIG9yIG5vdCB2MTA0My5QYXJlbnQgb3IgKHYxMDQzLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDc3NDguMDE4NTU0Njg3NSwgNTYwNi44MDYxNTIzNDM3NSwgLSAyMzA1Ljg5ODY4MTY0MDYyNSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzIgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NhdyIsIHsKICAgIFRpdGxlID0gIkPGsGEgQ8OhIE3huq1wIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MikKICAgIF9HLkF1dG9fU2F3ID0gdjI2MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TYXc6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KC0gNjkwLjMzMDgxMDU0Njg4LCAxNS4wOTQyNTE2MzI2OSwgMTU4Mi4yMzgwMzcxMDk0KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TYXcgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ0LCB2MTA0NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ1Lk5hbWUgPT0gIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1NhdyBvciBub3QgdjEwNDUuUGFyZW50IG9yICh2MTA0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3MyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvV2FyZGVuIiwgewogICAgVGl0bGUgPSAiS2nhur9tIFF14bqjbiBOZ+G7pWMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjczOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYzKQogICAgX0cuQXV0b19XYXJkZW4gPSB2MjYzOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1dhcmRlbjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3NCA9IENGcmFtZS5uZXcoNTE4Ni4xNDY5NzI2NTYyNSwgMjQuODY2ODQyMjY5ODk3NDYsIDgzMi4xODg1Mzc1OTc2NTYyKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19XYXJkZW4gdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDYsIHYxMDQ3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDcuTmFtZSA9PSAiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19XYXJkZW4gb3Igbm90IHYxMDQ3LlBhcmVudCBvciAodjEwNDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUxODYuMTQ2OTcyNjU2MjUsIDI0Ljg2Njg0MjI2OTg5NzQ2LCA4MzIuMTg4NTM3NTk3NjU2MikpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjUzMyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVIYWxsb3ciLCB7CiAgICAgICAgVGl0bGUgPSAiTMaw4buhaSBIw6FpIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTMzOk9uQ2hhbmdlZChmdW5jdGlvbih2NjQwKQogICAgICAgIEF1dG9IYWxsb3dTeWN0aGUgPSB2NjQwOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVIYWxsb3c6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjIsIHYxNDYzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjE0NjMuTmFtZSwgIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTQ2My5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKEF1dG9IYWxsb3dTeWN0aGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhhbGxvdyBFc3NlbmNlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODkzMi4zMjIyNjU2MjUsIDE0Ni44MzE1NDI5Njg3NSwgNjA2Mi41NTA3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoQ0ZyYW1lLm5ldygtIDg5MzIuMzIyMjY1NjI1LCAxNDYuODMxNTQyOTY4NzUsIDYwNjIuNTUwNzgxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gOAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiSGFsbG93IEVzc2VuY2UiKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b0hhbGxvd1N5Y3RoZSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODU3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJCb25lcyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJ1eSIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gMSwKICAgICAgICAgICAgICAgICAgICBbNF0gPSAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg1NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM0ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZVlhbWEiLCB7CiAgICAgICAgVGl0bGUgPSAiWWFtYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNDpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MSkKICAgICAgICBfRy5BdXRvWWFtYSA9IHY2NDE7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVlhbWE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvWWFtYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSA+PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLldhdGVyZmFsbC5TZWFsZWRLYXRhbmEuSGFuZGxlLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3Igbm90IF9HLkF1dG9ZYW1hCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzNSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVUdXNoaXRhIiwgewogICAgICAgIFRpdGxlID0gIlR1c2hpdGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDIpCiAgICAgICAgQXV0b1R1c2hpdGEgPSB2NjQyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVUdXNoaXRhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b1R1c2hpdGEgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMb25nbWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzQwLCB2MTM0MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0MS5OYW1lID09ICgiTG9uZ21hIiBvciAodjEzNDEuTmFtZSA9PSAiTG9uZ21hIikpKSBhbmQgKHYxMzQxLkh1bWFub2lkLkhlYWx0aCA+IDApIGFuZCB2MTM0MTpJc0EoIk1vZGVsIikgYW5kIHYxMzQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTM0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKFNlbGVjdFdlYXBvbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvVHVzaGl0YSBvciBub3QgdjEzNDEuUGFyZW50IG9yICh2MTM0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwMjM4Ljg3NTk3NjU2MywgMzg5Ljc5MTI5MDI4MzIsIC0gOTU0OS43OTM5NDUzMTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzNiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVIb2x5IiwgewogICAgICAgIFRpdGxlID0gIsSQ4buRdCDEkHXhu5FjIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQzKQogICAgICAgIF9HLkF1dG9fSG9seV9Ub3JjaCA9IHY2NDM7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhvbHk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX0hvbHlfVG9yY2ggdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwNzUyLCA0MTcsIC0gOTM2NikpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTA3NTIsIDQxNywgLSA5MzY2KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExNjcyLCAzMzQsIC0gOTQ3NCkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTE2NzIsIDMzNCwgLSA5NDc0KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMTMyLCA1MjEsIC0gMTA2NTUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEyMTMyLCA1MjEsIC0gMTA2NTUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMzMzYsIDQ4NiwgLSA2OTg1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMzMzNiwgNDg2LCAtIDY5ODUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTM0ODksIDMzMiwgLSA3OTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMzQ4OSwgMzMyLCAtIDc5MjUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2NzUgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0NhbnZhbmRlciIsIHsKICAgIFRpdGxlID0gIkNhbnZhbmRlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjQpCiAgICBfRy5BdXRvX0NhbnZhbmRlciA9IHYyNjQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvQ2FudmFuZGVyOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldyg1MzExLjA3NDIxODc1LCA0MjYuMDI0MzgzNTQ0OTIxOSwgMTY1LjEyNzYyNDUxMTcxODc1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19DYW52YW5kZXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ4LCB2MTA0OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ5Lk5hbWUgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0OS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0NhbnZhbmRlciBvciBub3QgdjEwNDkuUGFyZW50IG9yICh2MTA0OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTMxMS4wNzQyMTg3NSwgNDI2LjAyNDM4MzU0NDkyMTksIDE2NS4xMjc2MjQ1MTE3MTg3NSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjc2ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9NdXNrZXRlZXJIYXQiLCB7CiAgICBUaXRsZSA9ICJNxakgTMOtbmggTmfhu7EgTMOibSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjUpCiAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IHYyNjU7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvTXVza2V0ZWVySGF0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoMC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX011c2tldGVlckhhdCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIpLktpbGxlZEJhbmRpdHMgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJGb3Jlc3QgUGlyYXRlIikgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICI1MCIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZvcmVzdCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NTksIHYxNTYwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU2MC5OYW1lID09ICJGb3Jlc3QgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zTW9uID0gdjE1NjAuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNTYwLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fTXVza2V0ZWVySGF0ID09IGZhbHNlKSBvciBub3QgdjE1NjAuUGFyZW50IG9yICh2MTU2MC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzIwNi40NTIxNDg0MzgsIDQyNS44OTE5OTgyOTEwMiwgLSA3OTY0LjU1MzcxMDkzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgIkNpdGl6ZW5RdWVzdCIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIpLktpbGxlZEJvc3MgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJDYXB0YWluIEVsZXBoYW50IikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2NSwgdjE2NjYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY2Lk5hbWUgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZUVsZXBoYW50ID0gdjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lRWxlcGhhbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fTXVza2V0ZWVySGF0ID09IGZhbHNlKSBvciAodjE2NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY2Ni5QYXJlbnQgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMzc0Ljg4OTY0ODQzOCwgNDIxLjI3NzUyNjg1NTQ3LCAtIDgyMjUuMjA4OTg0Mzc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLSA3Njc1LjQ4OTI1NzgxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE4MDApIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpID09IDIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNTEyLjEzODY3MTg3NSwgMzQwLjM5Mjc5MTc0ODA1LCAtIDk4NzIuODIwMzEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjc3ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9PYnNlcnZhdGlvblYyIiwgewogICAgVGl0bGUgPSAiSGFraSBRdWFuIFPDoXQgVjIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY2KQogICAgX0cuQXV0b19PYnNlcnZhdGlvblYyID0gdjI2NjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9PYnNlcnZhdGlvblYyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX09ic2VydmF0aW9uVjIgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKSA9PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b19NdXNrZXRlZXJIYXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhbmFuYSIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQXBwbGUiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBpbmVhcHBsZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3My4xODA2NjQwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTI0NDQuNzg1MTU2MjUsIDMzMi40MDM5NjExODE2NCwgLSA3NjczLjE4MDY2NDA2MjUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZydWl0IEJvd2wiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLSAxMDI2Ni45OTUxMTcxODgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMDkyMC4xMjUsIDYyNC4yMDI3NTg3ODkwNiwgLSAxMDI2Ni45OTUxMTcxODgpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsazIiLCAiU3RhcnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsazIiLCAiQnV5Iik7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NjEsIHYxNTYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE1NjIuTmFtZSA9PSAiQXBwbGUiKSBvciAodjE1NjIuTmFtZSA9PSAiQmFuYW5hIikgb3IgKHYxNTYyLk5hbWUgPT0gIlBpbmVhcHBsZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjIuSGFuZGxlLkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMTApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYxNTYyLkhhbmRsZSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY3OCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUmFpbmJvd0hha2kiLCB7CiAgICBUaXRsZSA9ICJIYWtpIDcgTcOgdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjcpCiAgICBfRy5BdXRvX1JhaW5ib3dIYWtpID0gdjI2NzsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9SYWluYm93SGFraTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KDAuMSkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19SYWluYm93SGFraSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSG9ybmVkTWFuIiwgIkJldCIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiU3RvbmUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU3RvbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU2MywgdjE1NjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1NjQuTmFtZSA9PSAiU3RvbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNTY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE1NjQuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA4Ni4xMTYyMSwgMzguODQyNTkwMywgNjc2OC43MTQzNikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIGFuZCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiSHlkcmEgTGVhZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkh5ZHJhIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjY5LCB2MTY3MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3MC5OYW1lID09ICJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNjcwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NzAuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU3MTMuOTg4NzcsIDYwMS45MjI5NzQsIDIwMi43NTEyNTEpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NjIsIHYxNzYzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzYzLk5hbWUgPT0gIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE3NjMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTc2My5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjg3Ny42MTc0MywgNDIzLjU1ODY4NSwgLSA3MjA3LjMxMDA2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NzQsIHYxNzc1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzc1Lk5hbWUgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNzc1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE3NzUuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTM0ODUuMDI4MywgMzMxLjcwOTI1OSwgLSA4MDEyLjQ4NzMpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgwMiwgdjE4MDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDMuTmFtZSA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE4MDMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTgwMy5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTMxMi4zNTk4NjMyODEzLCAyMC4xNDEyMDEwMTkyODcsIC0gMTAuMTU4NTM4ODE4MzU5KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSG9ybmVkTWFuIiwgIkJldCIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjc5ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9Ta3VsbEd1aXRhciIsIHsKICAgIFRpdGxlID0gIlNrdWxsIEd1aXRhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjgpCiAgICBfRy5BdXRvX1NrdWxsR3VpdGFyID0gdjI2ODsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9Ta3VsbEd1aXRhcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19Ta3VsbEd1aXRhciB0aGVuCiAgICAgICAgICAgICAgICBpZiAoR2V0V2VhcG9uSW52ZW50b3J5KCJTa3VsbCBHdWl0YXIiKSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIlNrZWxldG9uIE1hY2hpbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJzb3VsR3VpdGFyQnV5IiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uQ2FuZGxlMS5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQxLkxlZnQuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg3NjIuNjkxNDA2MjUsIDE3Ni44NDc4MzkzNTU0Njg3NSwgNjE3MS4zMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciBub3QgX0cuQXV0b19Ta3VsbEd1aXRhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDcuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ2LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNS5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDQuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMy5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDIuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMS5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlRhYmxldC5TZWdtZW50MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDE6RmluZEZpcnN0Q2hpbGQoIkNsaWNrRGV0ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0NCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NTMuNTk4NjMyODEyNSwgNjUuNjIzMzgyNTY4MzU5MzgsIDYwNDEuNTg4Mzc4OTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIG5vdCBfRy5BdXRvX1NrdWxsR3VpdGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0My5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDMuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0OC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDguQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkZpbmRGaXJzdENoaWxkKCJHaG9zdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE3OTggPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiR3VpdGFyUHV6emxlUHJvZ3Jlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIkdob3N0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTc5OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxpdmluZyBab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgwNCwgdjE4MDUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjE4MDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDUuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIwLCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDE2MC43ODcxMDkzNzUsIDEzOC42NjE2OTczODc2OTUzLCA1OTU1LjAzMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAxNjAuNzg3MTA5Mzc1LCAxMzguNjYxNjk3Mzg3Njk1MywgNTk1NS4wMzA3NjE3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyKSwgIkVycm9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg2NTMuMjA2MDU0Njg3NSwgMTQwLjk4NDg3ODU0MDAzOTA2LCA2MTYwLjAzMzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiksICJOb3RoaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oIldhaXQgRnVsbCBNb29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NjgxLjQ1ODk4NDM3NSwgNi4xMzk4ODA2NTcxOTYwNDUsIDYzNDEuMzcyMDcwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjgwID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9CdWRkeSIsIHsKICAgIFRpdGxlID0gIktp4bq/bSBCdWRkeSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjkpCiAgICBfRy5BdXRvX0J1ZGR5ID0gdjI2OTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9CdWRkeTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY4MSA9IENGcmFtZS5uZXcoLSA3MzEuMjAzNDMwMTc1NzgxMiwgMzgxLjU2NTg4NzQ1MTE3MTksIC0gMTExOTguNDk1MTE3MTg3NSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQnVkZHkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDUwLCB2MTA1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUxLk5hbWUgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0J1ZGR5IG9yIG5vdCB2MTA1MS5QYXJlbnQgb3IgKHYxMDUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDczMS4yMDM0MzAxNzU3ODEyLCAzODEuNTY1ODg3NDUxMTcxOSwgLSAxMTE5OC40OTUxMTcxODc1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2ODIgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0R1YWxLYXRhbmEiLCB7CiAgICBUaXRsZSA9ICJTb25nIEtp4bq/bSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzApCiAgICBfRy5BdXRvX0R1YWxLYXRhbmEgPSB2MjcwOwplbmQpOwp2MTcuVG9nZ2xlQXV0b0R1YWxLYXRhbmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fRHVhbEthdGFuYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUdXNoaXRhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiWWFtYSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJMb2FkSXRlbSIsICJUdXNoaXRhIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fRHVhbEthdGFuYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA2KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4NDIsIHYxODQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE4NDMuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIEJvc3MiKSBvciAodjE4NDMuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODQzLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIHBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE4NDMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgoQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMjUzLjU0MTk5MjE4NzUsIDU5OC44OTk5NjMzNzg5MDYyLCAtIDY1NDYuODM4ODY3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk15dGhvbG9naWNhbCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDUyLCB2MTA1MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUzLk5hbWUgPT0gIk15dGhvbG9naWNhbCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNTMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIC0gMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8xID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ1MS40NjQ4NDM3NSwgNTQzLjcxMjg5MDYyNSwgLSA2OTYxLjAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NTgsIHY4NTkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg1OTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg1OS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODU5LkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZm9yIHY4NjAsIHY4NjEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2MTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg2MS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODYxLkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3MzEsIHY3MzIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9ZYW1hXzIgYW5kIHY3MzI6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSBhbmQgKCh2NzMyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zc0VzcC5Qb3NpdGlvbikubWFnbml0dWRlIDw9IDMwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvc3NFc3A7CiAgICAgICAgICAgICAgICAgICAgdjczMi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NzMyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlWZWxvY2l0eSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNTggPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIsIHY3MzIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMDU4Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMSwgMSwgMSkgKiBtYXRoLmh1Z2UgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTA1OC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg2NSwgdjg2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODY2OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjg2Ni5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY4NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2ODY2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMiA9PSBmYWxzZSkgb3Igbm90IHY4NjYuUGFyZW50IG9yICh2ODY2Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3Qgdjg2NjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDIsIHYxMzQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjEzNDM6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lTW9uICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uU3VtbW9uZXIuRGV0ZWN0aW9uLkNGcmFtZSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlbGxEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVsbCdzIE1lc3NlbmdlciBbTHYuIDIyMDBdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NDEsIHYxNjQyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NDIuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjQyLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY0Mi5OYW1lID09ICJIZWxsJ3MgTWVzc2VuZ2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NDIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxNjQyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjQyLlBhcmVudCBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW0oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAzKQogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIgW0x2LiAyMTAwXSBbUmFpZCBCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjcxLCB2MTY3MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3Mi5OYW1lID09ICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjcyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVsbERpbWVuc2lvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU3MC4wMzMyMDMxMjUsIDMxNS45MzQ2OTIzODI4MTI1LCA2NzI2Ljg5MzA2NjQwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQm9uZXMiLCAiQnV5IiwgMSwgMSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMSB0aGVuCiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTQ2Ljk5MDIzNDM3NSwgMjEuMTM5ODkyNTc4MTI1LCA0Njg2LjExNDI1NzgxMjUpKTsKICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDYxMjAuMDU3NjE3MTg3NSwgMTYuNDU1NzgwMDI5Mjk2ODc1LCAtIDIyNTAuNjk3MjY1NjI1KSk7CiAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTMzLjIzOTI1NzgxMjUsIDcuMjU0NDQ1NTUyODI1OTI4LCAtIDgzNzIuNjk5MjE4NzUpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNjEsIHYxMDYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9UdXNoaXRhXzIgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwNjIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwNjIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMDYyLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxMDYyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDYyLlBhcmVudCBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDU1NDUuMTI0MDIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTc2LjYxNjQ1NTA3ODEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9UdXNoaXRhXzMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiBbTHYuIDIxNzVdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjQsIHYxNDY1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lk5hbWUgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDY1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE0NjUuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDcwOS4zMTMyOTM0NTcwMzEyLCAzODEuNjAwNTg1OTM3NSwgLSAxMTAxMS4zOTY0ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhdmVuJ3MgR3VhcmRpYW4gW0x2LiAyMjAwXSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjUwLCB2MTY1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY1MS5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NTEuTmFtZSA9PSAiSGVhdmVuJ3MgR3VhcmRpYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NTEuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY1MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE2NTEuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NTEuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fRHVhbEthdGFuYSBvciBub3QgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjUzNyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVGYWN0b3J5IiwgewogICAgICAgIFRpdGxlID0gIsSQw6FuaCBOaMOgIE3DoXkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDQpCiAgICAgICAgX0cuRmFjdG9yeSA9IHY2NDQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUZhY3Rvcnk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5GYWN0b3J5IHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzQ0LCB2MTM0NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEzNDUuTmFtZSA9PSAiQ29yZSIpIGFuZCAodjEzNDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRmFjdG9yeSBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTM0NS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxMzQ1LlBhcmVudCBvciAodjEzNDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChfRy5GYWN0b3J5ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDb3JlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRmFjdG9yeSBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KDQ0OC40Njc1NiwgMTk5LjM1Njc4MSwgLSA0NDEuMzg5MjUyKSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY4MyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvRmFybVN3YW4iLCB7CiAgICBUaXRsZSA9ICLEkMOhbmggU3dhbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzEpCiAgICBfRy5BdXRvX0Zhcm1Td2FuID0gdjI3MTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtU3dhbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm1Td2FuIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRG9uIFN3YW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDYzLCB2MTA2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2NC5OYW1lID09ICJEb24gU3dhbiIpIGFuZCAodjEwNjQuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMDY0OklzQSgiTW9kZWwiKSBhbmQgdjEwNjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvRmFybVN3YW4gPT0gZmFsc2UpIG9yICh2MTA2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuNTM3NjY2MzIwODAxLCA5MDUuNDgyOTEwMTU2MjUpKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoMjI4NC45MTIxMDkzNzUsIDE1LjUzNzY2NjMyMDgwMSwgOTA1LjQ4MjkxMDE1NjI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgb3IgKF9HLkF1dG9GYXJtU3dhbiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY4NCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUmVuZ29rdSIsIHsKICAgIFRpdGxlID0gIlJlbmdva3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjcyKQogICAgX0cuQXV0b19SZWdva3UgPSB2MjcyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Jlbmdva3U6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fUmVnb2t1IHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIaWRkZW4gS2V5Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg2NTcxLjEyMDExNzE4NzUsIDI5OS4yMzAyODU2NDQ1MywgLSA2OTY3Ljg0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNub3cgTHVya2VyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJBcmN0aWMgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY2LCB2MTQ2NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodjE0NjcuTmFtZSA9PSAiU25vdyBMdXJrZXIiKSBvciAodjE0NjcuTmFtZSA9PSAiQXJjdGljIFdhcnJpb3IiKSkgYW5kICh2MTQ2Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2Ny5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSBvciAoX0cuQXV0b19SZWdva3UgPT0gZmFsc2UpIG9yIG5vdCB2MTQ2Ny5QYXJlbnQgb3IgKHYxNDY3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU0MzkuNzE2Nzk2ODc1LCA4NC40MjA5NDQyMTM4NjcsIC0gNjcxNS4xNjM1NzQyMTg4KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwppZiAoU2VhMiBvciBTZWEzKSB0aGVuCiAgICBsb2NhbCB2NTM4ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhha2lDb2xvciIsIHsKICAgICAgICBUaXRsZSA9ICJNdWEgTcOgdSBIYWtpIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM4Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQ1KQogICAgICAgIF9HLkF1dG9fQnV5X0VuY2hhbmNlbWVudCA9IHY2NDU7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhha2lDb2xvcjpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fQnV5X0VuY2hhbmNlbWVudCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODY3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJDb2xvcnNEZWFsZXIiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICIyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NjcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTM5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVTd29yZExlbmdlbmQiLCB7CiAgICAgICAgVGl0bGUgPSAiTXVhIEtp4bq/bSBIdXnhu4FuIFRob+G6oWkiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDYpCiAgICAgICAgX0cuQnV5TGVuZ2VuZFN3b3JkID0gdjY0NjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU3dvcmRMZW5nZW5kOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKF9HLkJ1eUxlbmdlbmRTd29yZCBvciBUcmlwbGVfQSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4OTcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMZWdlbmRhcnlTd29yZERlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICIyIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg5NykpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjU0MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRXZvUmFjZSIsIHsKICAgICAgICBUaXRsZSA9ICJOw6JuZyBU4buZYyBWMiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjU0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NykKICAgICAgICBfRy5BdXRvRXZvUmFjZSA9IHY2NDc7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUV2b1JhY2U6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRXZvUmFjZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZTpGaW5kRmlyc3RDaGlsZCgiRXZvbHZlZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMiwgLSAwLjczMDQ4NDkwMywgNi4zOTAxNDFlLTgsIC0gMC42ODI5Mjg4NiwgMy41OTk2MzIyZS04LCAxLCA1LjUwNjY3MDNlLTgsIDAuNjgyOTI4ODYsIDEuNTY0MjQ2N2UtOCwgLSAwLjczMDQ4NDkwMykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMikgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MzQsIHYxODM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgzNS5OYW1lID09ICJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTgzNS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBvciBub3QgdjE4MzUuUGFyZW50IG9yICh2MTgzNS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkF1dG9Fdm9SYWNlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA1Njg1LjkyMzMzOTg0MzgsIDQ4LjQ4MDEyNTQyNzI0NiwgLSA4NTMuMjM3MjQzNjUyMzQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZApsb2NhbCB2ODUgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9UIiwgewogICAgVGl0bGUgPSAiQuG6rXQgVOG7mWMgVjMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjczKQogICAgX0cuQXV0b1QgPSB2MjczOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Q6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9UIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIkFjdGl2YXRlQWJpbGl0eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4NiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1kiLCB7CiAgICBUaXRsZSA9ICJC4bqtdCBU4buZYyBWNCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzQpCiAgICBfRy5BdXRvWSA9IHYyNzQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvWTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b1kgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODcgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9LZW4iLCB7CiAgICBUaXRsZSA9ICJC4bqtdCBIYWtpIFF1YW4gU8OidCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzUpCiAgICBfRy5BdXRvS2VuID0gdjI3NTsKICAgIGlmIHYyNzUgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIHRydWUpOwogICAgZWxzZQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIGZhbHNlKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlQXV0b0tlbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0tlbiB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLCB0cnVlKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODggPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVNhdmVTcGF3biIsIHsKICAgIFRpdGxlID0gIkzGsHUgxJBp4buDbSBI4buTaSBTaW5oIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NikKICAgIF9HLlNhdmVTcGF3biA9IHYyNzY7CiAgICBpZiB2Mjc2IHRoZW4KICAgICAgICBsb2NhbCB2NjQ4ID0gewogICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NDgpKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlU2F2ZVNwYXduOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5TYXZlU3Bhd24gdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjc5NyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Nzk3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg5ID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlV0aWwuQ2FtZXJhU2hha2VyKTsKdjg5OlN0b3AoKTsKbG9jYWwgdjkwID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVCcmluZ01vYiIsIHsKICAgIFRpdGxlID0gIkdvbSBRdcOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NykKICAgIF9HLkJyaW5nTW9iID0gdjI3NzsKZW5kKTsKdjE3LlRvZ2dsZUJyaW5nTW9iOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciB2NzMzLCB2NzM0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKF9HLkJyaW5nTW9iIGFuZCBicmluZ21vYikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5OYW1lID09IE1vbkZhcm0pIGFuZCB2NzM0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjczNC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjczNC5OYW1lID09ICJGYWN0b3J5IFN0YWZmIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMDAwMDAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY3MzQuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY3MzQuTmFtZSA9PSBNb25GYXJtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3MuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwMDAwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhcm1Qb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY3MzQuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2OTEgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVJlbW92ZU5vdGlmeSIsIHsKICAgIFRpdGxlID0gIljDs2EgVGjDtG5nIELDoW8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjkxOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc4KQogICAgUmVtb3ZlTm90aWZ5ID0gdjI3ODsKZW5kKTsKdjE3LlRvZ2dsZVJlbW92ZU5vdGlmeTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIFJlbW92ZU5vdGlmeSB0aGVuCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTm90aWZpY2F0aW9ucy5FbmFibGVkID0gZmFsc2U7CiAgICAgICAgZWxzZQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk5vdGlmaWNhdGlvbnMuRW5hYmxlZCA9IHRydWU7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjkyID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVXaGl0ZSIsIHsKICAgIFRpdGxlID0gIk3DoG4gSMOsbmggVHLhuq9uZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2OTI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzkpCiAgICBfRy5XaGl0ZVNjcmVlbiA9IHYyNzk7CiAgICBpZiAoX0cuV2hpdGVTY3JlZW4gPT0gdHJ1ZSkgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOlNldDNkUmVuZGVyaW5nRW5hYmxlZChmYWxzZSk7CiAgICBlbHNlaWYgKF9HLldoaXRlU2NyZWVuID09IGZhbHNlKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6U2V0M2RSZW5kZXJpbmdFbmFibGVkKHRydWUpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVXaGl0ZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY5MyA9IHYxNi5TZXR0aW5nOkFkZFNlY3Rpb24oIkvEqSBOxINuZyBUaMO0bmcgVGjhuqFvIik7CmxvY2FsIHY5NCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlWiIsIHsKICAgIFRpdGxlID0gIkvEqSBOxINuZyBaIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgwKQogICAgU2tpbGxaID0gdjI4MDsKZW5kKTsKdjE3LlRvZ2dsZVo6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlWCIsIHsKICAgIFRpdGxlID0gIkvEqSBOxINuZyBYIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgxKQogICAgU2tpbGxYID0gdjI4MTsKZW5kKTsKdjE3LlRvZ2dsZVg6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQyIsIHsKICAgIFRpdGxlID0gIkvEqSBOxINuZyBDIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgyKQogICAgU2tpbGxDID0gdjI4MjsKZW5kKTsKdjE3LlRvZ2dsZUM6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NyA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlViIsIHsKICAgIFRpdGxlID0gIkvEqSBOxINuZyBWIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgzKQogICAgU2tpbGxWID0gdjI4MzsKZW5kKTsKdjE3LlRvZ2dsZVY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlRiIsIHsKICAgIFRpdGxlID0gIkvEqSBOxINuZyBGIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI4NCkKICAgIFNraWxsRiA9IHYyODQ7CmVuZCk7CnYxNy5Ub2dnbGVGOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTkgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJUaMO0bmcgVGluIiwKICAgIENvbnRlbnQgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG4iIC4uICJUw6puIDogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGlzcGxheU5hbWUgLi4gIiAoQCIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgLi4gIilcbiIgLi4gIkPhuqVwIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlIC4uICJcbiIgLi4gIlRp4buBbiA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5CZWxpLlZhbHVlIC4uICJcbiIgLi4gIsSQaeG7g20gRiA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5GcmFnbWVudHMuVmFsdWUgLi4gIlxuIiAuLiAiVGnhu4FuIFRydXkgTsOjIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUgLi4gIlxuIiAuLiAiTcOhdTogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAuLiAiLyIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5NYXhIZWFsdGggLi4gIlxuIiAuLiAiTsSDbmcgTMaw4bujbmcgOiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5LlZhbHVlIC4uICIvIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5NYXhWYWx1ZSAuLiAiXG4iIC4uICJU4buZYyA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlIC4uICJcbiIgLi4gIlRyw6FpIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUgLi4gIlxuIiAuLiAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIgp9KTsKbG9jYWwgdjEwMCA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRo4budaSBHaWFuIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgZnVuY3Rpb24gdjEwMSgpCiAgICBsb2NhbCB2Mjg1ID0gb3MuZGF0ZSgiKnQiKTsKICAgIGxvY2FsIHYyODYgPSB2Mjg1LmhvdXIgJSAyNCA7CiAgICBsb2NhbCB2Mjg3ID0gKCh2Mjg2IDwgMTIpIGFuZCAiQU0iKSBvciAiUE0iIDsKICAgIGxvY2FsIHYyODggPSBzdHJpbmcuZm9ybWF0KCIlMDJpOiUwMmk6JTAyaSAlcyIsICgodjI4NiAtIDEpICUgMTIpICsgMSwgdjI4NS5taW4sIHYyODUuc2VjLCB2Mjg3KTsKICAgIGxvY2FsIHYyODkgPSBzdHJpbmcuZm9ybWF0KCIlMDJkLyUwMmQvJTA0ZCIsIHYyODUuZGF5LCB2Mjg1Lm1vbnRoLCB2Mjg1LnllYXIpOwogICAgbG9jYWwgdjI5MCA9IGdhbWU6R2V0U2VydmljZSgiTG9jYWxpemF0aW9uU2VydmljZSIpOwogICAgbG9jYWwgdjI5MSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgbG9jYWwgdjI5MiA9IHYyOTEuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2MjkzID0gdjI5Mi5OYW1lOwogICAgbG9jYWwgdjI5NCA9ICJVbmtub3duIjsKICAgIGxvY2FsIHYyOTUsIHYyOTYgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcmV0dXJuIHYyOTA6R2V0Q291bnRyeVJlZ2lvbkZvclBsYXllckFzeW5jKHYyOTIpOwogICAgZW5kKTsKICAgIGlmIHYyOTUgdGhlbgogICAgICAgIHYyOTQgPSB2Mjk2OwogICAgZW5kCiAgICB2MTAwOlNldERlc2ModjI4OSAuLiAiLSIgLi4gdjI4OCAuLiAiIFsgIiAuLiB2Mjk0IC4uICIgXSIpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIHYxMDEoKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOldhaXQoKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTAyID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiVGjhu51pIEdpYW4gTcOheSBDaOG7pyIsCiAgICBDb250ZW50ID0gIiIKfSk7CmxvY2FsIGZ1bmN0aW9uIHYxMDMoKQogICAgbG9jYWwgdjI5NyA9IG1hdGguZmxvb3Iod29ya3NwYWNlLkRpc3RyaWJ1dGVkR2FtZVRpbWUgKyAwLjUpOwogICAgbG9jYWwgdjI5OCA9IG1hdGguZmxvb3IodjI5NyAvICg2MCBeIDIpKSAlIDI0IDsKICAgIGxvY2FsIHYyOTkgPSBtYXRoLmZsb29yKHYyOTcgLyA2MCkgJSA2MCA7CiAgICBsb2NhbCB2MzAwID0gdjI5NyAlIDYwIDsKICAgIHYxMDI6U2V0RGVzYyhzdHJpbmcuZm9ybWF0KCIlMDJkIFRp4bq/bmctJTAyZCBQaMO6dC0lMDJkIEdpw6J5IiwgdjI5OCwgdjI5OSwgdjMwMCkpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbCh2MTAzKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTA0ID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAixJDhuqNvIExldmlhdGhhbiIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgIHYxMDQ6U2V0RGVzYygi4pyFIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxMDQ6U2V0RGVzYygi4p2MIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjEwNSA9IHYxNi5TdGF0dXM6QWRkSW5wdXQoIklucHV0IiwgewogICAgVGl0bGUgPSAiSm9iIElEIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIkTDoW4gSm9iIElEIFbDoG8gxJDDonkiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMwMSkKICAgICAgICBfRy5Kb2IgPSB2MzAxOwogICAgZW5kCn0pOwp2MTYuU3RhdHVzOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJC4bqvdCDEkOG6p3UgVGhhbSBHaWEgSm9iIElEIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUucGxhY2VJZCwgX0cuSm9iLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgZW5kCn0pOwp2MTYuU3RhdHVzOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTYW8gQ2jDqXAgSm9iIElEIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQodG9zdHJpbmcoZ2FtZS5Kb2JJZCkpOwogICAgZW5kCn0pOwpsb2NhbCB2MTA2ID0gdjE2LlN0YXR1czpBZGRUb2dnbGUoIk15VG9nZ2xlIiwgewogICAgVGl0bGUgPSAiU3BhbSBUaGFtIEdpYSBKb2IgSUQiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzAyKQogICAgX0cuSm9pbiA9IHYzMDI7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkpvaW4gdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUucGxhY2VJZCwgX0cuSm9iLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDcgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVNZWxlZSIsIHsKICAgIFRpdGxlID0gIk7Dom5nIMSQw6FuaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzAzKQogICAgX0cuQXV0b19TdGF0c19NZWxlZSA9IHYzMDM7CmVuZCk7CnYxNy5Ub2dnbGVNZWxlZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDggPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVEZSIsIHsKICAgIFRpdGxlID0gIk7Dom5nIE3DoXUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwODpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNCkKICAgIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSA9IHYzMDQ7CmVuZCk7CnYxNy5Ub2dnbGVEZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDkgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVTd29yZCIsIHsKICAgIFRpdGxlID0gIk7Dom5nIEtp4bq/bSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzA1KQogICAgX0cuQXV0b19TdGF0c19Td29yZCA9IHYzMDU7CmVuZCk7CnYxNy5Ub2dnbGVTd29yZDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMTAgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVHdW4iLCB7CiAgICBUaXRsZSA9ICJOw6JuZyBTw7puZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzA2KQogICAgX0cuQXV0b19TdGF0c19HdW4gPSB2MzA2OwplbmQpOwp2MTcuVG9nZ2xlR3VuOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMSA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUZydWl0IiwgewogICAgVGl0bGUgPSAiTsOibmcgVHLDoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNykKICAgIF9HLkF1dG9fU3RhdHNfRGV2aWxfRnJ1aXQgPSB2MzA3OwplbmQpOwp2MTcuVG9nZ2xlRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0RldmlsX0ZydWl0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczNyA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiRGVtb24gRnJ1aXQiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM3KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19HdW4gdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM4ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJHdW4iLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM4KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19Td29yZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzkgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIlN3b3JkIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjczOSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDAgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkRlZmVuc2UiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19NZWxlZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIk1lbGVlIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMTIgPSB7fTsKZm9yIHYzMDgsIHYzMDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHRhYmxlLmluc2VydCh2MTEyLCB2MzA5Lk5hbWUpOwplbmQKbG9jYWwgdjExMyA9IHYxNi5QbGF5ZXI6QWRkRHJvcGRvd24oIlNlbGVjdGVkUGx5IiwgewogICAgVGl0bGUgPSAiQ2jhu41uIE5nxrDhu51pIENoxqFpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB2MTEyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTEzOlNldFZhbHVlKF9HLlNlbGVjdFBseSk7CnYxMTM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTApCiAgICBfRy5TZWxlY3RQbHkgPSB2MzEwOwplbmQpOwp2MTYuUGxheWVyOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJU4bqjaSBM4bqhaSBOZ8aw4budaSBDaMahaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdGFibGUuY2xlYXIodjExMik7CiAgICAgICAgZm9yIHY1NDEsIHY1NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYxMTIsIHY1NDIuTmFtZSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxMTQgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlVGVsZXBvcnQiLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIE5nxrDhu51pIENoxqFpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTEpCiAgICBfRy5UZWxlcG9ydFBseSA9IHYzMTE7CiAgICBpZiAodjMxMSA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBBdXRvSGFraSgpOwogICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlVGVsZXBvcnQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5UZWxlcG9ydFBseSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVyczpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RQbHkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoZ2FtZS5QbGF5ZXJzW19HLlNlbGVjdFBseV0uQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5QbGF5ZXI6QWRkU2VjdGlvbigiS2jDoWMiKTsKbG9jYWwgdjExNSA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVOb0NsaXAiLCB7CiAgICBUaXRsZSA9ICLEkGkgWHV5w6puIFTGsOG7nW5nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjExNTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMikKICAgIF9HLkxPZiA9IHYzMTI7CmVuZCk7CnYxNy5Ub2dnbGVOb0NsaXA6U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5MT2YgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NjgsIHY4NjkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4Njk6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg2OS5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMTYgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlV2Fsa29uV2F0ZXIiLCB7CiAgICBUaXRsZSA9ICLEkGkgVHLDqm4gTsaw4bubYyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxMTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTMpCiAgICBfRy5XYWxrb25XYXRlciA9IHYzMTM7CmVuZCk7CnYxNy5Ub2dnbGVXYWxrb25XYXRlcjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLldhbGtvbldhdGVyIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgMTEyLCAxMDAwKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIldhdGVyQmFzZS1QbGFuZSJdLlNpemUgPSBWZWN0b3IzLm5ldygxMDAwLCA4MCwgMTAwMCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjExNyA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVFbmFibGVQdnAiLCB7CiAgICBUaXRsZSA9ICJC4bqtdCBQVlAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExNzpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNCkKICAgIF9HLkVuYWJsZWRQdlAgPSB2MzE0OwplbmQpOwp2MTcuVG9nZ2xlRW5hYmxlUHZwOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5FbmFibGVkUHZQIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5QdnBEaXNhYmxlZC5WaXNpYmxlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbmFibGVQdnAiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMTggPSB2MTYuVGVsZXBvcnQ6QWRkU2VjdGlvbigiVGjhur8gR2nhu5tpIik7CmxvY2FsIHYxMTkgPSB2MTYuVGVsZXBvcnQ6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2VhMiIsIHsKICAgIFRpdGxlID0gIk5oaeG7h20gVuG7pSBRdWEgU2VhIDIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExOTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNSkKICAgIF9HLkF1dG9fU2VhMiA9IHYzMTU7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2VhMjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU2VhMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCh2ODAwID49IDcwMCkgYW5kIFdvcmxkMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuQ2FuQ29sbGlkZSA9PSBmYWxzZSkgYW5kIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5UcmFuc3BhcmVuY3kgPT0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNDYgPSBDRnJhbWUubmV3KDQ4NDkuMjk4ODMsIDUuNjUxMzgxNDksIDcxOS42MTE4NzcpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKCh2MTM0Ni5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3IgKF9HLkF1dG9fU2VhMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIiwgIkRldGVjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiS2V5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMzQ3LjcxMjQsIDM3LjM3NTE2MDIsIC0gMTMyNS42NDg4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgoVmVjdG9yMy5uZXcoMTM0Ny43MTI0LCAzNy4zNzUxNjAyLCAtIDEzMjUuNjQ4OCkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIChfRy5BdXRvX1NlYTIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5DYW5Db2xsaWRlID09IGZhbHNlKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLlRyYW5zcGFyZW5jeSA9PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjgwLCB2MTY4MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2ODEuTmFtZSA9PSAiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3QgdjE2ODEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY4MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE2ODE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNjgxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lU2Vjb25kID0gdjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lU2Vjb25kOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19TZWEyIG9yIG5vdCB2MTY4MS5QYXJlbnQgb3IgKHYxNjgxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwgMTAsIDcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTIwID0gdjE2LlRlbGVwb3J0OkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NlYTMiLCB7CiAgICBUaXRsZSA9ICJOaGnhu4dtIFbhu6UgUXVhIFNlYSAzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTYpCiAgICBfRy5BdXRvX1NlYTMgPSB2MzE2OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NlYTM6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvU2VhMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxNTAwKSBhbmQgV29ybGQyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0xldmVsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzWydDb21tRl8nXTpJbnZva2VTZXJ2ZXIoIlpRdWVzdFByb2dyZXNzIiwgIkdlbmVyYWwiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxOTI2LjMyMjE0MzU1NDcsIDEyLjgxOTg1MTg3NTMwNSwgMTczOC4zMDkyMDQxMDE2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDE5MjYuMzIyMTQzNTU0NywgMTIuODE5ODUxODc1MzA1LCAxNzM4LjMwOTIwNDEwMTYpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCAiQmVnaW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS44KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NzgsIHYxNTc5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU3OS5OYW1lID09ICJyaXBfaW5kcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVRoaXJkID0gdjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVUaGlyZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsWm91Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvU2VhMyA9PSBmYWxzZSkgb3IgKHYxNTc5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE1NzkuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSBhbmQgKChDRnJhbWUubmV3KC0gMjY4ODAuOTMzNTkzNzUsIDIyLjg0ODU1NDYxMTIwNiwgNDczLjE4OTUxNDE2MDE2KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAyNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJp4bq/biAxIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxNYWluIik7CiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmnhur9uIDIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpOwogICAgZW5kCn0pOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNlYSAzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxab3UiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlRlbGVwb3J0OkFkZFNlY3Rpb24oIsSQ4bqjbyIpOwppZiBTZWExIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIldpbmRNaWxsIiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiTWlkZGxlIFRvd24iLAogICAgICAgICJKdW5nbGUiLAogICAgICAgICJQaXJhdGUgVmlsbGFnZSIsCiAgICAgICAgIkRlc2VydCIsCiAgICAgICAgIlNub3cgSXNsYW5kIiwKICAgICAgICAiTWFyaW5lRm9yZCIsCiAgICAgICAgIkNvbG9zc2V1bSIsCiAgICAgICAgIlNreSBJc2xhbmQgMSIsCiAgICAgICAgIlNreSBJc2xhbmQgMiIsCiAgICAgICAgIlNreSBJc2xhbmQgMyIsCiAgICAgICAgIlByaXNvbiIsCiAgICAgICAgIk1hZ21hIFZpbGxhZ2UiLAogICAgICAgICJVbmRlciBXYXRlciBJc2xhbmQiLAogICAgICAgICJGb3VudGFpbiBDaXR5IiwKICAgICAgICAiU2hhbmsgUm9vbSIsCiAgICAgICAgIk1vYiBJc2xhbmQiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJUaGUgQ2FmZSIsCiAgICAgICAgIkZyaXN0IFNwb3QiLAogICAgICAgICJEYXJrIEFyZWEiLAogICAgICAgICJGbGFtaW5nbyBNYW5zaW9uIiwKICAgICAgICAiRmxhbWluZ28gUm9vbSIsCiAgICAgICAgIkdyZWVuIFpvbmUiLAogICAgICAgICJGYWN0b3J5IiwKICAgICAgICAiQ29sb3NzdWltIiwKICAgICAgICAiWm9tYmllIElzbGFuZCIsCiAgICAgICAgIlR3byBTbm93IE1vdW50YWluIiwKICAgICAgICAiUHVuayBIYXphcmQiLAogICAgICAgICJDdXJzZWQgU2hpcCIsCiAgICAgICAgIkljZSBDYXN0bGUiLAogICAgICAgICJGb3Jnb3R0ZW4gSXNsYW5kIiwKICAgICAgICAiVXNzb3AgSXNsYW5kIiwKICAgICAgICAiTWluaSBTa3kgSXNsYW5kIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiTWFuc2lvbiIsCiAgICAgICAgIlBvcnQgVG93biIsCiAgICAgICAgIkdyZWF0IFRyZWUiLAogICAgICAgICJDYXN0bGUgT24gVGhlIFNlYSIsCiAgICAgICAgIk1pbmlTa3kiLAogICAgICAgICJIeWRyYSBJc2xhbmQiLAogICAgICAgICJGbG9hdGluZyBUdXJ0bGUiLAogICAgICAgICJIYXVudGVkIENhc3RsZSIsCiAgICAgICAgIkljZSBDcmVhbSBJc2xhbmQiLAogICAgICAgICJQZWFudXQgSXNsYW5kIiwKICAgICAgICAiQ2FrZSBJc2xhbmQiLAogICAgICAgICJDb2NvYSBJc2xhbmQiLAogICAgICAgICJDYW5keSBJc2xhbmQiLAogICAgICAgICJUaWtpIE91dHBvc3QiCiAgICB9OwplbmQKbG9jYWwgdjEyMSA9IHYxNi5UZWxlcG9ydDpBZGREcm9wZG93bigiRHJvcGRvd25Jc2xhbmQiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gxJDhuqNvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBJc2xhbmRMaXN0LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTIxOlNldFZhbHVlKF9HLlNlbGVjdElzbGFuZCk7CnYxMjE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTcpCiAgICBfRy5TZWxlY3RJc2xhbmQgPSB2MzE3OwplbmQpOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gxJDhuqNvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJXaW5kTWlsbCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoOTc5Ljc5ODk1MDE5NTMxLCAxNi41MTY2MTMwMDY1OTIsIDE0MjkuMDQ2NjMwODU5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYXJpbmUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjU2Ni40Mjk2ODc1LCA2Ljg1NTY2ODA2NzkzMjEsIDIwNDUuMjU2MTAzNTE1NikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaWRkbGUgVG93biIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSnVuZ2xlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2MTIuNzk1Nzc2MzY3MiwgMzYuODUyMDgxMjk4ODI4LCAxNDkuMTI4NDMzMjI3NTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUGlyYXRlIFZpbGxhZ2UiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTE4MS4zMDkzMjYxNzE5LCA0Ljc1MTQ5MDU5Mjk1NjUsIDM4MDMuNTQ1NjU0Mjk2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJEZXNlcnQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDk0NC4xNTc4OTc5NDkyMiwgMjAuOTE5NzI5MjMyNzg4LCA0MzczLjMwMDI5Mjk2ODgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU25vdyBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDEzNDcuODA2NzYyNjk1MywgMTA0LjY2ODA2MDMwMjczLCAtIDEzMTkuNzM3MDYwNTQ2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYXJpbmVGb3JkIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDQ5MTQuODIxMjg5MDYyNSwgNTAuOTYzNjI2ODYxNTcyLCA0MjgxLjAyNzgzMjAzMTMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29sb3NzZXVtIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE0MjcuNjIwMzYxMzI4MSwgNy4yODgxMDc4NzIwMDkzLCAtIDI3OTIuNzcyMjE2Nzk2OSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTa3kgSXNsYW5kIDEiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNDg2OS4xMDI1MzkwNjI1LCA3MzMuNDYwNTEwMjUzOTEsIC0gMjY2Ny4wMTgwNjY0MDYzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA0NjA3LjgyMjc1LCA4NzIuNTQyNDgsIC0gMTY2Ny41NTY4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTa3kgSXNsYW5kIDMiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlByaXNvbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDg3NS4zMzAwNzgxMjUsIDUuNjUxOTgxODMwNTk2OSwgNzM0Ljg1MDIxOTcyNjU2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hZ21hIFZpbGxhZ2UiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTI0Ny43MTYzMDg1OTM4LCAxMi44ODM5MzQwMjA5OTYsIDg1MDQuOTY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVW5kZXIgV2F0ZXIgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRm91bnRhaW4gQ2l0eSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTEyNy4xMjg0MTc5Njg4LCA1OS41MDEzNjU2NjE2MjEsIDQxMDUuNDQ1ODAwNzgxMykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTaGFuayBSb29tIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE0NDIuMTY1NTMsIDI5Ljg3ODgyNjEsIC0gMjguMzU0NzQ3OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNb2IgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI4NTAuMjAwNjgsIDcuMzkyMjQ3NjgsIDUzNTQuOTkyNjgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVGhlIENhZmUiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMjgxLjkzNzA3Mjc1MzkwNjI1LCAzMDYuMTMwNjE1MjM0Mzc1LCA2MDkuMjgwMDI5Mjk2ODc1KSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAzODAuNDc5Mjc4NTY0NDUsIDc3LjIyMDM5MDMxOTgyNCwgMjU1LjgyNTUwMDQ4ODI4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZyaXN0IFNwb3QiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTEuMzExNDU1NzI2NjI0LCAyOS4yNzY3MzMzOTg0MzgsIDI3NzEuNTIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJEYXJrIEFyZWEiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDM3ODAuMDMwMjczNDM3NSwgMjIuNjUyMTY0NDU5MjI5LCAtIDM0OTguNTg1OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGbGFtaW5nbyBNYW5zaW9uIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDI4MS45MzcwNzI3NTM5MDYyNSwgMzA2LjEzMDYxNTIzNDM3NSwgNjA5LjI4MDAyOTI5Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGbGFtaW5nbyBSb29tIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuMTUyMDM0NzU5NTIxNDg0LCA5MDUuNDgyOTEwMTU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiR3JlZW4gWm9uZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNDQ4LjUzMDAyOTI5NjksIDczLjAxNjEwNTY1MTg1NSwgLSAzMjEwLjYzMDYxNTIzNDQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmFjdG9yeSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDI0LjEyNjk4MzY0MjU4LCAyMTEuMTYxNzEyNjQ2NDgsIC0gNDI3LjU0MDQ5NjgyNjE3KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvbG9zc3VpbSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNTAzLjYyMjQzNjUyMzQsIDIxOS43OTU2MjM3NzkzLCAxMzY5LjMxMDE4MDY2NDEpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiWm9tYmllIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1NjIyLjAzMzIwMzEyNSwgNDkyLjE5NjA0NDkyMTg4LCAtIDc4MS43ODU1MjI0NjA5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUd28gU25vdyBNb3VudGFpbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNzUzLjE0Mjg4MzMwMDc4LCA0MDguMjM1NTk1NzAzMTMsIC0gNTI3NC42MTQ3NDYwOTM4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlB1bmsgSGF6YXJkIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDYxMjcuNjU0Mjk2ODc1LCAxNS45NTE3NjIxOTk0MDIsIC0gNTA0MC4yODYxMzI4MTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkN1cnNlZCBTaGlwIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuNDAxOTc3NTM5MDYsIDEyNS4wNTcxMjg5MDYyNSwgMzI4ODUuODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkljZSBDYXN0bGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDYxNDguNDExNjIxMDkzOCwgMjk0LjM4Njg3MTMzNzg5LCAtIDY3NDEuMTE2Njk5MjE4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGb3Jnb3R0ZW4gSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDMwMzIuNzY0MTYwMTU2MywgMzE3Ljg5NjcyODUxNTYzLCAtIDEwMDc1LjM3MzA0Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJVc3NvcCBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDQ4MTYuODYxODE2NDA2MywgOC40NTk5ODg1OTQwNTUyLCAyODYzLjgxOTU4MDA3ODEpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWluaSBTa3kgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI4OC43NDA2MDA1ODU5NCwgNDkzMjYuMzE2NDA2MjUsIC0gMzUyNDguNTkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiR3JlYXQgVHJlZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjY4MS4yNzM2ODE2NDA2LCAxNjgyLjgwOTIwNDEwMTYsIC0gNzE5MC45ODUzNTE1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhc3RsZSBPbiBUaGUgU2VhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaW5pU2t5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI2MC42NTU1Nzg2MTMyOCwgNDkzMjUuODA0Njg3NSwgLSAzNTI1My41NzAzMTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlBvcnQgVG93biIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyOTAuNzM3NjcwODk4NDM3NSwgNi43Mjk5NTI4MTIxOTQ4MjQsIDUzNDMuNTUzNzEwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJIeWRyYSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsb2F0aW5nIFR1cnRsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMzI3NC41MjgzMjAzMTMsIDUzMS44MjA3Mzk3NDYwOSwgLSA3NTc5LjIyMjY1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hbnNpb24iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMTI0NjguNTM4MDg1OTM3NSwgMzc1LjAwOTQyOTkzMTY0MDYsIC0gNzU1NC42MjU0ODgyODEyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYXN0bGUgT24gVGhlIFNlYSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSGF1bnRlZCBDYXN0bGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gOTUxNS4zNzIwNzAzMTI1LCAxNjQuMDA2MjQwODQ0NzMsIDU3ODYuMDYxMDM1MTU2MikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJJY2UgQ3JlYW0gSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDkwMi41NjgxNzYyNjk1MywgNzkuOTMyMDQ0OTgyOTEsIC0gMTA5ODguODQ3NjU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUGVhbnV0IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyMDYyLjc0NzU1ODU5MzgsIDUwLjQ3Mzg5MjIxMTkxNCwgLSAxMDIzMi41NjgzNTkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FrZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTg4NC43NzQ3ODAyNzM0Mzc1LCAxOS4zMjc1MjYwOTI1MjkyOTcsIC0gMTE2NjYuODk3NDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2NvYSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDg3Ljk0Mjc2NDI4MjIyNjU2LCA3My41NTQ1MTIwMjM5MjU3OCwgLSAxMjMxOS40NjQ4NDM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYW5keSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTAxNC40MjQxOTQzMzU5Mzc1LCAxNDkuMTEwNjg3MjU1ODU5MzgsIC0gMTQ1NTUuOTYyODkwNjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlRpa2kgT3V0cG9zdCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNjU0Mi40NDcyNjU2MjUsIDU1LjY4NjMyODg4NzkzOTQ1LCAxMDQ0LjQxNjUwMzkwNjI1KSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiROG7q25nIEJheSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgQ2FuY2VsVHdlZW4oKTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiR2nhuqMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzMTggPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2MzE5ID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTm90aWZpY2F0aW9uKTsKICAgICAgICBsb2NhbCB2MzIwID0gdjMxODpXYWl0Rm9yQ2hpbGQoIkRhdGEiKTsKICAgICAgICBsb2NhbCB2MzIxID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiRVhQRnVuY3Rpb24iKSk7CiAgICAgICAgbG9jYWwgdjMyMiA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuTGV2ZWxVcCk7CiAgICAgICAgbG9jYWwgdjMyMyA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQpOwogICAgICAgIGxvY2FsIHYzMjQgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZC5TdG9yYWdlLk90aGVyOkZpbmRGaXJzdENoaWxkKCJMZXZlbFVwX1Byb3h5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQuU3RvcmFnZS5PdGhlcjpGaW5kRmlyc3RDaGlsZCgiTGV2ZWxVcCIpIDsKICAgICAgICBmdW5jdGlvbiB2MTI5KHY1NDMpCiAgICAgICAgICAgIGxvY2FsIHY1NDQgPSB2NTQzOwogICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2NjQ5LCB2NjUwID0gc3RyaW5nLmdzdWIodjU0NCwgIl4oLT8lZCspKCVkJWQlZCkiLCAiJTEsJTIiKTsKICAgICAgICAgICAgICAgIHY1NDQgPSB2NjQ5OwogICAgICAgICAgICAgICAgaWYgKHY2NTAgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm4gdjU0NDsKICAgICAgICBlbmQKICAgICAgICB2MzE5Lm5ldygiPENvbG9yPVllbGxvdz5RVUVTVCBDT01QTEVURUQhPENvbG9yPS8+Iik6RGlzcGxheSgpOwogICAgICAgIHYzMTkubmV3KCJFYXJuZWQ8Q29sb3I9WWVsbG93PjksOTk5LDk5OSw5OTksOTk5IEV4cC48Q29sb3I9Lz4oK05vbmUpIik6RGlzcGxheSgpOwogICAgICAgIHYzMTkubmV3KCJFYXJuZWQ8Q29sb3I9R3JlZW4+JDksOTk5LDk5OSw5OTksOTk5PENvbG9yPS8+Iik6RGlzcGxheSgpOwogICAgICAgIHYzMTguRGF0YS5FeHAuVmFsdWUgPSA5OTk5OTk5OTk5OTk7CiAgICAgICAgdjMxOC5EYXRhLkJlbGkuVmFsdWUgPSB2MzE4LkRhdGEuQmVsaS5WYWx1ZSArIDk5OTk5OTk5OTk5OSA7CiAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIGNvdW50ID0gMDsKICAgICAgICB3aGlsZSAodjMxOC5EYXRhLkV4cC5WYWx1ZSAtIHYzMjEodjMyMC5MZXZlbC5WYWx1ZSkpID4gMCBkbwogICAgICAgICAgICB2MzE4LkRhdGEuRXhwLlZhbHVlID0gdjMxOC5EYXRhLkV4cC5WYWx1ZSAtIHYzMjEodjMyMC5MZXZlbC5WYWx1ZSkgOwogICAgICAgICAgICB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgPSB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgKyAxIDsKICAgICAgICAgICAgdjMxOC5EYXRhLlBvaW50cy5WYWx1ZSA9IHYzMTguRGF0YS5Qb2ludHMuVmFsdWUgKyAzIDsKICAgICAgICAgICAgdjMyMih7CiAgICAgICAgICAgICAgICB2MzE4CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2MzIzLlBsYXkodjMyMywgdjMyNC5WYWx1ZSk7CiAgICAgICAgICAgIHYzMTkubmV3KCI8Q29sb3I9R3JlZW4+TEVWRUwgVVAhPENvbG9yPS8+KCIgLi4gdjMxOC5EYXRhLkxldmVsLlZhbHVlIC4uICIpIik6RGlzcGxheSgpOwogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMSA7CiAgICAgICAgICAgIGlmIChjb3VudCA+PSA1KSB0aGVuCiAgICAgICAgICAgICAgICBkZWxheSA9IHRpY2soKTsKICAgICAgICAgICAgICAgIGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0xldmVsIiwgewogICAgVGl0bGUgPSAiQ+G6pXAiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiTmjhuq1wIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMjcpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5MZXZlbC5WYWx1ZSA9IHRvbnVtYmVyKHYzMjcpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9FWFAiLCB7CiAgICBUaXRsZSA9ICJLaW5oIE5naGnhu4dtIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIk5o4bqtcCIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzI5KQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuRXhwLlZhbHVlID0gdG9udW1iZXIodjMyOSk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0JlbGkiLCB7CiAgICBUaXRsZSA9ICJUaeG7gW4iLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiTmjhuq1wIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMzEpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5CZWxpLlZhbHVlID0gdG9udW1iZXIodjMzMSk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0ZyYWdtZW50cyIsIHsKICAgIFRpdGxlID0gIsSQaeG7g20gRiIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICJOaOG6rXAiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMzMykKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkZyYWdtZW50cy5WYWx1ZSA9IHRvbnVtYmVyKHYzMzMpOwogICAgZW5kCn0pOwpsb2NhbCB2MTIyID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlcyIpLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpOwpUYWJsZV9EZXZpbEZydWl0U25pcGVyID0ge307ClNob3BEZXZpbFNlbGwgPSB7fTsKZm9yIHYzMzUsIHYzMzYgaW4gbmV4dCwgdjEyMiBkbwogICAgdGFibGUuaW5zZXJ0KFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsIHYzMzYuTmFtZSk7CiAgICBpZiB2MzM2Lk9uU2FsZSB0aGVuCiAgICAgICAgdGFibGUuaW5zZXJ0KFNob3BEZXZpbFNlbGwsIHYzMzYuTmFtZSk7CiAgICBlbmQKZW5kCl9HLlNlbGVjdEZydWl0ID0gIkRyYWdvbi1EcmFnb24iOwpfRy5QZXJtYW5lbnRGcnVpdCA9ICJEcmFnb24tRHJhZ29uIjsKX0cuQXV0b0J1eUZydWl0U25pcGVyID0gZmFsc2U7Cl9HLkF1dG9Td2l0Y2hQZXJtYW5lbnRGcnVpdCA9IGZhbHNlOwpsb2NhbCB2MTIzID0gdjE2LkZydWl0OkFkZERyb3Bkb3duKCJEcm9wZG93bkZydWl0IiwgewogICAgVGl0bGUgPSAiQ2jhu41uIFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBUYWJsZV9EZXZpbEZydWl0U25pcGVyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTIzOlNldFZhbHVlKF9HLlNlbGVjdEZydWl0KTsKdjEyMzpPbkNoYW5nZWQoZnVuY3Rpb24odjMzNykKICAgIF9HLlNlbGVjdEZydWl0ID0gdjMzNzsKZW5kKTsKbG9jYWwgdjExMSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUZydWl0IiwgewogICAgVGl0bGUgPSAiTXVhIFRyw6FpIENo4buNbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTExOk9uQ2hhbmdlZChmdW5jdGlvbih2MzM4KQogICAgaWYgdjMzOCB0aGVuCiAgICAgICAgX0cuQXV0b0J1eUZydWl0U25pcGVyID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpOwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQdXJjaGFzZVJhd0ZydWl0IiwgX0cuU2VsZWN0RnJ1aXQsIGZhbHNlKTsKICAgICAgICBlbmQpOwogICAgICAgIF9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMjQgPSB2MTYuRnJ1aXQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duUGVybWFuZW50RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJDaOG7jW4gVHLDoWkgVsSpbmggVmnhu4VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBUYWJsZV9EZXZpbEZydWl0U25pcGVyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTI0OlNldFZhbHVlKF9HLlBlcm1hbmVudEZydWl0KTsKdjEyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMzOSkKICAgIF9HLlBlcm1hbmVudEZydWl0ID0gdjMzOTsKZW5kKTsKbG9jYWwgdjEyNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVBlcm1hbmVudEZydWl0IiwgewogICAgVGl0bGUgPSAixJDhu5VpIFRyw6FpIFbEqW5oIFZp4buFbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQwKQogICAgaWYgdjM0MCB0aGVuCiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHY3NDIgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiU3dpdGNoRnJ1aXQiLAogICAgICAgICAgICAgICAgWzJdID0gX0cuUGVybWFuZW50RnJ1aXQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MikpOwogICAgICAgIGVuZCk7CiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVBlcm1hbmVudEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEyNiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVN0b3JlIiwgewogICAgVGl0bGUgPSAiTMawdSBUcsOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQxKQogICAgX0cuQXV0b1N0b3JlRnJ1aXQgPSB2MzQxOwplbmQpOwp2MTcuVG9nZ2xlU3RvcmU6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9TdG9yZUZydWl0IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuQXV0b1N0b3JlRnJ1aXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQm9tYi1Cb21iIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaWtlLVNwaWtlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNob3AgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ2hvcCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQ2hvcC1DaG9wIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNob3AgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3ByaW5nLVNwcmluZyIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUm9ja2V0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIktpbG8gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJvY2tldC1Sb2NrZXQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2lsbyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU21va2UtU21va2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU21va2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BpbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcGluLVNwaW4iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRmxhbWUtRmxhbWUiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxhbWUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmFsY29uIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZhbGNvbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRmFsY29uIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoImFsY29uIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkljZS1JY2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNhbmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU2FuZC1TYW5kIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNhbmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRGFyayBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEYXJrLURhcmsiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGFyayBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHaG9zdCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSZXZpdmUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkdob3N0LUdob3N0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJldml2ZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEaWFtb25kIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRpYW1vbmQtRGlhbW9uZCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEaWFtb25kIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMaWdodC1MaWdodCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMaWdodCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMb3ZlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxvdmUtTG92ZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMb3ZlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJ1YmJlci1SdWJiZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJhcnJpZXIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQmFycmllci1CYXJyaWVyIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhcnJpZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIk1hZ21hLU1hZ21hIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1hZ21hIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQb3J0YWwgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRvb3ItRG9vciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQb3J0YWwgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlF1YWtlLVF1YWtlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlF1YWtlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdWRkaGEiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaWRlci1TcGlkZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJpcmQ6IFBob2VuaXggRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGhvZW5peCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUGhvZW5peCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaG9lbml4IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlJ1bWJsZS1SdW1ibGUiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlBhaW4gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUGFpbi1QYWluIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBhaW4gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiR3Jhdml0eSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJHcmF2aXR5LUdyYXZpdHkiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiR3Jhdml0eSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRG91Z2gtRG91Z2giLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRG91Z2ggRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU2hhZG93LVNoYWRvdyIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlZlbm9tLVZlbm9tIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlZlbm9tIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNvbnRyb2wgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQ29udHJvbC1Db250cm9sIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNvbnRyb2wgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaXJpdCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU291bC1Tb3VsIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaXJpdCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEcmFnb24tRHJhZ29uIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTGVvcGFyZC1MZW9wYXJkIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMjcgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21GcnVpdCIsIHsKICAgIFRpdGxlID0gIlJhbmRvbSBUcsOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQyKQogICAgX0cuUmFuZG9tX0F1dG8gPSB2MzQyOwplbmQpOwp2MTcuVG9nZ2xlUmFuZG9tRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlJhbmRvbV9BdXRvIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNvdXNpbiIsICJCdXkiKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTI4ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdFRQIiwgewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biBUcsOhaSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQzKQogICAgX0cuQ29sbGVjdEZydWl0VFAgPSB2MzQzOwplbmQpOwp2MTcuVG9nZ2xlQ29sbGVjdFRQOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQ29sbGVjdEZydWl0VFAgdGhlbgogICAgICAgICAgICBmb3IgdjgwMSwgdjgwMiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjgwMi5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHY4MDIuSGFuZGxlLkNGcmFtZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTI5ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdCIsIHsKICAgIFRpdGxlID0gIkThu4tjaCBDaHV54buDbiDEkOG6v24gVHLDoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NCkKICAgIF9HLlR3ZWVuZnJ1aXQgPSB2MzQ0OwplbmQpOwp2MTcuVG9nZ2xlQ29sbGVjdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlR3ZWVuZnJ1aXQgdGhlbgogICAgICAgICAgICBmb3IgdjgwMywgdjgwNCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjgwNC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgwNC5IYW5kbGUuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuRnJ1aXQ6QWRkU2VjdGlvbigixJDhu4tuaCBW4buLIik7CmxvY2FsIHYxMzAgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BQbGF5ZXIiLCB7CiAgICBUaXRsZSA9ICLEkOG7i25oIHbhu4sgTmfGsOG7nWkgY2jGoWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMDpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NSkKICAgIEVTUFBsYXllciA9IHYzNDU7CiAgICBVcGRhdGVQbGF5ZXJDaGFtcygpOwplbmQpOwp2MTcuVG9nZ2xlRXNwUGxheWVyOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcEZydWl0IiwgewogICAgVGl0bGUgPSAixJDhu4tuaCB24buLIFRyw6FpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjEzMTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NikKICAgIERldmlsRnJ1aXRFU1AgPSB2MzQ2OwogICAgd2hpbGUgRGV2aWxGcnVpdEVTUCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVEZXZpbENoYW1zKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcElzbGFuZCIsIHsKICAgIFRpdGxlID0gIsSQ4buLbmggduG7iyDEkOG6o28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMjpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NykKICAgIElzbGFuZEVTUCA9IHYzNDc7CiAgICB3aGlsZSBJc2xhbmRFU1AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlSXNsYW5kRVNQKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcElzbGFuZDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMzMgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BGbG93ZXIiLCB7CiAgICBUaXRsZSA9ICLEkOG7i25oIHbhu4sgSG9hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDgpCiAgICBGbG93ZXJFU1AgPSB2MzQ4OwogICAgVXBkYXRlRmxvd2VyQ2hhbXMoKTsKZW5kKTsKdjE3LlRvZ2dsZUVzcEZsb3dlcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZUZsb3dlckNoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZURldmlsQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZUNoZXN0Q2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBFU1BQbGF5ZXIgdGhlbgogICAgICAgICAgICBVcGRhdGVQbGF5ZXJDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEzNCA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcFJlYWxGcnVpdCIsIHsKICAgIFRpdGxlID0gIlRyw6FpIEThu6lhIEto4bubbSBUw6FvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDkpCiAgICBSZWFsRnJ1aXRFc3AgPSB2MzQ5OwogICAgd2hpbGUgUmVhbEZydWl0RXNwIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZVJlYWxGcnVpdEVzcCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BSZWFsRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRFc3AoKQogICAgZm9yIHY1NDgsIHY1NDkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU0OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDY2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTQ5LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkFkb3JuZWUgPSB2NTQ5LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDY2KTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTA3My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHQgPSB2NTQ5Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NDkuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU0OS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU0OS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU0OS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTAsIHY1NTEgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTE6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTEuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA4NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1MS5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMDg1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5BZG9ybmVlID0gdjU1MS5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTA4NSk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHQgPSB2NTUxLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTEuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1MS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1MS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1MS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTIsIHY1NTMgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTMuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEwNCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1My5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMTA0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5BZG9ybmVlID0gdjU1My5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTEwNCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTExMS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHQgPSB2NTUzLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTMuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1My5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1My5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1My5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjEzNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUlzbGFuZE1pcmFnZUVzcCIsIHsKICAgIFRpdGxlID0gIsSQ4bqjbyBCw60g4bqobiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzUwKQogICAgSXNsYW5kTWlyYWdlRXNwID0gdjM1MDsKICAgIHdoaWxlIElzbGFuZE1pcmFnZUVzcCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVJc2xhbmRNaXJhZ2VFc3AoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlSXNsYW5kTWlyYWdlRXNwOlNldFZhbHVlKGZhbHNlKTsKZnVuY3Rpb24gaXNuaWwodjM1MSkKICAgIHJldHVybiB2MzUxID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjM1MikKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYzNTIpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVJc2xhbmRNaXJhZ2VFc3AoKQogICAgZm9yIHY1NTQsIHY1NTUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNaXJhZ2VJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY1NTUuTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNDcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NTUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkFkb3JuZWUgPSB2NTU1OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzUzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTM0Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkZvbnQgPSBFbnVtLkZvbnQuQ29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0WUFsaWdubWVudCA9IEVudW0uVGV4dFlBbGlnbm1lbnQuVG9wOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NTU1WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NTU1Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1NS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApsb2NhbCB2MTM2ID0gewogICAgIkZsYW1lIiwKICAgICJJY2UiLAogICAgIlF1YWtlIiwKICAgICJMaWdodCIsCiAgICAiRGFyayIsCiAgICAiU3BpZGVyIiwKICAgICJSdW1ibGUiLAogICAgIk1hZ21hIiwKICAgICJCdWRkaGEiLAogICAgIlNhbmQiLAogICAgIlBob2VuaXgiLAogICAgIkRvdWdoIgp9Owpsb2NhbCB2MTM3ID0gdjE2LlJhaWQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duUmFpZCIsIHsKICAgIFRpdGxlID0gIkNo4buNbiBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB2MTM2LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTM3OlNldFZhbHVlKFNlbGVjdENoaXApOwp2MTM3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzUzKQogICAgU2VsZWN0Q2hpcCA9IHYzNTM7CmVuZCk7CmxvY2FsIHYxMzggPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUJ1eSIsIHsKICAgIFRpdGxlID0gIk11YSBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTQpCiAgICBfRy5BdXRvX0J1eV9DaGlwc19EdW5nZW9uID0gdjM1NDsKZW5kKTsKdjE3LlRvZ2dsZUJ1eTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQnV5X0NoaXBzX0R1bmdlb24gdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA1ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJSYWlkc05wYyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNlbGVjdCIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gU2VsZWN0Q2hpcAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDUpKTsKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTM5ID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVTdGFydCIsIHsKICAgIFRpdGxlID0gIkLhuq90IMSQ4bqndSBSYWlkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTUpCiAgICBfRy5BdXRvX1N0YXJ0UmFpZCA9IHYzNTU7CmVuZCk7CnYxNy5Ub2dnbGVTdGFydDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19TdGFydFJhaWQgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLlBsYXllckd1aS5NYWluLlRpbWVyLlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbCBNaWNyb2NoaXAiKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgU2VhMiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY0MzguNzM1MzUsIDI1MC42NDUzNTUsIC0gNDUwMS41MDY4NCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1NDcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjE1NDcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNpcmNsZUlzbGFuZC5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTAxNy40MDg2OSwgMzE0Ljg0NDA1NSwgLSAyODIzLjAxMjcsIC0gMC45MjU3NDM4MTgsIDQuNDgyMTc1ZS04LCAtIDAuMzc4MTUxMjM4LCA0LjU1NTAzMTVlLTksIDEsIDEuMDczNzc1NmUtNywgMC4zNzgxNTEyMzgsIDkuNzY4MTYyZS04LCAtIDAuOTI1NzQzODE4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTY1NiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTY1NikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkJvYXQgQ2FzdGxlIl0uUmFpZFN1bW1vbjIuQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MCA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlTmV4dElzbGFuZCIsIHsKICAgIFRpdGxlID0gIsSQw6FuaCBRdcOhaSBSYWlkK0JheSDEkOG6v24gxJDhuqNvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTYpCiAgICBBdXRvTmV4dElzbGFuZCA9IHYzNTY7CiAgICBpZiBub3QgdjM1NiB0aGVuCiAgICAgICAgX0cuQXV0b05lYXIgPSBmYWxzZTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTmV4dElzbGFuZDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYzNTcgPSB7fTsKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b05leHRJc2xhbmQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgICAgICAgICAgICAgIGlmICh2ODA2IGFuZCB2ODA2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDEgPSB2ODA2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgaWYgKCgodjkwMSAtIFZlY3RvcjMubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSkuTWFnbml0dWRlIDwgMSkgb3IgKCh2OTAxIC0gVmVjdG9yMy5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNykpLk1hZ25pdHVkZSA8IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTcgPSB7fTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiB2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b05lYXIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMiIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDIiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMiIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCAyIl0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAzIikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgMyJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAzIikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDMiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKSBhbmQgbm90IHYzNTdbIklzbGFuZCA0Il0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgNCJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNSIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDUiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNSIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCA1Il0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDEgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUF3YWtlIiwgewogICAgVGl0bGUgPSAiVGjhu6ljIFThu4luaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU4KQogICAgQXV0b0F3YWtlbkFiaWxpdGllcyA9IHYzNTg7CmVuZCk7CnYxNy5Ub2dnbGVBd2FrZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b0F3YWtlbkFiaWxpdGllcyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkF3YWtlbmVyIiwgIkF3YWtlbiIpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDIgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUdldEZydWl0IiwgewogICAgVGl0bGUgPSAiTOG6pXkgVHLDoWkgRMaw4bubaSAxIFRyaeG7h3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MjpPbkNoYW5nZWQoZnVuY3Rpb24odjM1OSkKICAgIF9HLkF1dG9mcnVpdCA9IHYzNTk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b2ZydWl0IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlJvY2tldC1Sb2NrZXQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3Bpbi1TcGluIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkNob3AtQ2hvcCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcHJpbmctU3ByaW5nIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJvbWItQm9tYiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTbW9rZS1TbW9rZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcGlrZS1TcGlrZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJGbGFtZS1GbGFtZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJGYWxjb24tRmFsY29uIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkljZS1JY2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU2FuZC1TYW5kIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkRhcmstRGFyayIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJHaG9zdC1HaG9zdCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJEaWFtb25kLURpYW1vbmQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiTGlnaHQtTGlnaHQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiUnViYmVyLVJ1YmJlciIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCYXJyaWVyLUJhcnJpZXIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgdjE2LlJhaWQ6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCYXkgxJDhur9uIENo4buXIFThuq1wIEvDrWNoIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY0MzguNzM1MzUsIDI1MC42NDUzNTUsIC0gNDUwMS41MDY4NCkpOwogICAgICAgIGVuZAogICAgfSk7CmVsc2VpZiBTZWEzIHRoZW4KICAgIHYxNi5SYWlkOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiQmF5IMSQ4bq/biBDaOG7lyBU4bqtcCBLw61jaCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICBlbmQKICAgIH0pOwplbmQKbG9jYWwgdjU2ID0gdjE2LlJhaWQ6QWRkU2VjdGlvbigiVOG6rXAgS8OtY2ggTGF3Iik7CmxvY2FsIHYxNDMgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUxhdyIsIHsKICAgIFRpdGxlID0gIk11YSBDaGlwIFbDoCDEkMOhbmggTGF3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjApCiAgICBBdXRvX0xhdyA9IHYzNjA7CmVuZCk7CnYxNy5Ub2dnbGVMYXc6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9fTGF3IHRoZW4KICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIk1pY3JvY2hpcCIsICIxIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJNaWNyb2NoaXAiLCAiMiIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvX0xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DaXJjbGVJc2xhbmQuUmFpZFN1bW1vbi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjgsIHYxNDY5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY5Lk5hbWUgPT0gIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjE0NjkuUGFyZW50IG9yICh2MTQ2OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKEF1dG9fTGF3ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjIxNy4yMDIxNDg0Mzc1LCAyOC4wNDc2NDU1Njg4NDgsIC0gNTA1My4xMzU3NDIxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAixJDhu4FuIFRo4budaSBHaWFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICBlbmQKfSk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJD4bqnbiBH4bqhdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4NTc1LjE4MTY0MDYyNSwgMTQ5MzYuNjI3OTI5Njg3NSwgNzIuMzE2MzY4MTAzMDI3MzQpKTsKICAgIGVuZAp9KTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNo4buXIE11YSBHZWFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg5ODEuNTUyNzM0Mzc1LCAxNDg4OC40MjY3NTc4MTI1LCAtIDEyMC4yNDU4NDk2MDkzNzUpKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlJhY2U6QWRkU2VjdGlvbigiVOG7mWMiKTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkPhu61hIFThu5ljIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiSHVtYW4iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI5MjIxLjgyMjI2NTYyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAyMDUuOTkxMTQ5OTAyMzQzNzUpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiU2t5cGllYSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg5NjAuMTU4MjAzMTI1LCAxNDkxOS42MjQwMjM0Mzc1LCAyMzUuMDM5NDg5NzQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjgyMzEuMTc1NzgxMjUsIDE0ODkwLjk3NTU4NTkzNzUsIC0gMjExLjY0MTczODg5MTYwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkN5Ym9yZyIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg1MDIuNjgxNjQwNjI1LCAxNDg5NS45NzU1ODU5Mzc1LCAtIDQyMy43Mjc5MzU3OTEwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkdob3VsIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODY3NC4yNDQxNDA2MjUsIDE0ODkwLjY3Njc1NzgxMjUsIDQ0NS40MzEwNjA3OTEwMTU2KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIk1pbmsiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI5MDEyLjM0MTc5Njg3NSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAzODAuMTQ5MjYxNDc0NjA5NCkpOwogICAgICAgIGVuZAogICAgZW5kCn0pOwpsb2NhbCB2MTQ0ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVIdW1hbmFuZGdob3VsIiwgewogICAgVGl0bGUgPSAiSG/DoG4gVGjDoG5oIOG6omkgW0h1bWFuL0dob3VsXSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzYxKQogICAgS2lsbEF1cmEgPSB2MzYxOwplbmQpOwp2MTcuVG9nZ2xlSHVtYW5hbmRnaG91bDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxNDUgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG90cmlhbCIsIHsKICAgIFRpdGxlID0gIkhvw6BuIFRow6BuaCDhuqJpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjIpCiAgICBfRy5BdXRvUXVlc3RSYWNlID0gdjM2MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG90cmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1F1ZXN0UmFjZSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjExMjMsIHYxMTI0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTEyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjExMjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxMTI0LlBhcmVudCBvciAodjExMjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQ3MCwgdjE0NzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuU2t5VHJpYWwuTW9kZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDcxLk5hbWUgPT0gInNub3dpc2xhbmRfQ3lsaW5kZXIuMDgxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQWih2MTQ3MS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE1ODIsIHYxNTgzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzLlNlYUJlYXN0MTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1ODMuTmFtZSA9PSAiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTgzLkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NDYsIHYxNzQ3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzQ3OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzQ3LlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NDcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc0OCwgdjE3NDkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NDk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NDkuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzQ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTAsIHYxNzUxIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzUxOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzUxLlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1MiwgdjE3NTMgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTMuVG9vbFRpcCA9PSAiR3VuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjg2NTQsIDE0ODk4Ljc4MzIsIC0gMzAsIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEpKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NjQsIHYxNzY1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzY1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc2NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NjUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxNzY1LlBhcmVudCBvciAodjE3NjUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJNaW5rIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTc5MCwgdjE3OTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3OTEuTmFtZSA9PSAiU3RhcnRQb2ludCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzkxLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMTAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTQ2ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVLaWxsVHJpYWwiLCB7CiAgICBUaXRsZSA9ICLEkMOhbmggTmfGsOG7nWkgQ2jGoWkgVHJvbmcgVHJpYWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NjpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MykKICAgIF9HLkF1dG9LaWxsVHJpYWwgPSB2MzYzOwplbmQpOwp2MTcuVG9nZ2xlS2lsbFRyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvS2lsbFRyaWFsIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODcwLCB2ODcxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzEuTmFtZSBhbmQgKHY4NzEuTmFtZSB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSkgYW5kICgodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvS2lsbFRyaWFsIG9yIG5vdCB2ODcxLlBhcmVudCBvciAodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlJhY2U6QWRkU2VjdGlvbigiSHXhuqVuIEx1eeG7h24iKTsKbG9jYWwgdjE0NyA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlRmFybVJhY2UiLCB7CiAgICBUaXRsZSA9ICJDw6B5IEx1eeG7h24gVOG7mWMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKbG9jYWwgdjE0OCA9IGZhbHNlOwp2MTQ3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzY0KQogICAgdjE0OCA9IHYzNjQ7CmVuZCk7CnYxNy5Ub2dnbGVGYXJtUmFjZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIHYxNDggdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSYWNlVHJhbnNmb3JtZWQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmFjZVRyYW5zZm9ybWVkLlZhbHVlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0JvbmVOb1F1ZXN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5Njk4LjQ3MzYzMjgxMjUsIDQ0NS4wOTQ0MjEzODY3MTg3NSwgNjU0NS44NTI1MzkwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJhY2VUcmFuc2Zvcm1lZC5WYWx1ZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX0cuQXV0b0JvbmVOb1F1ZXN0ID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0OSA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlVXBncmFkZSIsIHsKICAgIFRpdGxlID0gIk11YSBHZWFyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjUpCiAgICBfRy5BdXRvVXBncmFkZSA9IHYzNjU7CiAgICBpZiBfRy5BdXRvVXBncmFkZSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVXBncmFkZVJhY2UiLCAiQnV5Iik7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVVwZ3JhZGU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJLaOG6oyBOxINuZyIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiTmjhuqN5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkdlcHBvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJIYWtpIMSQw6FuaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJCdXNvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJE4buLY2ggQ2h1eeG7g24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiU29ydSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSGFraSBRdWFuIFPDoXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsiLCAiQnV5Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIktp4bq/bSIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3V0bGFzcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJDdXRsYXNzIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJJcm9uIE1hY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiSXJvbiBNYWNlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEdWVsIEthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJEdWVsIEthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVHJpcGxlIEthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJUcmlwbGUgS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJQaXBlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlBpcGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkR1YWwtSGVhZGVkIEJsYWRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkR1YWwtSGVhZGVkIEJsYWRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCaXNlbnRvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkJpc2VudG8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNvdWwgQ2FuZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJTb3VsIENhbmUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlBvbGUgVjIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUaHVuZGVyR29kVGFsayIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJWw7UiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJsYWNrIExlZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5QmxhY2tMZWciKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkVsZWN0cm8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cm8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkZpc2htYW4gS2FyYXRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlGaXNobWFuS2FyYXRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEcmFnb24gQ2xhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJEcmFnb25DbGF3IiwgIjEiKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIkRyYWdvbkNsYXciLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU3VwZXJodW1hbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRGVhdGggU3RlcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTaGFya21hbiBLYXJhdGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNoYXJrbWFuS2FyYXRlIiwgdHJ1ZSk7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkVsZWN0cmljIENsYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cmljQ2xhdyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHJhZ29uIFRhbG9uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiR29kaHVtYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUdvZGh1bWFuIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTYW5ndWluZSBBcnQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNhbmd1aW5lQXJ0Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIktow6FjIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7lWkgQ2jhu4kgU+G7kSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZWZ1bmQiLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVmdW5kIiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIsSQ4buVaSBU4buZYyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVyb2xsIiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIsSQ4buVaSBU4buZYyBHaG91bCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM2NiA9IHsKICAgICAgICAgICAgWzFdID0gIkVjdG9wbGFzbSIsCiAgICAgICAgICAgIFsyXSA9ICJDaGFuZ2UiLAogICAgICAgICAgICBbM10gPSA0CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MzY2KSk7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7lWkgVOG7mWMgQ3lib3JnIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzY3ID0gewogICAgICAgICAgICBbMV0gPSAiQ3lib3JnVHJhaW5lciIsCiAgICAgICAgICAgIFsyXSA9ICJCdXkiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MzY3KSk7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICLEkOG7lWkgVOG7mWMgRHJhY28iLAogICAgRGVzY3JpcHRpb24gPSAiQ2jhu4kg4bueIEJp4buDbiAzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgICAgIGxvY2FsIHYzNjggPSBWZWN0b3IzLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KTsKICAgICAgICBsb2NhbCB2MzY5ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHYzNzAgPSB2MzY5LkNoYXJhY3RlciBvciB2MzY5LkNoYXJhY3RlckFkZGVkOldhaXQoKSA7CiAgICAgICAgcmVwZWF0CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICB1bnRpbCAodjM3MC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjM2OCkuTWFnbml0dWRlIDwgMQogICAgICAgIGxvY2FsIHYzNzEgPSB7CiAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgIE5QQyA9ICJEcmFnb24gV2l6YXJkIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiRHJhZ29uUmFjZSIKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Iik6SW52b2tlU2VydmVyKHVucGFjayh2MzcxKSk7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUaGFtIEdpYSBNw6F5IENo4bunIEzhuqFpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIpOwogICAgZW5kCn0pOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAixJDhu5VpIE3DoXkgQ2jhu6ciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIEhvcCgpOwogICAgZW5kCn0pOwpmdW5jdGlvbiBIb3AoKQogICAgbG9jYWwgdjM3MiA9IGdhbWUuUGxhY2VJZDsKICAgIGxvY2FsIHYzNzMgPSB7fTsKICAgIGxvY2FsIHYzNzQgPSAiIjsKICAgIGxvY2FsIHYzNzUgPSBvcy5kYXRlKCIhKnQiKS5ob3VyOwogICAgbG9jYWwgdjM3NiA9IGZhbHNlOwogICAgZnVuY3Rpb24gVFBSZXR1cm5lcigpCiAgICAgICAgbG9jYWwgdjU1NjsKICAgICAgICBpZiAodjM3NCA9PSAiIikgdGhlbgogICAgICAgICAgICB2NTU2ID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gdjM3MiAuLiAiL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwIikpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjU1NiA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iIC4uIHYzNzIgLi4gIi9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCZjdXJzb3I9IiAuLiB2Mzc0KSk7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU1NyA9ICIiOwogICAgICAgIGlmICh2NTU2Lm5leHRQYWdlQ3Vyc29yIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSAibnVsbCIpIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSBuaWwpKSB0aGVuCiAgICAgICAgICAgIHYzNzQgPSB2NTU2Lm5leHRQYWdlQ3Vyc29yOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1NTggPSAwOwogICAgICAgIGZvciB2NjUxLCB2NjUyIGluIHBhaXJzKHY1NTYuZGF0YSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY1MyA9IHRydWU7CiAgICAgICAgICAgIHY1NTcgPSB0b3N0cmluZyh2NjUyLmlkKTsKICAgICAgICAgICAgaWYgKHRvbnVtYmVyKHY2NTIubWF4UGxheWVycykgPiB0b251bWJlcih2NjUyLnBsYXlpbmcpKSB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3Miwgdjg3MyBpbiBwYWlycyh2MzczKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2NTU4IH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1NTcgPT0gdG9zdHJpbmcodjg3MykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY2NTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh0b251bWJlcih2Mzc1KSB+PSB0b251bWJlcih2ODczKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3MiA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYzNzMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MzczLCB2Mzc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB2NTU4ID0gdjU1OCArIDEgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiAodjY1MyA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYzNzMsIHY1NTcpOwogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZSh2MzcyLCB2NTU3LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiB2MTE4KCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgVFBSZXR1cm5lcigpOwogICAgICAgICAgICAgICAgaWYgKHYzNzQgfj0gIiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUUFJldHVybmVyKCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjExOCgpOwplbmQKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigixJDhu5lpIik7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJI4bqjaSBU4bq3YyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJQaXJhdGVzIik7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJI4bqjaSBRdcOibiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJNYXJpbmVzIik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIktpbmggTmdoaeG7h20iKTsKbG9jYWwgdjE1MCA9IHsKICAgICJLSVRUX1JFU0VUIiwKICAgICJTdWIyVW5jbGVLaXphcnUiLAogICAgIlNVQjJHQU1FUlJPQk9UX1JFU0VUMSIsCiAgICAiU3ViMkZlcjk5OSIsCiAgICAiRW55dV9pc19Qcm8iLAogICAgIkpDV0siLAogICAgIlN0YXJjb2RlSEVPIiwKICAgICJNYWdpY0J1cyIsCiAgICAiS2l0dEdhbWluZyIsCiAgICAiU3ViMkNhcHRhaW5NYXVpIiwKICAgICJTdWIyT2ZmaWNhbE5vb2JpZSIsCiAgICAiVGhlR3JlYXRBY2UiLAogICAgIlN1YjJOb29iTWFzdGVyMTIzIiwKICAgICJTdWIyRGFpZ3JvY2siLAogICAgIkF4aW9yZSIsCiAgICAiU3RyYXdIYXRNYWluZSIsCiAgICAiVGFudGFpR2FtaW5nIiwKICAgICJCbHV4eHkiLAogICAgIlNVQjJHQU1FUlJPQk9UX0VYUDEiLAogICAgIkNoYW5kbGVyIiwKICAgICJOT01PUkVIQUNLIiwKICAgICJCQU5FWFBMT0lUIiwKICAgICJXaWxkRGFyZXMiLAogICAgIkJvc3NCdWlsZCIsCiAgICAiR2V0UHJhbmtlZCIsCiAgICAiRUFSTl9GUlVJVFMiLAogICAgIkZJR0hUNEZSVUlUIiwKICAgICJOT0VYUExPSVRFUiIsCiAgICAiTk9PQjJBRE1JTiIsCiAgICAiQ09ERVNMSURFIiwKICAgICJBRE1JTkhBQ0tFRCIsCiAgICAiQURNSU5EQVJFUyIsCiAgICAiZnJ1aXRjb25jZXB0cyIsCiAgICAia3JhenlkYXJlcyIsCiAgICAiVFJJUExFQUJVU0UiLAogICAgIlNFQVRST0xMSU5HIiwKICAgICIyNE5PQURNSU4iLAogICAgIlJFV0FSREZVTiIsCiAgICAiTkVXVFJPTEwiLAogICAgImZ1ZGQxMF92MiIsCiAgICAiRnVkZDEwIiwKICAgICJCaWduZXdzIiwKICAgICJTRUNSRVRfQURNSU4iCn07CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJOaOG6rXAgSOG6v3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGZvciB2NTU5LCB2NTYwIGluIGlwYWlycyh2MTUwKSBkbwogICAgICAgICAgICBSZWRlZW1Db2RlKHY1NjApOwogICAgICAgIGVuZAogICAgZW5kCn0pOwpmdW5jdGlvbiBSZWRlZW1Db2RlKHYzNzcpCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5SZWRlZW06SW52b2tlU2VydmVyKHYzNzcpOwplbmQKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiRGFuaCBIaeG7h3UiKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRhbmggSGnhu4d1IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2Mzc4ID0gewogICAgICAgICAgICBbMV0gPSAiZ2V0VGl0bGVzIgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM3OCkpOwogICAgICAgIGdhbWUuUGxheWVycy5sb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5UaXRsZXMuVmlzaWJsZSA9IHRydWU7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIlRo4bupYyBU4buJbmgiKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRo4bupYyBU4buJbmgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLkF3YWtlbmluZ1RvZ2dsZXIuVmlzaWJsZSA9IHRydWU7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIktow6FjIik7CmxvY2FsIHYxNTEgPSB2MTYuTWlzYzpBZGRUb2dnbGUoIlRvZ2dsZVJlam9pbiIsIHsKICAgIFRpdGxlID0gIlRoYW0gR2lhIE3DoXkgQ2jhu6cgTOG6oWkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTUxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzgxKQogICAgX0cuQXV0b1Jlam9pbiA9IHYzODE7CmVuZCk7CnYxNy5Ub2dnbGVSZWpvaW46U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9SZWpvaW4gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkucmVqb2luID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikuUm9ibG94UHJvbXB0R3VpLnByb21wdE92ZXJsYXkuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHY4MDgpCiAgICAgICAgICAgICAgICBpZiAoKHY4MDguTmFtZSA9PSAiRXJyb3JQcm9tcHQiKSBhbmQgdjgwODpGaW5kRmlyc3RDaGlsZCgiTWVzc2FnZUFyZWEiKSBhbmQgdjgwOC5NZXNzYWdlQXJlYTpGaW5kRmlyc3RDaGlsZCgiRXJyb3JGcmFtZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiU8awxqFuZyIpOwpsb2NhbCBmdW5jdGlvbiB2MTUyKCkKICAgIGxvY2FsIHYzODIgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIik7CiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJCYXNlQXRtb3NwaGVyZSIpIHRoZW4KICAgICAgICB2MzgyLkJhc2VBdG1vc3BoZXJlOkRlc3Ryb3koKTsKICAgIGVuZAogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiU2VhVGVycm9yQ0MiKSB0aGVuCiAgICAgICAgdjM4Mi5TZWFUZXJyb3JDQzpEZXN0cm95KCk7CiAgICBlbmQKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0aW5nTGF5ZXJzIikgdGhlbgogICAgICAgIGlmIHYzODIuTGlnaHRpbmdMYXllcnM6RmluZEZpcnN0Q2hpbGQoIkF0bW9zcGhlcmUiKSB0aGVuCiAgICAgICAgICAgIHYzODIuTGlnaHRpbmdMYXllcnMuQXRtb3NwaGVyZTpEZXN0cm95KCk7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpOwogICAgICAgIGlmIHYzODIuTGlnaHRpbmdMYXllcnM6RmluZEZpcnN0Q2hpbGQoIkRhcmtGb2ciKSB0aGVuCiAgICAgICAgICAgIHYzODIuTGlnaHRpbmdMYXllcnMuRGFya0ZvZzpEZXN0cm95KCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHYzODIuRm9nRW5kID0gMTAwMDAwOwplbmQKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIljDs2EgU8awxqFuZyBNw7kiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHYxNTIoKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE1MyA9IHYxNi5NaXNjOkFkZFRvZ2dsZSgiVG9nZ2xlQW50aUJhbmQiLCB7CiAgICBUaXRsZSA9ICJDaOG7kW5nIEJhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTUzOk9uQ2hhbmdlZChmdW5jdGlvbih2Mzg0KQogICAgX0cuQW50aUJhbmQgPSB2Mzg0OwplbmQpOwpsb2NhbCB2MTU0ID0gewogICAgMTc4ODQ4ODEsCiAgICAxMjAxNzM2MDQsCiAgICA5MTIzNDgKfTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQW50aUJhbmQgdGhlbgogICAgICAgICAgICBmb3IgdjgwOSwgdjgxMCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiB0YWJsZS5maW5kKHYxNTQsIHY4MTAuVXNlcklkKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgSG9wKCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJMZXZpYXRoYW4iKTsKdjE2LlNlYTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiTXVhIENoaXAgTGV2aWF0aGFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJJbmZvTGV2aWF0aGFuIiwgIjIiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE1NSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUEZyb3plbkRpbWVuc2lvbiIsIHsKICAgIFRpdGxlID0gIkJheSDEkOG6v24gxJDhuqNvIExldmlhdGhhbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg1KQogICAgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiA9IHYzODU7CmVuZCk7CnYxNTU6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2Mzg2OwogICAgd2hpbGUgbm90IHYzODYgZG8KICAgICAgICB2Mzg2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiB0aGVuCiAgICAgICAgICAgIGlmIHYzODYgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4odjM4Ni5DRnJhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1NjEgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiVHLhuqFuZyBUaMOhaSBDaGlwIExldmlhdGhhbiIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxMSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkluZm9MZXZpYXRoYW4iLCAiMSIpOwogICAgICAgICAgICAgICAgaWYgKHY4MTEgPT0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiTGV2aWF0aGFuIElzIE91dCBUaGVyZSIpOwogICAgICAgICAgICAgICAgZWxzZWlmICh2ODExID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTYxOlNldERlc2MoIkkgRG9uJ3QgS25vdyIpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiTXVhOiAiIC4uIHRvc3RyaW5nKHY4MTEpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kCmxvY2FsIHYxNTYgPSB2MTYuU2VhOkFkZFNlY3Rpb24oIkRyYWNvIik7CmxvY2FsIHYxNTcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQmxhemVFbWJlciIsIHsKICAgIFRpdGxlID0gIk5o4bq3dCBM4butYSDEkOG7jyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg3KQogICAgX0cuQXV0b0JsYXplRW1iZXIgPSB2Mzg3OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQmxhemVFbWJlciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvRHJhZ29uRG9qb0VtYmVyIik6RmlyZVNlcnZlcigpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTggPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlUmVjZWl2ZVF1ZXN0IiwgewogICAgVGl0bGUgPSAiTmjhuq1uIE5oaeG7h20gVuG7pSBM4butYSDEkOG7jyIsCiAgICBEZXNjcmlwdGlvbiA9ICJC4bqtdCBMw6puIDEgTOG6p24gTMOgIE5o4bqtbiAxIE5o4bqtbiBO4buvYSBUaMOsIFThuq90IELhuq10IEzhuqFpIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE1ODpPbkNoYW5nZWQoZnVuY3Rpb24odjM4OCkKICAgIF9HLkF1dG9SZWNlaXZlUXVlc3QgPSB2Mzg4OwogICAgaWYgX0cuQXV0b1JlY2VpdmVRdWVzdCB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc0ID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIlJlcXVlc3RRdWVzdCIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NzQpKTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc1ID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIkNoZWNrIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NzUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjE1OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRy4bqhbmcgVGjDoWkgTmhp4buHbSBW4bulIEzhu61hIMSQ4buPIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBsb2NhbCB2NjU0ID0gewogICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgIENvbnRleHQgPSAiQ2hlY2siCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGxvY2FsIHY2NTUgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0RyYWdvbkh1bnRlciIpOkludm9rZVNlcnZlcih1bnBhY2sodjY1NCkpOwogICAgICAgICAgICBpZiAodHlwZW9mKHY2NTUpID09ICJ0YWJsZSIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODc3LCB2ODc4IGluIHBhaXJzKHY2NTUpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzggPT0gIkRlZmVhdCAzIFZlbm9tb3VzIEFzc2FpbGFudHMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZWZlYXQgMyBWZW5vbW91cyBBc3NhaWxhbnRzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY4NzggPT0gIkRlZmVhdCAzIEh5ZHJhIEVuZm9yY2VycyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlZmVhdCAzIEh5ZHJhIEVuZm9yY2VycyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2ODc4ID09ICJEZXN0cm95IDEwIHRyZWVzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVzdHJveSAxMCB0cmVlcyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcHJpbnQodjY1NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE2MCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVIeWRyYVRyZWUiLCB7CiAgICBUaXRsZSA9ICJQaMOhIEPDonkg4bueIMSQ4bqjbyBIeWRyYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTYwOk9uQ2hhbmdlZChmdW5jdGlvbih2Mzg5KQogICAgX0cuQXV0b0h5ZHJhVHJlZSA9IHYzODk7CmVuZCk7CmxvY2FsIGZ1bmN0aW9uIHYxNjEodjM5MCkKICAgIGxvY2FsIHYzOTEgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTsKICAgIHYzOTE6U2VuZEtleUV2ZW50KHRydWUsIHYzOTAsIGZhbHNlLCBnYW1lKTsKICAgIHYzOTE6U2VuZEtleUV2ZW50KGZhbHNlLCB2MzkwLCBmYWxzZSwgZ2FtZSk7CmVuZApsb2NhbCBmdW5jdGlvbiB2MTYyKHYzOTIpCiAgICBsb2NhbCB2MzkzID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOwogICAgbG9jYWwgdjM5NCA9IHYzOTMuQmFja3BhY2s7CiAgICBmb3IgdjU2MiwgdjU2MyBpbiBwYWlycyh2Mzk0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgKHY1NjM6SXNBKCJUb29sIikgYW5kICh2NTYzLlRvb2xUaXAgPT0gdjM5MikpIHRoZW4KICAgICAgICAgICAgdjU2My5QYXJlbnQgPSB2MzkzLkNoYXJhY3RlcjsKICAgICAgICAgICAgZm9yIHY4MTIsIHY4MTMgaW4gaXBhaXJzKHsKICAgICAgICAgICAgICAgICJaIiwKICAgICAgICAgICAgICAgICJYIiwKICAgICAgICAgICAgICAgICJDIiwKICAgICAgICAgICAgICAgICJWIiwKICAgICAgICAgICAgICAgICJGIgogICAgICAgICAgICB9KSBkbwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHYxNjEodjgxMyk7CiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjU2My5QYXJlbnQgPSB2Mzk0OwogICAgICAgICAgICBicmVhazsKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjE2MyA9IHsKICAgIENGcmFtZS5uZXcoNTI4OC42MTk2Mjg5MDYyNSwgMTAwNS40MDAwMjQ0MTQwNjI1LCAzOTIuNDMwMTE0NzQ2MDkzNzUpLAogICAgQ0ZyYW1lLm5ldyg1MzQzLjM5NDUzMTI1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDM2MS4wNjg3NTYxMDM1MTU2KSwKICAgIENGcmFtZS5uZXcoNTIzNS43ODU2NDQ1MzEyNSwgMTAwNC4xOTk4OTAxMzY3MTg4LCA0MzEuNDUzMDk0NDgyNDIxOSksCiAgICBDRnJhbWUubmV3KDUzMjEuMzA2MTUyMzQzNzUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgNDQwLjg5NTE0MTYwMTU2MjUpLAogICAgQ0ZyYW1lLm5ldyg1MjU4Ljk2NDg0Mzc1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDM0NS41MDUyNDkwMjM0Mzc1KQp9OwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvSHlkcmFUcmVlIHRoZW4KICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgZm9yIHY4MTQsIHY4MTUgaW4gaXBhaXJzKHYxNjMpIGRvCiAgICAgICAgICAgICAgICBpZiBub3QgX0cuQXV0b0h5ZHJhVHJlZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODE1KTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MTYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgICAgICAgICAgICAgaWYgKHY4MTYgYW5kIHY4MTY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDIgPSAodjgxNi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgxNS5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2OTAyIDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiTWVsZWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiU3dvcmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiR3VuIik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKdjE1NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biBLaHUgVuG7sWMgRHJhZ29uIERvam8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgZW5kCn0pOwp2MTU2OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDaOG6vyBU4bqhbyBWb2xjYW5pYyBNYWduZXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzOTUgPSB7CiAgICAgICAgICAgIFsxXSA9ICJDcmFmdEl0ZW0iLAogICAgICAgICAgICBbMl0gPSAiQ3JhZnQiLAogICAgICAgICAgICBbM10gPSAiVm9sY2FuaWMgTWFnbmV0IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM5NSkpOwogICAgZW5kCn0pOwpsb2NhbCB2MTY0ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RGaXJlRmxvd2VycyIsIHsKICAgIFRpdGxlID0gIk5o4bq3dCBIb2EgxJDhu48iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NikKICAgIF9HLkF1dG9Db2xsZWN0RmlyZUZsb3dlcnMgPSB2Mzk2OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEZpcmVGbG93ZXJzIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0NyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRmlyZUZsb3dlcnMiKTsKICAgICAgICAgICAgaWYgdjc0NyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwMywgdjkwNCBpbiBwYWlycyh2NzQ3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDQ6SXNBKCJNb2RlbCIpIGFuZCB2OTA0LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY3ID0gdjkwNC5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY5ID0gKHYxMzY3IC0gdjEzNjgpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzY5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHYxMzY3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGVCZWx0IiwgewogICAgVGl0bGUgPSAiQ8OgeSDEkGFpIFRy4bqvbmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NykKICAgIF9HLkF1dG9MZXZlbCA9IHYzOTc7CiAgICBpZiB2Mzk3IHRoZW4KICAgICAgICBsb2NhbCB2NjU2ID0gewogICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICBOUEMgPSAiRG9qbyBUcmFpbmVyIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiUmVxdWVzdFF1ZXN0IgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTYpKTsKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIF9HLkF1dG9MZXZlbCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE5QQyA9ICJEb2pvIFRyYWluZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBDb21tYW5kID0gIkNsYWltUXVlc3QiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjgxNykpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjYgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJIb8OgbiBUaMOgbmgg4bqiaSBEcmFjbyBWNCAoU+G7m20gUmEpIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgdjE2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcmlhbFRlbGVwb3J0IiwgewogICAgVGl0bGUgPSAiQmF5IMSQ4bq/biBD4butYSBUcmlhbCBU4buZYyBEcmFjbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTY3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzk4KQogICAgX0cuQXV0b1RyaWFsVGVsZXBvcnQgPSB2Mzk4OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvVHJpYWxUZWxlcG9ydCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kOkZpbmRGaXJzdENoaWxkKCJUcmlhbFRlbGVwb3J0Iik7CiAgICAgICAgICAgIGlmICh2NzQ4IGFuZCB2NzQ4OklzQSgiUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2NzQ4LlBvc2l0aW9uKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjggPSB2MTYuU2VhOkFkZFNlY3Rpb24oIsSQ4bqjbyBEdW5nIE5oYW0iKTsKbG9jYWwgdjE2OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRy4bqhbmcgVGjDoWkgxJDhuqNvIE7DumkgbOG7rWEiLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIGdnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICB2MTY5OlNldERlc2MoIsSQ4bqjbyBOw7ppIGzhu61hOiDinIXvuI8iKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdjE2OTpTZXREZXNjKCLEkOG6o28gTsO6aSBs4butYTog4p2M77iPIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjE3MCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUFZvbGNhbm8iLCB7CiAgICBUaXRsZSA9ICJCYXkgxJDhur9uIMSQ4bqjbyBOw7ppIGzhu61hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzOTkpCiAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSB2Mzk5OwplbmQpOwp2MTcuVG9nZ2xlVFBWb2xjYW5vOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjQwMDsKICAgIHdoaWxlIG5vdCB2NDAwIGRvCiAgICAgICAgdjQwMCA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5Ub1ByZWhpc3RvcmljIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0OSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgICAgICBpZiB2NzQ5IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NzkgPSB2NzQ5OkZpbmRGaXJzdENoaWxkKCJDb3JlIikgYW5kIHY3NDkuQ29yZTpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNSZWxpYyIpIDsKICAgICAgICAgICAgICAgIGxvY2FsIHY4ODAgPSB2ODc5IGFuZCB2ODc5OkZpbmRGaXJzdENoaWxkKCJTa3VsbCIpIDsKICAgICAgICAgICAgICAgIGlmIHY4ODAgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY4ODAuUG9zaXRpb24pKTsKICAgICAgICAgICAgICAgICAgICBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTcxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZURlZmVuZFZvbGNhbm8iLCB7CiAgICBUaXRsZSA9ICJQaMOybmcgVGjhu6ciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MTpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMSkKICAgIF9HLkF1dG9EZWZlbmRWb2xjYW5vID0gdjQwMTsKZW5kKTsKbG9jYWwgdjEwNyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVNZWxlZSIsIHsKICAgIFRpdGxlID0gIkTDuW5nIE1lbGVlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDIpCiAgICBfRy5Vc2VNZWxlZSA9IHY0MDI7CmVuZCk7CmxvY2FsIHYxMDkgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlU3dvcmQiLCB7CiAgICBUaXRsZSA9ICJEw7luZyBTd29yZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDAzKQogICAgX0cuVXNlU3dvcmQgPSB2NDAzOwplbmQpOwpsb2NhbCB2MTEwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUd1biIsIHsKICAgIFRpdGxlID0gIkTDuW5nIEd1biIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2NDA0KQogICAgX0cuVXNlR3VuID0gdjQwNDsKZW5kKTsKbG9jYWwgZnVuY3Rpb24gdjE3Mih2NDA1KQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIHY0MDUsIGZhbHNlLCBnYW1lKTsKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgdjQwNSwgZmFsc2UsIGdhbWUpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE3MygpCiAgICBsb2NhbCB2NDA2ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmU6RmluZEZpcnN0Q2hpbGQoIkludGVyaW9yTGF2YSIpOwogICAgaWYgKHY0MDYgYW5kIHY0MDY6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgdjQwNjpEZXN0cm95KCk7CiAgICBlbmQKICAgIGxvY2FsIHY0MDcgPSBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICBpZiB2NDA3IHRoZW4KICAgICAgICBmb3Igdjc1MCwgdjc1MSBpbiBwYWlycyh2NDA3OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmICh2NzUxOklzQSgiUGFydCIpIGFuZCB2NzUxLk5hbWU6bG93ZXIoKTpmaW5kKCJsYXZhIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3NTE6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgbG9jYWwgdjQwOCA9IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgIGlmIHY0MDggdGhlbgogICAgICAgIGZvciB2NzUyLCB2NzUzIGluIHBhaXJzKHY0MDg6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjc1MzpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY5MDUsIHY5MDYgaW4gcGFpcnModjc1MzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2OTA2OklzQSgiTWVzaFBhcnQiKSBhbmQgdjkwNi5OYW1lOmxvd2VyKCk6ZmluZCgibGF2YSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY5MDY6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCBmdW5jdGlvbiB2MTc0KCkKICAgIGxvY2FsIHY0MDkgPSBnYW1lLldvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZS5Wb2xjYW5vUm9ja3M7CiAgICBmb3IgdjU2NCwgdjU2NSBpbiBwYWlycyh2NDA5OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU2NTpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzU0ID0gdjU2NTpGaW5kRmlyc3RDaGlsZCgidm9sY2Fub3JvY2siKTsKICAgICAgICAgICAgaWYgKHY3NTQgYW5kIHY3NTQ6SXNBKCJNZXNoUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODgxID0gdjc1NC5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MSA9PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIG9yICh2ODgxID09IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU3KSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjc1NDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNjIodjQxMCkKICAgIGxvY2FsIHY0MTEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2NDEyID0gdjQxMS5CYWNrcGFjazsKICAgIGZvciB2NTY2LCB2NTY3IGluIHBhaXJzKHY0MTI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiAodjU2NzpJc0EoIlRvb2wiKSBhbmQgKHY1NjcuVG9vbFRpcCA9PSB2NDEwKSkgdGhlbgogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTEuQ2hhcmFjdGVyOwogICAgICAgICAgICBmb3IgdjgxOCwgdjgxOSBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgIloiLAogICAgICAgICAgICAgICAgIlgiLAogICAgICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAgICAgIlYiLAogICAgICAgICAgICAgICAgIkYiCiAgICAgICAgICAgIH0pIGRvCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdjE3Mih2ODE5KTsKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvRGVmZW5kVm9sY2FubyB0aGVuCiAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgIHBjYWxsKHYxNzMpOwogICAgICAgICAgICBsb2NhbCB2NzU3ID0gdjE3NCgpOwogICAgICAgICAgICBpZiB2NzU3IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODIgPSBDRnJhbWUubmV3KHY3NTcuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICBUd2VlbjIodjg4Mik7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODgzID0gdjc1Ny5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIGFuZCAodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NykpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjc1NyA9IHYxNzQoKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNiA9ICgodjExMjUgLSB2NzU3LlBvc2l0aW9uKSAtIFZlY3RvcjMubmV3KDAsIDAsIDApKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI2IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlTWVsZWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiTWVsZWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZVN3b3JkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIlN3b3JkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VHdW4gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiR3VuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlS2lsbEF1cmEiLCB7CiAgICBUaXRsZSA9ICLEkMOhbmggR29sZW1zIEF1cmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3NTpPbkNoYW5nZWQoZnVuY3Rpb24odjQxMykKICAgIEtpbGxBdXJhID0gdjQxMzsKZW5kKTsKdjE3LlRvZ2dsZUtpbGxBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgS2lsbEF1cmEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg4NCwgdjg4NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4ODUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgS2lsbEF1cmEgb3Igbm90IHY4ODUuUGFyZW50IG9yICh2ODg1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0Qm9uZSIsIHsKICAgIFRpdGxlID0gIk5o4bq3dCBYxrDGoW5nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MTQpCiAgICBfRy5BdXRvQ29sbGVjdEJvbmUgPSB2NDE0OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEJvbmUgdGhlbgogICAgICAgICAgICBmb3IgdjgyMCwgdjgyMSBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmICh2ODIxOklzQSgiQmFzZVBhcnQiKSBhbmQgKHY4MjEuTmFtZSA9PSAiRGlub0JvbmUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY4MjEuUG9zaXRpb24pKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTc3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RFZ2ciLCB7CiAgICBUaXRsZSA9ICJOaOG6t3QgVHLhu6luZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE1KQogICAgX0cuQXV0b0NvbGxlY3RFZ2cgPSB2NDE1OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEVnZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NTggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmUuU3Bhd25lZERyYWdvbkVnZ3M6R2V0Q2hpbGRyZW4oKTsKICAgICAgICAgICAgaWYgKCMgdjc1OCA+IDApIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODYgPSB2NzU4W21hdGgucmFuZG9tKDEsICMgdjc1OCldOwogICAgICAgICAgICAgICAgaWYgKHY4ODY6SXNBKCJNb2RlbCIpIGFuZCB2ODg2LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY4ODYuUHJpbWFyeVBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyOCA9IHY4ODYuUHJpbWFyeVBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjkgPSAodjExMjcgLSB2MTEyOCkuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgIGlmICh2MTEyOSA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNDpOb3RpZnkoewogICAgVGl0bGUgPSAiWWF0YWtpIFJvYmxveCIsCiAgICBDb250ZW50ID0gIlThuqNpIFhvbmciLAogICAgRHVyYXRpb24gPSAxMAp9KTs="
local function decode(data)
    local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    data = data:gsub("[^" .. b .. "=]", "")
    return (data:gsub(".", function(x)
        if x == "=" then return "" end
        local r,f="",(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i-f%2^(i-1)>0 and "1" or "0") end
        return r
    end):gsub("%d%d%d?%d?%d?%d?%d?%d?", function(x)
        if #x ~= 8 then return "" end
        local c=0
        for i=1,8 do c=c+(x:sub(i,i)=="1" and 2^(8-i) or 0) end
        return string.char(c)
    end))
end

load(decode(b64))()
